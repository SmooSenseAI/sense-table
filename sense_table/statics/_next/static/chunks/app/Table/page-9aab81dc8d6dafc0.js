(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[511],{38238:function(e,t,n){Promise.resolve().then(n.bind(n,46249)),Promise.resolve().then(n.bind(n,88895)),Promise.resolve().then(n.bind(n,75936))},75936:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(39290),i=n(78068),o=n(56801),a=n(25182),l=n(98672),s=n(99563),c=n(34513),u=n(85923),d=n(34604),f=n(31595),m=n(71921),x=n(24894),p=n(45855),h=n(31032),g=n.n(h),v=n(63401);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(){var e=(0,x.YJ)().data,t=(0,l.v9)((function(e){return e.cardinality})),n=((0,l.v9)((function(e){return e.columnPreference}))||{}).data,r=(0,o.useMemo)((function(){var r;return null===e||void 0===e||null===(r=e.initialOrder)||void 0===r?void 0:r.map((function(r){var i,o=e.meta[r];return{name:r,duckdbType:o.duckdbType,agType:o.agType,meta:y(y({},g().omit(o,["name","duckdbType","agType"])),{},{min:String(o.min),max:String(o.max)}),cardinality:null===(i=t[r])||void 0===i?void 0:i.data,preference:n[r]}}))}),[e,t,n]),i=(0,o.useCallback)((function(e){return g()(r).map((function(t){return g().keys(t[e])})).flatten().uniq().value()}),[r]),a=(0,o.useMemo)((function(){return{name:{pinned:"left"},meta:{children:i("meta").map((function(e){return{field:"meta.".concat(e),headerName:e,columnGroupShow:"isPrimitive"===e?"close":"open"}}))},cardinality:{children:i("cardinality").map((function(e){return{field:"cardinality.".concat(e),headerName:e,columnGroupShow:"cardinality"===e?"close":"open"}}))},preference:{children:i("preference").map((function(e){return{field:"preference.".concat(e),headerName:e}}))}}}),[i]);return e?(0,v.jsx)(p.M,{initRowData:r,overridingColDefs:a}):null},w=n(67370),O=n(57080),Z=o.memo((function(){return(0,v.jsx)(i.Z,{sx:{flex:0},children:(0,v.jsxs)(s.Q,{title:"Analytics settings",icon:(0,v.jsx)(w.Z,{}),width:400,height:600,children:[(0,v.jsx)(O.Z,{settingKey:"heightOfColumnDistribution"}),(0,v.jsx)(O.Z,{settingKey:"histogramNumberOfBins"}),(0,v.jsx)(O.Z,{settingKey:"thresholdCategorical"})]})})})),P=n(67856),S=n(3058),C=n(32699);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var k=o.memo((function(){var e=(0,l.v9)((function(e){return e.sql})),t=(0,C.Z)(),n=(0,o.useMemo)((function(){return Object.entries(e).map((function(e){var t=(0,P.Z)(e,2),n=t[0],r=t[1];return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:n,details:n},g().pick(r,["lastupdated","status","runtime","error"]))}))}),[e]),r=(0,o.useMemo)((function(){return{key:{pinned:"left"},status:{cellStyle:function(e){switch(e.value){case"success":return{color:t.palette.success.main};case"error":return{color:t.palette.error.main};case"running":return{color:t.palette.warning.main};default:return{}}}},runtime:{cellStyle:function(e){return{color:e.value<1?t.palette.text.secondary:t.palette.warning.main}}},details:{cellRenderer:function(e){return(0,v.jsx)(S.Z,{sqlKey:e.data.key})}}}}),[t]);return e?(0,v.jsx)(p.M,{initRowData:n,overridingColDefs:r}):null}));k.displayName="InspectSql";var I=k,R=n(55219),E=n(4605),M=n(53858),T=n(50790),F=n(8483),N=n(52728),G=n(7418),L=n(58243);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=o.memo((function(e){var t=e.icon,n=e.presetName,r=(0,l.I0)(),i=(0,l.v9)((function(e){return e.layout.presets}));return(0,v.jsx)(T.KM,{title:n,children:(0,v.jsx)(E.Z,{size:"small",onClick:function(){r((0,F.wV)(i[n]))},sx:B({},N.j),children:t})})})),K=o.memo((function(e){(0,R.Z)(e);var t=(0,l.v9)((function(e){return e.layout.current}));return(0,v.jsxs)(a.$B,{title:"Layout",children:[(0,v.jsx)(z,{icon:(0,v.jsx)(c.Pg,{}),presetName:L.fF}),(0,v.jsx)(z,{icon:(0,v.jsx)(c.EA,{}),presetName:L.HK}),(0,v.jsx)(z,{icon:(0,v.jsx)(c.Bt,{}),presetName:L.vb}),(0,v.jsxs)(s.Q,{title:"More",icon:(0,v.jsx)(G.Z,{}),children:[(0,v.jsx)(T.M$,{title:"Current layout"}),(0,v.jsx)(M.M,{obj:t})]})]})})),V=n(52150),X=function(){return(0,l.v9)((function(e){return e.settings.enableDebugging}))?(0,v.jsxs)(a.$B,{title:"Debug",children:[(0,v.jsx)(s.Q,{title:"Inspect State",icon:(0,v.jsx)(d.Z,{}),children:(0,v.jsx)(u.Z,{})}),(0,v.jsx)(s.Q,{title:"Inspect column metadata",icon:(0,v.jsx)(f.Z,{}),initMaximized:!0,children:(0,v.jsx)(b,{})})]}):null},J=function(e){var t=e.count,n=e.color,i=e.meaning;return(0,v.jsx)(T.KM,{title:"".concat(t," ").concat(i),children:(0,v.jsx)(r.Z,{sx:{color:n},id:"sql-status-count-".concat(i),children:t})})},q=function(){var e=(0,l.v9)((0,V.P1)((function(e){return e.sql}),(function(e){return g().countBy(e,"status")}))),t=e.success,n=void 0===t?0:t,r=e.error,o=void 0===r?0:r,u=e.running,d=void 0===u?0:u;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.pT,{}),(0,v.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,v.jsx)(s.Q,{title:"Inspect SQL",icon:(0,v.jsx)(c.jc,{}),initMaximized:!0,children:(0,v.jsx)(I,{})}),(0,v.jsx)(J,{count:n,color:"success.main",meaning:"success"}),(0,v.jsx)(J,{count:o,color:"error.main",meaning:"error"}),(0,v.jsx)(J,{count:d,color:"warning.main",meaning:"running"})]})]})},_=o.memo((function(){var e=(0,l.v9)((function(e){return e.dataFile.filePath})),t=(0,l.v9)((function(e){return e.viewing.pagination.countFiltered})),n=(0,l.v9)((function(e){return e.agColDefs.sorting})),r=(0,l.v9)((0,V.P1)((function(e){return e.columnMeta.data}),(function(e){var t;return null===e||void 0===e||null===(t=e.initialOrder)||void 0===t?void 0:t.length})));return(0,v.jsxs)(a.ZP,{settings:(0,v.jsx)(Z,{}),children:[(0,v.jsx)(a.R4,{k:"File",v:e}),(0,v.jsx)(a.R4,{k:"Rows",v:t?t.toLocaleString():"N/A"}),(0,v.jsx)(a.R4,{k:"Columns",v:r?r.toLocaleString():"N/A"}),(0,v.jsx)(a.R4,{k:"Sorting",v:n.length?n.map((function(e){return"".concat(e.field," ").concat(e.order.toUpperCase())})).join(", "):"N/A"}),(0,v.jsx)(q,{}),(0,v.jsx)(i.Z,{sx:{flex:1}}),(0,v.jsx)(K,{}),(0,v.jsx)(X,{})]})}))},88895:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Kn}});var r=n(71921),i=n(55219),o=(n(36881),n(41532)),a=n(98672),l=n(56801),s=n(78068),c=n(39290),u=n(44832),d=n(54972),f=n(63401),m=l.memo((function(e){var t=e.children;return(0,f.jsx)(s.Z,{sx:{backgroundColor:"background.paper",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:t})})),x=l.memo((function(e){var t=e.text;return(0,f.jsx)(m,{children:(0,f.jsx)(c.Z,{variant:"h6",color:"text.secondary",children:t})})})),p=l.memo((function(){return(0,f.jsx)(m,{children:(0,f.jsx)(d.Z,{})})})),h=n(8483);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){var t=e.modelJson,n=e.tabComponents,i=(0,a.v9)((function(e){return e.settings.mode})),d=(0,a.I0)(),m=v(v({},t),{},{global:u.Yr}),p=(0,l.useState)(o.Hn.fromJson(m)),g=p[0],j=p[1],y=(0,a.v9)((function(e){return e.layout.target}));(0,l.useEffect)((function(){y&&(j(o.Hn.fromJson(v(v({},y),{},{global:u.Yr}))),d((0,h.wV)(null))),d((0,h.p8)(g.toJson()))}),[g,d,y]);var b=(0,l.useCallback)((function(e,t){d((0,h.p8)(e.toJson()))}),[d]);return(0,f.jsx)(s.Z,{className:"flexlayout__theme_".concat(i),sx:{height:"100%",width:"100%",position:"relative"},children:(0,f.jsx)(o.Ar,{className:"flexlayout",model:g,factory:function(e){var t=e.getComponent(),r=n[t];return r?(0,f.jsx)(s.Z,{id:"flexlayout-tabbody-".concat(t),sx:{padding:0,height:"100%",width:"100%"},children:r}):(0,f.jsx)(x,{text:t})},useVisibility:!0,onRenderTab:function(e,t){var n,i=e.isSelected(),o=e.getName(),a=i?"text.primary":"text.secondary";t.content=(0,f.jsx)(s.Z,{id:"flexlayout-tabheader-".concat(o),sx:(n={color:a,pl:1,pr:1,margin:0,gap:1,height:30},(0,r.Z)(n,"color",i?"text.primary":"text.secondary"),(0,r.Z)(n,"borderRadius",1),(0,r.Z)(n,"display","flex"),(0,r.Z)(n,"flexDirection","row"),(0,r.Z)(n,"alignItems","center"),n),children:(0,f.jsx)(c.Z,{variant:"body1",sx:{},children:o})})},onModelChange:b})})},y=n(42001),b=n(63661),w=n(31032),O=n.n(w),Z=n(16620),P=n(96975),S=n(58055),C=n(37736),D=n(11553),k=n(90091),I=n(3058),R=n(75926),E=n(36444),M=l.memo((function(){var e=(0,a.I0)(),t=(0,a.v9)((function(e){return e.viewing.pagination.pageSize})),n=(0,a.v9)((function(e){return e.viewing.sampleCondition}));return(0,P.XE)(n)?null:(0,f.jsx)(s.Z,{sx:{flex:0},children:(0,f.jsx)(k.OO,{onClick:function(){e((0,E.h)({source:"".concat(t," rows from random sampling")}))},variant:"outlined",children:"Random"})})}));M.displayName="RandomSampling";var T=M,F=n(57080),N=l.memo((function(){var e=(0,a.I0)(),t=(0,a.v9)((function(e){return e.viewing.pagination}),a.wU),n=t.pageSize,r=t.pageNumber,i=(0,a.v9)((function(e){return e.viewing.pagination.countBaseline})),o=(0,a.v9)((function(e){return e.viewing.pagination.countFiltered})),l=(0,a.v9)((function(e){return e.viewing.rowDataSource}),a.wU);if((0,P.XE)(o)||(0,P.XE)(i))return"";var u=function(t,n){e((0,S.Ik)({pageNumber:n})),e(C.It.actions.setShouldRefresh())},d=function(t){var n=parseInt(t.target.value,10);e((0,S.Ik)({pageSize:n})),e(C.It.actions.setShouldRefresh())},m=function(){e(C.It.actions.setShouldRefresh()),e((0,S.O1)("Table")),e((0,S.dZ)("True"))},x=(0,f.jsxs)(R.we,{title:"Table settings",children:[(0,f.jsx)(F.Z,{settingKey:"heightOfColumnDistribution"}),(0,f.jsx)(F.Z,{settingKey:"tableMaxRowHeight"}),(0,f.jsx)(F.Z,{settingKey:"tableDefaultColumnWidth"})]}),p=(0,f.jsx)(Z.t,{countBaseline:i,countFiltered:o,label:"Total"});return(0,f.jsx)(s.Z,{sx:{gap:1,backgroundColor:"background.card",px:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:(0,P.XE)(l)||"Table"===l?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(T,{}),(0,f.jsx)(D.Z,{component:"div",size:"small",count:o,labelDisplayedRows:function(e){var t=e.from,n=e.to;return"Showing ".concat(t.toLocaleString()," to ").concat(n.toLocaleString())},page:r,onPageChange:u,labelRowsPerPage:"Page size",rowsPerPage:n,onRowsPerPageChange:d,showFirstButton:!0,showLastButton:!0,sx:{minHeight:36,".MuiTablePagination-toolbar":{minHeight:"36px",my:0,py:0},".MuiTablePagination-selectLabel, .MuiTablePagination-displayedRows":{fontSize:"0.75rem",my:0,py:0},".MuiTablePagination-select":{my:0,py:0}}}),(0,f.jsx)(s.Z,{sx:{flex:1}}),p,(0,f.jsx)(I.Z,{sqlKey:"rowData"}),x]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(T,{}),(0,f.jsxs)(c.Z,{variant:"body2",sx:{margin:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"auto"},children:["Showing ",l]}),(0,f.jsx)(s.Z,{sx:{flex:1}}),(0,f.jsx)(k.OO,{onClick:m,children:"Back to Table"}),(0,f.jsx)(I.Z,{sqlKey:"samples"}),x]})})}));N.displayName="PaginationBar";var G=N,L=n(24894),H=n(20619),B=[{isTopRow:!0}],z={domLayout:"normal",animateRows:!1,pagination:!1,headerHeight:45,suppressColumnVirtualisation:!0,suppressRowVirtualisation:!0},K=n(74434),V=n(61906),X=n(33);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}b.O3h.registerModules([b.ea9]);var _=l.memo((function(){var e=(0,l.useRef)(),t=(0,a.I0)();(0,L.YJ)();var n=(0,L.nF)(),r=n.data,i=(n.loading,n.error),o=(0,K.Z)({noCellPadding:!0}),u=(0,X.Qy)(),d=(0,X.qS)();(0,l.useEffect)((function(){var e=V.h.subscribe((function(){var e=V.h.getState().viewing.justClickedColumn;(0,P.XE)(e)||m((function(t){return t.ensureColumnVisible(e,"start")}))}));return e}),[]);var m=function(t){var n,r=null===(n=e.current)||void 0===n?void 0:n.api;(0,P.XE)(r)||t(r)},x=function(e){var n=(0,H.qv)(e.api);t((0,H.oW)(n)),p(e)},p=O().debounce((function(e){var n=e.api.getHorizontalPixelRange(),r=n.left,i=n.right,o=O()(e.api.getAllDisplayedColumns()).filter((function(e){return e.getLeft()>=r-10&&e.getLeft()+e.getActualWidth()<=i+10})).map((function(e){return e.colDef.field})).value();t((0,S.gU)(o))}),100),h=(0,f.jsx)(y.s,q(q({ref:e,theme:o,pinnedTopRowData:B,onSortChanged:function(e){var n=O()(e.api.getColumns()).filter((function(e){return null!==e.sortIndex})).map((function(e){return{field:e.colDef.field,order:e.sort,sortIndex:e.sortIndex}})).sortBy("sortIndex").value();return t((0,H.OS)(n)),t(C.It.actions.setShouldRefresh()),!1},rowData:r,columnDefs:d,defaultColDef:u},z),{},{onColumnMoved:x,onColumnVisible:x,onRowClicked:function(e){e.data.isTopRow||t((0,S.jY)(e.data.rowIndex))},onBodyScroll:function(e){p(e)}}));return i?(0,f.jsx)(s.Z,{sx:{padding:2},children:(0,f.jsx)(c.Z,{variant:"body1",color:"error",children:i})}):(0,f.jsxs)(s.Z,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},id:"main-table-container",children:[(0,f.jsx)(s.Z,{sx:{flex:1,width:"100%",flexGrow:1,overflow:"auto"},children:h}),(0,f.jsx)(s.Z,{sx:{width:"100%",flex:0},children:(0,f.jsx)(G,{})})]})}));_.displayName="Table";var U=_,W=n(91946),Y=n(10642),A=n.n(Y),Q=n(8294),$=n(74859),ee=n(44485),te=n(67856),ne=n(91010),re=n(44652),ie=n(10016),oe=n(63054),ae=n(55109),le=n(30913),se=n(93885),ce=n(19235),ue=n(6203),de=n(72907),fe=n(58306),me=n(77498),xe=l.memo((function(e){var t=e.colDef,n=e.searchText,r=t.field,i=(0,a.I0)(),o=!0===(null===t||void 0===t?void 0:t.hide),s=(0,fe.QJ)(r),c="left"===(null===t||void 0===t?void 0:t.pinned)||"right"===(null===t||void 0===t?void 0:t.pinned),u=(0,l.useState)(!1),d=u[0],m=u[1],x=(0,a.v9)((function(e){return e.viewing.visibleColumns.includes(r)}));if(!s)return(0,f.jsx)(oe.ZP,{children:r});var p=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(se.S,{columnName:r,renderType:null===s||void 0===s?void 0:s.renderType,cellDataType:null===t||void 0===t?void 0:t.cellDataType}),(0,f.jsx)(ae.Z,{sx:{padding:0,margin:0,flex:1},onClick:function(){(0,S.nn)({dispatch:i,columnName:r})},children:(0,f.jsx)(le.Z,{className:"select-none",sx:{overflow:"hidden",flex:1,paddingLeft:.5,textDecoration:o?"line-through":"none",color:x?"primary.light":"text.secondary"},children:(0,ce.k6)(r,n)})}),(0,f.jsxs)(me.$,{children:[d&&(0,f.jsx)(de.Z,{columnName:r,hide:null===t||void 0===t?void 0:t.hide}),(d||c)&&(0,f.jsx)(ue.O,{columnName:r,pinned:null===t||void 0===t?void 0:t.pinned,hide:null===t||void 0===t?void 0:t.hide})]})]});return(0,f.jsx)(oe.ZP,{sx:{padding:0,width:"100%",display:"flex",flexDirection:"row"},onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},children:p})})),pe="item",he=function(e){var t=e.id,n=e.item,r=e.index,i=e.moveItem,o=e.onDrop,a=(0,l.useRef)(null),s=(0,ne.L)({accept:pe,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var n;if(a.current){var o=e.index,l=r;if(o!==l){var s=null===(n=a.current)||void 0===n?void 0:n.getBoundingClientRect(),c=(s.bottom-s.top)/2,u=t.getClientOffset().y-s.top;o<l&&u<c||o>l&&u>c||(i(o,l),e.index=l)}}},drop:function(e,t){o(e.id)}}),c=(0,te.Z)(s,2),u=c[0].handlerId,d=c[1],m=(0,re.c)({type:pe,item:function(){return{id:t,index:r}},collect:function(e){return{isDragging:e.isDragging()}}}),x=(0,te.Z)(m,3),p=x[0].isDragging,h=x[1],g=x[2];(0,l.useEffect)((function(){g((0,ie.r)(),{captureDraggingState:!0})}),[g]);var v=p?.3:1;return h(d(a)),(0,f.jsx)("div",{ref:a,style:{opacity:v},"data-handler-id":u,children:(0,f.jsx)(xe,{colDef:n.colDef,searchText:n.searchText})})},ge=n(78323),ve=n(34228),je={position:"fixed",pointerEvents:"none",zIndex:1300,left:0,top:0};function ye(e,t){if(!e||!t)return{display:"none"};var n=t.x,r=t.y;return{transform:"translate(".concat(n,"px, ").concat(r,"px)"),WebkitTransform:"translate(".concat(n,"px, ").concat(r,"px)")}}var be=function(){var e=(0,ge.f)((function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}})),t=e.item,n=(e.itemType,e.isDragging),r=e.initialOffset,i=e.currentOffset;return n?(0,f.jsx)("div",{style:je,children:(0,f.jsx)("div",{style:ye(r,i),children:(0,f.jsxs)(s.Z,{sx:{padding:.5,display:"flex",flexDirection:"row",alignItems:"center",gap:1,backgroundColor:"background.paper",borderRadius:1,boxShadow:3},children:[(0,f.jsx)(ve.Z,{}),(0,f.jsx)(c.Z,{children:t.id})]})})}):null},we=function(e){var t=e.initialItems,n=e.onDropComplete,r=(0,l.useState)(t),i=r[0],o=r[1],a=(0,l.useRef)(i);(0,l.useEffect)((function(){o(t)}),[t]),(0,l.useEffect)((function(){a.current=i}),[i]);var s=(0,l.useCallback)((function(e,t){o((function(n){return A()(n,{$splice:[[e,1],[t,0,n[e]]]})}))}),[]),c=(0,l.useCallback)((function(e){n(e,a.current)}),[n]),u=(0,l.useCallback)((function(e,t){return(0,f.jsx)(he,{index:t,id:e.id,item:e,moveItem:s,onDrop:c},e.id)}),[c,s]);return(0,f.jsxs)(Q.W,{backend:$.PD,children:[(0,f.jsx)(be,{}),(0,f.jsx)(ee.Z,{sx:{minHeight:100,border:"1px solid",borderColor:"borderColor",borderRadius:1,padding:1,overflow:"auto"},children:i.map((function(e,t){return u(e,t)}))})]})},Oe=n(52728),Ze=n(18469),Pe=n(9807),Se=n(58243),Ce=n(69380),De=n(40679),ke=n.n(De),Ie=n(83611),Re=n(22982),Ee=n.n(Re);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe=function(e){var t=e.color,n=e.children,r=e.sx,i=void 0===r?{}:r;return(0,f.jsx)(c.Z,{variant:"body2",sx:Te({color:t,flex:0,fontFamily:"monospace"},i),children:n})},Ne=function(e){var t=e.children;return(0,f.jsx)(Fe,{color:"warning.light",sx:{fontWeight:"bold"},children:t})},Ge=function(e){var t=e.children;return(0,f.jsx)(Fe,{color:"success.main",children:t})},Le=function(e){var t=e.children;return(0,f.jsx)(Fe,{color:"primary.light",sx:{maxWidth:"200px",minWidth:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:t})},He=l.memo((function(e){var t=e.baseUrl,n=e.params,r=(0,Ie.Lv)({baseUrl:t,params:n});return(0,f.jsx)(Ee(),{href:r,target:"_blank",children:(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:0,alignItems:"flex-start",width:"100%",flexWrap:"wrap"},children:[(0,f.jsx)(Fe,{color:"text.primary",children:t}),(0,f.jsx)(Ne,{children:"?"}),Object.keys(n).map((function(e,t){return(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:0,alignItems:"center"},children:[t>0&&(0,f.jsx)(Ne,{children:"&"}),(0,f.jsx)(Ge,{children:e}),(0,f.jsx)(Ne,{children:"="}),(0,f.jsx)(Le,{children:n[e]})]},t)}))]})})})),Be=(n(33418),n(69663)),ze=l.memo((function(e){var t=e.baseUrl,n=e.params,r=e.singleRowData,i=(0,Be.Z)("tableMaxRowHeight").value,o=(0,l.useState)({}),a=o[0],c=o[1],u=(0,l.useState)(""),m=(u[0],u[1]);return(0,l.useEffect)((function(){var e=function(){var e=(0,Ce.Z)(ke().mark((function e(){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ie.LJ)({params:n,singleRowData:r});case 2:i=e.sent,c(i),m((0,Ie.Lv)({baseUrl:t,params:i}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n,r,t]),O().isEmpty(a)?(0,f.jsx)(d.Z,{size:20}):(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:1,width:"100%",height:i,alignItems:"center"},children:[(0,f.jsx)(s.Z,{sx:{flex:0,width:i,height:i},children:!1}),(0,f.jsx)(s.Z,{sx:{maxHeight:i,flex:1,height:"100%"},children:(0,f.jsx)(He,{baseUrl:t,params:a})})]})})),Ke=n(50790),Ve=n(58048),Xe=n(52625),Je=n(88399),qe=n(84531),_e=n(92153),Ue=n(10251),We=l.memo((function(e){var t=e.column,n=(0,L.nF)().data;return(0,P.XE)(n)?(0,f.jsx)(d.Z,{}):(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,f.jsx)(Ke.M$,{title:"Preview"}),n.slice(0,3).map((function(e,n){return(0,f.jsx)(ze,{baseUrl:t.baseUrl,params:t.params,singleRowData:e},n)}))]})})),Ye=l.memo((function(e){var t=e.column,n=(0,a.I0)(),r=(0,l.useState)(t.renderType),i=r[0],o=r[1],c=(0,l.useState)(t),u=c[0],d=c[1],m=(0,l.useState)(t.name),x=m[0],p=m[1],h=(0,l.useState)(t.baseUrl),g=h[0],v=h[1],j=(0,l.useState)(O().toPairs(t.params).map((function(e){var t=(0,te.Z)(e,2);return{key:t[0],value:t[1]}}))),y=j[0],b=j[1],w=function(){return{name:x,baseUrl:g,renderType:i,params:O().fromPairs(y.map((function(e){return[e.key,e.value]})))}},Z=[Se.Je.IFRAME,Se.Je.LINK];return(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",gap:2,my:1,p:1},children:[(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,f.jsx)(k.Wr,{label:"Render Type",value:i,options:Z,onValueChange:o,width:"200px"}),(0,f.jsx)(k.dw,{label:"Base URL",value:g,monospace:!0,onValueChange:v,color:"text.primary"})]}),(0,f.jsx)(Ke.M$,{title:"URL Parameters"}),y.map((function(e,t){var n=e.key,r=e.value;return(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,f.jsx)(k.dw,{label:"key",value:n,monospace:!0,sx:{maxWidth:"150px"},onValueChange:function(e){return function(e,t){var n=(0,Pe.Z)(y);n[e].key=t,b(n)}(t,e)},color:"success.main"}),(0,f.jsx)(k.dw,{label:(0,f.jsx)(Ke.oy,{addon:(0,f.jsx)(Ee(),{href:"https://docs.jsonata.org/overview.html",target:"_blank",children:(0,f.jsx)(Ue.Z,{})}),text:"Value using JSONATA expression"}),value:r,monospace:!0,sx:{flex:1},onValueChange:function(e){return function(e,t){var n=(0,Pe.Z)(y);n[e].value=t,b(n)}(t,e)},color:"primary.light"}),(0,f.jsx)(k.Pi,{icon:(0,f.jsx)(Xe.Z,{}),onClick:function(){return function(e){var t=(0,Pe.Z)(y);t.splice(e,1),b(t)}(t)}})]},t)})),(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,f.jsx)(k.OO,{onClick:function(){b([].concat((0,Pe.Z)(y),[{key:"key",value:'"value"'}]))},variant:"outlined",startIcon:(0,f.jsx)(Ve.Z,{}),children:"Add"}),(0,f.jsx)(k.OO,{onClick:function(){d(t),p(t.name),v(t.baseUrl),o(t.renderType),b(O().toPairs(t.params).map((function(e){var t=(0,te.Z)(e,2);return{key:t[0],value:t[1]}})))},variant:"outlined",color:"warning",startIcon:(0,f.jsx)(Je.Z,{}),children:"Undo"}),(0,f.jsx)(s.Z,{sx:{flex:1}}),(0,f.jsx)(k.OO,{onClick:function(){var e=w();d(e)},variant:"outlined",startIcon:(0,f.jsx)(qe.Z,{}),children:"Preview"}),(0,f.jsx)(k.OO,{onClick:function(){var e=w();n(updateDerivedColumn(e))},startIcon:(0,f.jsx)(_e.Z,{}),children:"Save"})]}),(0,f.jsx)(We,{column:u})]})}));function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e=l.memo((function(e){var t=e.column,n=(0,f.jsxs)(s.Z,{sx:Qe({display:"flex",flexDirection:"row",gap:1},Oe.j),children:[Ze.E[t.renderType],(0,f.jsx)(c.Z,{variant:"body1",children:t.name})]});return(0,f.jsx)(R.ZP,{trigger:n,title:t.name,anchorHorizontal:"right",anchorVertical:"top",transformOriginHorizontal:"left",transformOriginVertical:"top",width:500,height:400,children:(0,f.jsx)(Ye,{column:t})})}));function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt=l.memo((function(){var e=(0,a.v9)((function(e){return e.derivedColumns}));return 0===e.length?null:(0,f.jsxs)(s.Z,{sx:tt({display:"flex",flexDirection:"column",gap:1,p:1},Oe.PD),children:[(0,f.jsx)(c.Z,{variant:"h6",children:"Derived Columns"}),e.map((function(e){return(0,f.jsx)($e,{column:e},e.name)}))]})}));nt.displayName="DerivedColumns";var rt=nt,it=l.memo((function(e){(0,i.Z)(e);var t=(0,a.I0)(),n=(0,l.useState)(""),r=n[0],o=n[1],c=(0,X.yU)(),u=c.columnDefs,d=c.loading,m=(c.error,(0,l.useState)([])),x=m[0],h=m[1];if((0,l.useEffect)((function(){var e=u.map((function(e){return{id:e.field,colDef:e,searchText:r}}));h(e)}),[u,r]),d)return(0,f.jsx)(p,{});if(0===x.length)return null;return(0,f.jsxs)(W.Z,{sx:{height:"100%",flex:1,display:"flex",flexDirection:"column",gap:1,padding:1},children:[(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,f.jsx)(s.Z,{sx:{flex:1},children:(0,f.jsx)(k.dw,{label:"Search column name",value:r,onValueChange:o})}),(0,f.jsx)(s.Z,{sx:{flex:0},children:(0,f.jsx)(I.Z,{sqlKey:"columnMeta"})})]}),(0,f.jsx)(we,{initialItems:x,onDropComplete:function(e,n){var r=n.map((function(e){return e.colDef}));t((0,H.oW)(r))}}),(0,f.jsx)(rt,{})]})})),ot=n(32699),at=n(53858),lt=n(5158);function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut=l.memo((function(e){var t=e.value,n=(0,Be.Z)("galleryItemSize").value,r=t;return r?(0,f.jsx)(s.Z,{sx:ct(ct({},Oe.PD),{},{width:n+2,height:n+2}),children:(0,f.jsx)("iframe",{style:{width:n,height:n},src:r+"&size=".concat(n)})}):String(t)})),dt=l.memo((function(e){var t=e.row,n=e.index,r=(0,a.I0)(),i=(0,a.v9)((function(e){return e.settings.galleryItemSize}))||128,o=(0,a.v9)((function(e){return e.settings.galleryVisualColumn})),l=(0,a.v9)((function(e){return e.settings.galleryCaptionColumn})),u=(0,a.v9)((function(e){return e.viewing.justClickedRow})),d=(0,ot.Z)(),m=(0,fe.QJ)(o),x=t[l],p=t[o];return(0,f.jsxs)(s.Z,{sx:{width:i+2,padding:0,float:"left",margin:.5,border:"1px solid",borderColor:d.palette.divider,bgcolor:u===n?"highlight.light":"background.card",color:u===n?"highlight.contrastText":"text.primary",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"left",justifyContent:"center",gap:1},onClick:function(){r((0,S.jY)(n))},children:[function(){if((0,P.XE)(o))return null;switch(m.renderType){case Se.Je.IFRAME:return(0,f.jsx)(ut,{value:p});case Se.Je.IMAGE_URL:return(0,f.jsx)(lt.F,{url:p,size:i,cropSquare:!0});case Se.Je.JSON:return(0,f.jsx)(s.Z,{sx:{width:i,height:i,overflow:"auto"},children:(0,f.jsx)(at.M,{obj:p})});case Se.Je.TEXT:return(0,f.jsx)(s.Z,{sx:{width:i,height:i,overflow:"auto",padding:.5},children:(0,f.jsx)(c.Z,{variant:"body2",children:(0,P.XE)(p)?"-":String(p)})});default:return null}}(),(0,f.jsx)(c.Z,{variant:"body2",className:"truncate",sx:{padding:.5},children:(0,P.XE)(x)?"-":String(x)})]})})),ft=n(92633),mt=n(68181),xt=l.memo((function(e){var t=e.settingKey,n=e.content;return(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",border:"1px solid",borderColor:"borderColor",padding:1,borderRadius:1},children:[(0,f.jsx)(s.Z,{children:(0,f.jsx)(R.SV,{title:"".concat(t," missing"),children:n})}),(0,f.jsx)(c.Z,{variant:"body2",children:t})]})})),pt=function(e){var t=e.meta,n=e.renderType;return t.isNumeric&&!t.allNull&&!t.singleValue&&n===Se.Je.NUMBER},ht=function(e){e.meta;return e.renderType===Se.Je.CATEGORY},gt=l.memo((function(e){var t=e.settingKey,n=e.label,i=e.onValueChange,o=void 0===i?null:i,s=e.promptIfNoCandidates,c=void 0===s?[]:s,u=e.showStats,d=void 0===u?"none":u,m=e.multiple,x=void 0!==m&&m,p=e.columnSelector,h=e.allowEmpty,g=void 0!==h&&h,v=e.extraCandidates,j=void 0===v?[]:v,y=(0,a.I0)(),b=(0,a.v9)((function(e){return e.settings[t]}))||(x?[]:""),w=((0,L.YJ)()||{}).data,O=(0,fe.oN)(),Z=w||{},P=Z.initialOrder,S=Z.meta,C=(P||[]).filter((function(e){return p({meta:S[e]||{},renderType:O[e]||""})})).concat(j),D=x?0===b.length:""===b,I=(0,l.useCallback)((function(e){y((0,ft.V)((0,r.Z)({},t,e))),o&&o(e)}),[y,o,t]);if((0,l.useEffect)((function(){x&&!g?D&&C.length>0&&I([C[0]]):D&&C.length>0&&!g&&I(C[0])}),[C,I,x,D,g]),0===C.length&&!g){var R=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ke.w0,{text:"There is no column candidate"}),c.map((function(e,t){return(0,f.jsx)(Ke.w0,{text:e},t)}))]});return(0,f.jsx)(xt,{settingKey:t,content:R})}var E=(0,f.jsx)(k.aO,{options:g?[""].concat((0,Pe.Z)(C)):C,value:b,onChange:I,label:n,multiple:x}),M=b&&(0,f.jsx)(mt.Z,{name:b});return"left"===d?(0,f.jsxs)(me.X,{children:[M,E]}):"right"===d?(0,f.jsxs)(me.X,{children:[E," ",M]}):E}));gt.displayName="SelectColumnInSettings";var vt=gt,jt=function(){var e=(0,a.v9)((function(e){return e.derivedColumns})),t=O().map(e,(function(e){return e.name}));return(0,f.jsx)(gt,{settingKey:"galleryVisualColumn",label:"Which column to display as the main visual in gallery?",columnSelector:function(e){var t=e.meta,n=e.renderType;return!t.allNull&&!t.singleValue&&[Se.Je.IMAGE_URL,Se.Je.VIDEO_URL,Se.Je.JSON,Se.Je.TEXT].includes(n)},extraCandidates:t})},yt=function(){return(0,f.jsx)(gt,{settingKey:"galleryCaptionColumn",label:"Which column to show as item caption in gallery?",columnSelector:function(e){var t=e.meta,n=e.renderType;return!t.allNull&&!t.singleValue&&[Se.Je.CATEGORY,Se.Je.TEXT,Se.Je.NUMBER].includes(n)}})},bt=n(42070),wt=l.memo((function(){return(0,f.jsxs)(bt.Z,{children:[(0,f.jsx)(T,{}),(0,f.jsx)(s.Z,{sx:{flex:1},children:(0,f.jsx)(jt,{})}),(0,f.jsx)(s.Z,{sx:{flex:1},children:(0,f.jsx)(yt,{})}),(0,f.jsx)(s.Z,{sx:{flex:1},children:(0,f.jsx)(F.Z,{settingKey:"galleryItemSize"})})]})}));wt.displayName="GalleryControls";var Ot=l.memo((function(){var e=(0,a.v9)((function(e){return e.rowData.data}))||[];return(0,f.jsxs)(W.Z,{sx:{display:"flex",flexDirection:"column",backgroundColor:"background.paper",height:"100%",width:"100%"},children:[(0,f.jsx)(s.Z,{sx:{flex:0},children:(0,f.jsx)(wt,{})}),(0,f.jsx)(s.Z,{sx:{display:"block",flex:1,overflow:"auto",padding:1},children:e.map((function(e,t){return(0,f.jsx)(dt,{row:e,index:t},"".concat(t))}))})]})})),Zt=n(52150),Pt=function(){var e=(0,a.v9)((function(e){return e.agColDefs.columnDefs})),t=(0,a.v9)((function(e){return e.columnPreference.data})),n=(0,a.v9)((0,Zt.P1)([function(e){return e.viewing},function(e){return e.rowData.data}],(function(e,t){return(0,P.XE)(e.justClickedRow)||(0,P.XE)(t)?null:t[e.justClickedRow]})));if(!n)return(0,f.jsx)(s.Z,{sx:{p:2,backgroundColor:"background.paper"},className:"full-size",children:(0,f.jsx)(c.Z,{variant:"h6",children:"Click on a row in table to view details."})});return(0,f.jsx)(s.Z,{sx:{backgroundColor:"background.paper"},children:(0,f.jsx)(ee.Z,{children:e.map((function(e){var r=e.field,i=function(e){var r,i=O().get(n,e);if((0,P.XE)(i))return String(i);switch(null===(r=t[e])||void 0===r?void 0:r.renderType){case"ImageUrl":return(0,f.jsx)(lt.F,{url:i,showUrl:!0});case"JSON":return(0,f.jsx)(s.Z,{sx:{width:"100%",maxHeight:"500px",overflow:"auto"},children:(0,f.jsx)(at.M,{obj:i})});case"IFrameVisualization":return(0,f.jsx)(ut,{value:i});default:return(0,f.jsx)(c.Z,{component:"div",children:String(i)})}}(r);return(0,f.jsx)(oe.ZP,{children:(0,f.jsx)(le.Z,{primary:(0,f.jsx)(c.Z,{component:"div",variant:"h6",children:r}),secondary:(0,f.jsx)(c.Z,{component:"div",variant:"body2",sx:{color:"text.secondary"},children:i})})},r)}))})})},St=n(15055),Ct=n(60685),Dt=n(69371),kt=n.n(Dt),It=n(98358),Rt=function(){var e=(0,a.I0)(),t=(0,a.v9)((function(e){return e.dataFile})),n=t.filePath,r=t.fileFormat,i=(0,Ct.useSearchParams)(),o=i.get("filePath"),s=i.get("fileFormat"),c=(0,a.v9)((function(e){return e.settings.folderBrowserRootFolder}));return(0,l.useEffect)((function(){if(o){var t=s||kt().extname(o).slice(1);e((0,St.n)({filePath:o,fileFormat:t})),c||e((0,ft.V)({folderBrowserRootFolder:(0,It.yx)(o)}))}else if(!n)throw new Error("No file path provided")}),[e,n,c,r,o,s]),{filePath:n,fileFormat:r}};function Et(e){var t=e.top,n=e.bottom,r=e.initTopHeight,i=void 0===r?"50%":r,o=(0,l.useState)(i),a=o[0],c=o[1],u=(0,l.useState)(0),d=u[0],m=u[1],x=(0,l.useRef)(null);(0,l.useEffect)((function(){var e=function(){x.current&&m(x.current.clientHeight)};e();var t=new ResizeObserver(e);return x.current&&t.observe(x.current),function(){return t.disconnect()}}),[]);var p=function(e){if("string"===typeof e&&e.includes("%")){var t=parseFloat(e)/100;return d*t}return parseFloat(e)},h=p(a);return(0,f.jsxs)(s.Z,{ref:x,sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,f.jsx)(s.Z,{sx:{height:"".concat(h,"px"),overflow:"auto"},children:t}),(0,f.jsx)(s.Z,{onMouseDown:function(e){var t=e.clientY,n=p(a),r=function(e){var r=e.clientY-t;!function(e){if("string"===typeof i&&i.includes("%")){var t=e/d*100;c("".concat(Math.max(10,Math.min(90,t)),"%"))}else c(Math.max(100,e))}(n+r)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)}))},sx:{height:"2px",bgcolor:"divider",cursor:"row-resize","&:hover":{bgcolor:"primary.main"}}}),(0,f.jsx)(s.Z,{sx:{flex:1,overflow:"auto"},children:n})]})}var Mt=l.memo((function(e){var t=e.columnNames,n=e.messageIfEmpty;return 0===t.length?(0,f.jsx)(x,{text:n}):(0,f.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column",gap:1,p:1,overflow:"auto",backgroundColor:"background.paper"},children:t.map((function(e){return(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,f.jsx)(s.Z,{sx:{flex:1},children:(0,f.jsx)(c.Z,{variant:"body1",className:"one-line-text",children:e})}),(0,f.jsx)(s.Z,{sx:{flex:1},children:(0,f.jsx)(mt.Z,{name:e})})]},e)}))})})),Tt=l.memo((function(){var e=(0,a.v9)((0,Zt.P1)([function(e){return e.agColDefs.filters},function(e){var t,n;return null===(t=e.columnMeta)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.primitiveColumns}],(function(e,t){return{havingFilter:O().keys(e||{}),withoutFilter:O().difference(t,O().keys(e||{}))}}))),t=e.havingFilter,n=e.withoutFilter;return(0,f.jsx)(Et,{top:(0,f.jsx)(Mt,{columnNames:t,messageIfEmpty:"No active column filters"}),bottom:(0,f.jsx)(Mt,{columnNames:n,messageIfEmpty:"No columns without filters"})})})),Ft=n(4456),Nt=n(5665),Gt=function(){var e=(0,L.k2)().data,t=(0,a.I0)();if((0,P.XE)(e))return(0,f.jsx)(d.Z,{});var n=function(){t(Ft.Z.actions.setShouldRefresh())};return(0,f.jsxs)(bt.Z,{children:[(0,f.jsx)(s.Z,{sx:{flex:1},children:(0,f.jsx)(vt,{settingKey:"boxPlotBreakdownColumn",label:"Breakdown column",onValueChange:n,showStats:"left",allowEmpty:!0,columnSelector:ht})}),(0,f.jsx)(s.Z,{sx:{flex:1},children:(0,f.jsx)(vt,{settingKey:"boxPlotColumns",label:"What columns to plot?",onValueChange:n,multiple:!0,showStats:"none",columnSelector:pt})}),(0,f.jsx)(s.Z,{sx:{flex:0,minWidth:100},children:(0,f.jsx)(Nt.Z,{settingKey:"boxPlotSortBy",shortLabel:"Sort by?"})}),(0,f.jsx)(I.Z,{sqlKey:"boxPlot"})]})},Lt=n(45855),Ht=l.memo((function(e){var t=e.data,n=e.width,r=void 0===n?200:n,i=e.strokeWidth,o=void 0===i?2:i,l=(0,ot.Z)(),s=(0,a.v9)((function(e){return e.settings.heightOfColumnDistribution}));if(!t||(0,P.XE)(t.avg))return null;var u=s/2,d=u-8,m=u+8,x=t.min,p=t.q25,h=t.q50,g=t.q75,v=t.max,j=t.avg,y=(0,P.kX)(t.globalMin,x),b=(0,P.kX)(t.globalMax,v),w=function(e){return 4+(e-y)*(r-8)/(b-y)},O=function(e){var t=e.x;return(0,f.jsx)("line",{x1:t,x2:t,y1:d,y2:m,stroke:l.palette.text.primary,strokeWidth:o})};if(y===b)return(0,f.jsxs)(c.Z,{variant:"body2",children:["Single value: ",y]});var Z=(0,f.jsxs)("svg",{width:r,height:s,style:{backgroundColor:l.palette.background.card},children:[(0,f.jsx)("line",{x1:w(x),x2:w(v),y1:u,y2:u,stroke:l.palette.text.secondary,strokeWidth:o,strokeDasharray:"5,5"}),(0,f.jsx)("rect",{x:w(p),y:d,width:w(g)-w(p),height:16,stroke:l.palette.text.primary,strokeWidth:o,fill:l.palette.plotFill}),(0,f.jsx)(O,{x:w(x)}),(0,f.jsx)(O,{x:w(h)}),(0,f.jsx)(O,{x:w(v)}),(0,f.jsx)("circle",{cx:w(j),cy:u,r:4,fill:l.palette.warning.main})]});return(0,f.jsx)(R.ZP,{trigger:Z,tooltip:null,title:"Boxplot stats",children:(0,f.jsx)(at.M,{obj:t})})})),Bt=n(61837);function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt=l.memo((function(){var e=(0,a.I0)(),t=(0,l.useRef)(!0),n=(0,L.Y5)(),r=n.data,i=(n.loading,n.error),o=(0,a.v9)((function(e){return e.settings.boxPlotSortBy})),c=(0,a.v9)((function(e){return e.settings.boxPlotBreakdownColumn})),u=(0,ot.Z)(),d=O().sumBy(r,"count"),m=(0,fe.UJ)();(0,l.useEffect)((function(){t.current?t.current=!1:e(Ft.Z.actions.setShouldRefresh())}),[e]);var x=O()(m).map((function(e){return[e,{globalMin:O()(r).map((function(t){var n;return null===(n=t[e])||void 0===n?void 0:n.min})).min(),globalMax:O()(r).map((function(t){var n;return null===(n=t[e])||void 0===n?void 0:n.max})).max()}]})).fromPairs().value(),p=(0,l.useMemo)((function(){return Kt({breakdown:{pinned:"left",headerName:c},count:Kt(Kt({},(0,Bt.MO)(u)),{},{cellRenderer:(0,Bt.S6)({min:0,max:d,isPercent:!1,muiTheme:u})}),rowIndex:{hide:!0}},O().mapValues(x,(function(e,t){return{headerName:t,valueFormatter:function(e){return e.value},cellRenderer:function(t){return(0,f.jsx)(Ht,{data:Kt(Kt({},t.value),e),width:150})},comparator:function(e,t){return e[o]-t[o]}}})))}),[x,o,c,u,d]);return(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,f.jsx)(Gt,{}),i&&(0,f.jsx)(s.Z,{sx:{p:1,color:"error.main"},children:i}),(0,f.jsx)(s.Z,{sx:{flex:1,padding:1,width:"100%",height:"100%"},children:r&&(0,f.jsx)(Lt.M,{initRowData:r,overridingColDefs:p})})]})}));var Xt=n(86318),Jt=n(72349),qt=n(31649),_t=l.memo((function(e){var t=e.value,n=(0,a.I0)(),r=(0,a.v9)((0,Zt.P1)((function(e){return e.viewing.heatmapColumnSort}),(function(e){var n=e||{},r=n.byRow,i=n.order;return r===t?i:null}))),i=null!==r,o=i?"asc"===r?(0,f.jsx)(Jt.Z,{fontSize:"small"}):"desc"===r?(0,f.jsx)(qt.Z,{fontSize:"small"}):null:null;return(0,f.jsxs)(Xt.Z,{variant:"text",onClick:function(){n((0,S.Rw)(t))},sx:{textTransform:"none",fontSize:"inherit",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",gap:1,color:i?"primary.main":"text.primary"},children:[(0,f.jsx)(c.Z,{variant:"body2",sx:{textAlign:"left",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},children:t}),o&&(0,f.jsx)(s.Z,{sx:{flex:0},children:(0,f.jsx)(Ke.KM,{title:"Columns are sorted by counts in this row",children:o})})]})}));_t.displayName="HeatmapRowHeader";var Ut=_t,Wt=n(41208);function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qt=function(e){return{headerName:e,headerStyle:{paddingLeft:"8px"},pinned:"left",field:Wt.wH,colId:Wt.wH,lockPosition:!0,flex:1,cellRenderer:Ut}},$t=function(e,t){return At(At({headerName:"rowTotal",headerStyle:{paddingLeft:"8px"},maxWidth:200,field:"rowTotal",pinned:"right",flex:1,lockPosition:!0,colId:"rowTotal"},(0,Bt.MO)(t)),{},{cellRenderer:(0,Bt.S6)({min:0,max:e.sum,isPercent:!1,muiTheme:t})})},en=function(e){var t=e.xLabel,n=e.xStats,r=e.yStats,i=e.normalizeColor,o=e.muiTheme,a=e.allStats;return function(e){if(e.data.isPinned)return(0,Bt.MO)(o).cellStyle;var l=[a.min,a.max];if("per_row"===i){var s=e.data[Wt.wH];l=[r[s].min,r[s].max]}else"per_column"===i&&(l=[n[t].min,n[t].max]);return At(At({},function(e){var t=e.min,n=e.max,r=e.value;if((0,P.XE)(r))return{};var i,o=Math.max(0,Math.min(1,(r-t)/(n-t))),a=[180,180,180],l=[200,30,0];if(o<.5){var s=o/.5;i=[0,90,180].map((function(e,t){return Math.round(e+(a[t]-e)*s)}))}else{var c=(o-.5)/.5;i=a.map((function(e,t){return Math.round(e+(l[t]-e)*c)}))}var u="rgb(".concat(i[0],", ").concat(i[1],", ").concat(i[2],")"),d=i,f=(0,te.Z)(d,3);return{backgroundColor:u,color:(.299*f[0]+.587*f[1]+.114*f[2])/255>.5?"#000000":"#ffffff"}}({min:l[0],max:l[1],value:e.value})),{},{textAlign:"right",paddingRight:"8px",fontFamily:"monospace",cursor:"pointer",fontSize:o.typography.fontSize})}},tn=function(e){var t=e.data,n=e.normalizeColor,r=e.xColumn,i=e.yColumn,o=e.muiTheme;if(!t)return[];var a=t||{},l=a.xLabels,s=a.xStats,c=a.yStats,u=a.allStats,d=null===l||void 0===l?void 0:l.map((function(e){return At(At({},function(e){var t=e.xLabel,n=e.xColumn,r=e.allStats,i=e.muiTheme;return{headerName:String(t),field:t,headerTooltip:"".concat(n,": ").concat(t),flex:1,valueGetter:function(e){var n;return null===(n=e.data[t])||void 0===n?void 0:n.cnt},valueFormatter:Bt.Xz,cellRenderer:function(e){return e.data.isPinned?(0,Bt.S6)({min:0,max:r.sum,isPercent:!1,muiTheme:i})(e):e.value}}}({xLabel:e,xColumn:r,allStats:u,muiTheme:o})),{},{headerStyle:{paddingLeft:"8px"},cellStyle:en({xLabel:e,xStats:s,yStats:c,normalizeColor:n,muiTheme:o,allStats:u})})}));return[Qt(i),$t(u,o)].concat((0,Pe.Z)(d))},nn=n(81476),rn=function(){return(0,f.jsx)(R.we,{title:"Heatmap Settings",children:(0,f.jsx)(Nt.Z,{settingKey:"heatmapNormalizeColor"})})},on=n(5395),an=l.memo((function(e){(0,i.Z)(e);var t=(0,a.I0)(),n=(0,a.v9)((function(e){return e.settings.heatmapXColumn})),r=(0,a.v9)((function(e){return e.settings.heatmapYColumn})),o=function(){t(Wt.Mx.actions.setShouldRefresh())};return(0,f.jsxs)(bt.Z,{children:[(0,f.jsx)(vt,{settingKey:"heatmapXColumn",label:"X column",onValueChange:o,showStats:"left",columnSelector:ht}),(0,f.jsx)(k.Pi,{icon:(0,f.jsx)(on.Z,{}),onClick:function(){t((0,ft.V)({heatmapXColumn:r,heatmapYColumn:n})),o()},iconSize:"large"}),(0,f.jsx)(vt,{settingKey:"heatmapYColumn",label:"Y column",onValueChange:o,showStats:"right",columnSelector:ht}),(0,f.jsx)(I.Z,{sqlKey:"heatMap"}),(0,f.jsx)(rn,{})]})}));function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}b.O3h.registerModules([b.ea9]);var cn=l.memo((function(){var e=(0,a.I0)(),t=(0,L.q4)(),n=t.data,i=(t.loading,t.error,(0,l.useMemo)((function(){return(null===n||void 0===n?void 0:n.rowData)||[]}),[n])),o=(0,l.useMemo)((function(){var e,t;return[sn(sn({},O().mapValues((null===n||void 0===n?void 0:n.xStats)||{},(function(e){return{cnt:e.sum}}))),{},(t={isPinned:!0},(0,r.Z)(t,Wt.wH,"columnTotal"),(0,r.Z)(t,"rowTotal",null===n||void 0===n||null===(e=n.allStats)||void 0===e?void 0:e.sum),t))]}),[n]),c=(0,l.useRef)(),u=(0,K.Z)({noCellPadding:!0}),d=(0,ot.Z)(),m=(0,a.v9)((function(e){return e.settings.heatmapXColumn})),x=(0,a.v9)((function(e){return e.settings.heatmapYColumn})),p=(0,a.v9)((function(e){return e.settings.heatmapNormalizeColor})),h=(0,a.v9)((function(e){return e.viewing.heatmapColumnSort}));(0,l.useEffect)((function(){e(Wt.Mx.actions.setShouldRefresh())}),[m,x,e]);var g=(0,l.useMemo)((function(){return tn({data:n,muiTheme:d,xColumn:m,yColumn:x,normalizeColor:p})}),[n,d,m,x,p]),v=(0,l.useMemo)((function(){return{sortable:!0,filter:!1,resizable:!0,flex:1,minWidth:80,wrapHeaderText:!0,autoHeaderHeight:!0}}),[]);(0,l.useEffect)((function(){if(n&&n.xLabels.length>0&&c.current&&c.current.api&&h){var e=h.byRow,t=h.order,r=function(){if("none"===t)return O().sortBy(n.xLabels);var r=[].concat((0,Pe.Z)(i),(0,Pe.Z)(o)).find((function(t){return t[Wt.wH]===e})),a=O().map(n.xLabels,(function(e){var t;return[(null===r||void 0===r||null===(t=r[e])||void 0===t?void 0:t.cnt)||0,e]})),l=O()(a).sortBy((function(e){return e[0]})).map((function(e){return e[1]})).value();return"desc"===t?O().reverse(l):"asc"===t?l:O().sortBy(n.xLabels)}();c.current.api.moveColumns(r,2)}}),[h,n,i,o]);var j=(0,l.useCallback)((function(t){switch(t.column.colId){case Wt.wH:case"rowTotal":return;default:var n=t.column.colId,r=t.data[Wt.wH],i="".concat((0,nn.q)(m)," = ").concat((0,nn.M)(n)," AND ").concat((0,nn.q)(x)," = ").concat((0,nn.M)(r));return e((0,S.dZ)(i)),void e((0,E.h)({source:"Samples from heatmap"}))}}),[e,m,x]),b=(0,l.useCallback)((function(e){e.api.sizeColumnsToFit()}),[]),w=(0,l.useCallback)((function(e){e.api.sizeColumnsToFit()}),[]),Z=(0,l.useCallback)((function(e){e.api.sizeColumnsToFit()}),[]);return n?(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,f.jsx)(an,{}),(0,f.jsx)(Ke.hx,{children:(0,f.jsx)(y.s,{domLayout:"normal",ref:c,theme:u,onCellClicked:j,pinnedTopRowData:o,rowData:i,columnDefs:g,groupHeaderHeight:60,onRowDataUpdated:Z,defaultColDef:v,onGridReady:b,onGridSizeChanged:w})})]}):(0,f.jsx)(an,{})}));cn.displayName="HeatmapTable";var un=cn,dn=n(45325),fn=function(){return(0,f.jsx)(R.we,{title:"Histogram Settings",children:(0,f.jsx)(F.Z,{settingKey:"histogramNumberOfBins"})})},mn=n(78454),xn=l.memo((function(e){var t=e.haveLasso,n=void 0!==t&&t;return(0,f.jsxs)(R.gm,{title:"Plotly Help",children:[(0,f.jsx)(Ke.M$,{title:"Navigation in the figure"}),(0,f.jsxs)(mn.g,{children:[(0,f.jsx)(mn.I,{keys:["Scroll"],descriptions:["Zoom in and out of the histogram."]}),(0,f.jsx)(mn.I,{keys:["Drag"],descriptions:["Move the histogram along the draging direction."]}),(0,f.jsx)(mn.I,{keys:["Double Click"],descriptions:["Reset zoom to auto-fit."]})]}),(0,f.jsx)(Ke.M$,{title:"Operations on data points"}),(0,f.jsxs)(mn.g,{children:[(0,f.jsx)(mn.I,{keys:["Hover"],descriptions:["See detailed information about the data point under the mouse cursor."]}),(0,f.jsx)(mn.I,{keys:["Click"],descriptions:["See samples of the clicked data point in Gallery."]}),n&&(0,f.jsx)(mn.I,{keys:["Drag circle"],descriptions:["If in lasso mode, select multiple data points by drawing a circle around them."]})]}),(0,f.jsx)(Ke.M$,{title:"Operations on legend"}),(0,f.jsxs)(mn.g,{children:[(0,f.jsx)(mn.I,{keys:["Click"],descriptions:["Toggle on/off the associated data series."]}),(0,f.jsx)(mn.I,{keys:["Double Click"],descriptions:["Only show the associated data series, and turn off others."]})]})]})})),pn=l.memo((function(){var e=(0,a.I0)(),t=function(){e(dn.S.actions.setShouldRefresh())};return(0,f.jsxs)(bt.Z,{children:[(0,f.jsx)(xn,{}),(0,f.jsx)(vt,{settingKey:"histogramBreakdownColumn",label:"Breakdown column",onValueChange:t,showStats:"left",allowEmpty:!0,columnSelector:ht}),(0,f.jsx)(vt,{settingKey:"histogramColumn",label:"HistogramColumn",onValueChange:t,showStats:"right",columnSelector:pt}),(0,f.jsx)(I.Z,{sqlKey:"histogram"}),(0,f.jsx)(fn,{})]})})),hn=n(2617),gn=n.n(hn),vn=gn()((function(){return n.e(476).then(n.bind(n,26476))}),{loadableGenerated:{webpack:()=>[26476]},ssr:!1,loadableGenerated:{webpack:function(){return[26476]}}}),jn=l.memo((function(){var e=(0,a.I0)(),t=(0,l.useRef)(!0),n=(0,L.Oq)(),r=n.data,i=(n.loading,n.error);return(0,l.useEffect)((function(){t.current?t.current=!1:e(dn.S.actions.setShouldRefresh())}),[e]),(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,f.jsx)(pn,{}),(0,f.jsxs)(s.Z,{sx:{flex:1,padding:2,width:"100%",height:"100%"},children:[r&&(0,f.jsx)(vn,{data:r}),i&&(0,f.jsx)(c.Z,{variant:"body2",color:"error",children:i})]})]})})),yn=n(94582),bn=n(91408),wn=function(){var e=(0,a.I0)();return(0,f.jsxs)(R.we,{title:"Bubble Plot Settings",children:[(0,f.jsx)(F.Z,{settingKey:"bubblePlotMaxMarkerSize"}),(0,f.jsx)(F.Z,{settingKey:"bubblePlotOpacity"}),(0,f.jsx)(bn.Z,{sx:{my:1}}),(0,f.jsx)(vt,{settingKey:"bubblePlotBreakdownColumn",label:"Breakdown",onValueChange:function(){e(yn.X.actions.setShouldRefresh())},showStats:"none",allowEmpty:!0,columnSelector:ht})]})},On=function(){var e=(0,a.I0)(),t=(0,a.v9)((function(e){return e.settings.bubblePlotXColumn})),n=(0,a.v9)((function(e){return e.settings.bubblePlotYColumn})),r=function(){e(yn.X.actions.setShouldRefresh())};return(0,f.jsxs)(bt.Z,{children:[(0,f.jsx)(xn,{haveLasso:!0}),(0,f.jsx)(vt,{settingKey:"bubblePlotXColumn",label:"X column",onValueChange:r,showStats:"left",columnSelector:pt}),(0,f.jsx)(k.Pi,{icon:(0,f.jsx)(on.Z,{}),iconSize:"large",onClick:function(){e((0,ft.V)({bubblePlotXColumn:n,bubblePlotYColumn:t})),r()}}),(0,f.jsx)(vt,{settingKey:"bubblePlotYColumn",label:"Y column",onValueChange:r,showStats:"right",columnSelector:pt}),(0,f.jsx)(I.Z,{sqlKey:"bubblePlot"}),(0,f.jsx)(wn,{})]})},Zn=gn()((function(){return n.e(813).then(n.bind(n,43813))}),{loadableGenerated:{webpack:()=>[43813]},ssr:!1,loadableGenerated:{webpack:function(){return[43813]}}}),Pn=l.memo((function(){var e=(0,a.I0)(),t=(0,l.useRef)(!0),n=(0,L.fL)(),r=n.data;n.loading,n.error;return(0,l.useEffect)((function(){t.current?t.current=!1:e(yn.X.actions.setShouldRefresh())}),[e]),(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,f.jsx)(On,{}),(0,f.jsx)(s.Z,{sx:{flex:1,padding:1,width:"100%",height:"100%"},children:r&&(0,f.jsx)(Zn,{data:r})})]})})),Sn=l.memo((function(e){var t=e.overridingColDefs,n=void 0===t?{}:t,r=(0,a.v9)((function(e){return e.filteredColumnStats})),i=(0,ot.Z)(),o=((0,L.YJ)()||{}).data,c=(0,a.v9)((function(e){return e.cardinality})),u=(0,l.useMemo)((function(){var e=(0,ce.E8)(o.initialOrder),t=O().map(o.initialOrder,(function(t){var n,i,a=(null===(n=r[t])||void 0===n?void 0:n.data)||{},l=a.cnt_all,s=a.cnt_null,u=(null===(i=c[t])||void 0===i?void 0:i.data)||{},d=u.approxCntD,f=u.cntD;return{prefix_group:e[t],column_type:o.meta[t].duckdbType,column_name:t,distribution:null,null_percentage:s/l,approx_unique:(0,P.kX)(f,d)}}));return O().sortBy(t,"prefix_group")}),[r,o,c]),d=(0,l.useMemo)((function(){var e={prefix_group:{spanRows:!0},column_name:{rowDrag:!0,pinned:"left",cellStyle:{color:i.palette.text.primary}},distribution:{minWidth:200,sortable:!1,cellRenderer:function(e){return(0,f.jsx)(mt.Z,{name:e.data.column_name})}},null_percentage:{cellRenderer:(0,Bt.S6)({min:0,max:100,isPercent:!0,muiTheme:i,bgColor:"gray"})},boxplot:{minWidth:160,sortable:!1,valueFormatter:function(e){return e.value},cellRenderer:function(e){return(0,f.jsx)(Ht,{data:e.value,width:150})}}};return O().merge(e,n)}),[n,i]),m=(0,l.useMemo)((function(){return{pagination:!1,rowDragManaged:!0,animateRows:!0,enableCellSpan:!0}}),[]);if(!r||!o)return null;var x=O()(o.initialOrder).filter((function(e){return!o.meta[e].isPrimitive})).map((function(e){return[{text:e,sx:{}},{text:o.meta[e].duckdbType,sx:{color:"text.secondary",fontFamily:"monospace"}}]})).value();return(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",padding:1,height:"100%",gap:1,backgroundColor:"background.paper"},children:[x.length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ke.M$,{title:"Columns with non-primitive data types (distribution not shown)"}),(0,f.jsx)(Ke.jg,{items:x.map((function(e){return(0,f.jsx)(Ke.Qn,{segments:e},e)}))})]}),(0,f.jsx)(Ke.M$,{title:(0,f.jsx)(Ke.oy,{text:"Columns with primitive data types",addon:(0,f.jsx)(I.Z,{sqlKey:"fltSummaryStats"})})}),(0,f.jsx)(Lt.M,{initRowData:u,overridingColDefs:d,overridingGridOptions:m})]})})),Cn=n(94480),Dn=n(77142),kn=n(72655),In=n(82751),Rn=n(32227),En=n(65006),Mn=n(5490),Tn="freeFormQuery",Fn=l.memo((function(){var e,t=(0,a.I0)(),n=(0,a.v9)((function(e){return e.settings.mode})),r=(0,a.v9)((function(e){return e.dataFile.tableExpr})),i=(0,a.v9)((function(e){return e.sql[Tn]}))||{},o=(0,l.useState)((0,In.WU)("SELECT * FROM ".concat(r," LIMIT 10"))),u=o[0],d=o[1],m=function(){var e=(0,Ce.Z)(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t((0,S.d2)(u)),e.next=3,(0,Mn.Vn)({dispatch:t,key:Tn,query:u});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",gap:1,height:"100%"},children:[(0,f.jsx)(s.Z,{sx:{flex:1,overflow:"auto"},children:(0,f.jsx)(Cn.ZP,{height:"100%",style:{height:"100%"},value:u,extensions:[(0,Dn.i6)()],onChange:function(e){return d(e)},theme:"dark"===n?kn.vk:"light"})}),(0,f.jsxs)(s.Z,{sx:{height:50,px:1,flex:0,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:1},children:[(0,f.jsx)(En.Z,{status:null===i||void 0===i?void 0:i.status}),(null===i||void 0===i?void 0:i.runtime)&&(0,f.jsxs)(c.Z,{variant:"body1",children:["Runtime: ",null===i||void 0===i||null===(e=i.runtime)||void 0===e?void 0:e.toFixed(5)," seconds"]}),(0,f.jsx)(s.Z,{sx:{flex:1}}),(0,f.jsxs)(k.OO,{onClick:m,children:["Run ",(0,f.jsx)(Rn.Z,{})]})]})]})})),Nn=Fn,Gn=l.memo((function(){var e=(0,a.v9)((function(e){return e.sql[Tn]}))||{},t=e.data,n=e.loading,r=e.error;return n?(0,f.jsx)(d.Z,{}):r?(0,f.jsxs)(c.Z,{color:"error",children:["Error: ",r]}):t?(0,f.jsx)(Lt.M,{initRowData:t}):(0,f.jsx)(x,{text:"No data"})})),Ln=l.memo((function(e){return(0,i.Z)(e),(0,f.jsx)(Et,{top:(0,f.jsx)(Nn,{}),bottom:(0,f.jsx)(Gn,{})})}));Ln.displayName=Se.Z6.FreeFormSQL;var Hn=Ln,Bn=n(69015),zn=l.memo((function(e){var t;(0,i.Z)(e),Rt();var n=(0,Ct.useSearchParams)().get("filePath");(0,a.I0)();(0,l.useEffect)((function(){if(n){var e=(0,It.eP)(n);document.title=e}else document.title="TabularSliceDice"}),[n]);var o=(0,a.v9)((function(e){return e.layout.presets[Se.fF]})),s=(t={},(0,r.Z)(t,Se.G7.MainTable,(0,f.jsx)(U,{})),(0,r.Z)(t,Se.G7.ColumnNavigation,(0,f.jsx)(it,{})),(0,r.Z)(t,Se.G7.ColumnFilters,(0,f.jsx)(Tt,{})),(0,r.Z)(t,Se.G7.Gallery,(0,f.jsx)(Ot,{})),(0,r.Z)(t,Se.G7.RowDetails,(0,f.jsx)(Pt,{})),(0,r.Z)(t,Se.G7.HeatMap,(0,f.jsx)(un,{})),(0,r.Z)(t,Se.G7.Histogram,(0,f.jsx)(jn,{})),(0,r.Z)(t,Se.G7.BoxPlot,(0,f.jsx)(Vt,{})),(0,r.Z)(t,Se.G7.BubblePlot,(0,f.jsx)(Pn,{})),(0,r.Z)(t,Se.G7.DistributionSummary,(0,f.jsx)(Sn,{})),(0,r.Z)(t,Se.G7.FreeFormSQL,(0,f.jsx)(Hn,{})),(0,r.Z)(t,Se.G7.BrowseFolder,(0,f.jsx)(Bn.default,{})),t);return(0,f.jsx)(j,{modelJson:o,tabComponents:s})}));zn.displayName=Se.Z6.TabularSliceDice;var Kn=zn},44832:function(e,t,n){"use strict";function r(e){var t=e.nameList,n=void 0===t?[]:t,r=e.component,i=void 0===r?"":r,o=e.weight,a=void 0===o?50:o;return{type:"tabset",weight:a,id:"tabset-".concat(n.join("-")),children:n.map((function(e){return function(e){var t=e.name,n=e.component,r=e.weight;return{type:"tab",name:t,weight:void 0===r?50:r,id:"tab-".concat(t),component:n||t}}({name:e,component:i,weight:a})}))}}n.d(t,{SP:function(){return r},Yr:function(){return i}});var i={tabEnableFloat:!1,tabEnableRename:!1,tabSetHeaderHeight:16,splitterSize:4,keepComponentState:!0,tabEnableClose:!0,enableRenderOnDemand:!1}},15055:function(e,t,n){"use strict";n.d(t,{n:function(){return i}});var r=(0,n(98656).oM)({name:"dataFile",initialState:{filePath:null,fileFormat:null,tableExpr:null},reducers:{setDataFile:function(e,t){var n=t.payload,r=n.filePath,i=n.fileFormat;e.filePath=r,e.fileFormat=i,e.tableExpr="read_".concat(i,"('").concat(r,"')")}}}),i=r.actions.setDataFile;t.Z=r.reducer},8483:function(e,t,n){"use strict";n.d(t,{p8:function(){return d},wV:function(){return f}});var r,i=n(71921),o=n(98656),a=n(44832),l=n(58243),s=(r={},(0,i.Z)(r,l.fF,{layout:{type:"row",children:[(0,a.SP)({nameList:[l.G7.ColumnNavigation],weight:15}),{type:"row",weight:60,children:[(0,a.SP)({nameList:[l.G7.MainTable,l.G7.BubblePlot,l.G7.HeatMap,l.G7.Histogram,l.G7.BoxPlot],weight:50}),(0,a.SP)({nameList:[l.G7.Gallery,l.G7.DistributionSummary,l.G7.FreeFormSQL,l.G7.BrowseFolder],weight:30})]},(0,a.SP)({nameList:[l.G7.RowDetails,l.G7.ColumnFilters],weight:25})]}}),(0,i.Z)(r,l.HK,{layout:{type:"row",children:[(0,a.SP)({nameList:[l.G7.ColumnNavigation,l.G7.RowDetails,l.G7.ColumnFilters],weight:15}),{type:"row",weight:60,children:[(0,a.SP)({nameList:[l.G7.MainTable,l.G7.Histogram,l.G7.BubblePlot,l.G7.BoxPlot,l.G7.HeatMap],weight:50}),(0,a.SP)({nameList:[l.G7.Gallery,l.G7.DistributionSummary,l.G7.FreeFormSQL,l.G7.BrowseFolder],weight:50})]}]}}),(0,i.Z)(r,l.vb,{layout:{type:"row",children:[(0,a.SP)({nameList:[l.G7.Gallery,l.G7.RowDetails,l.G7.ColumnFilters],weight:50}),(0,a.SP)({nameList:[l.G7.Histogram,l.G7.BubblePlot,l.G7.BoxPlot,l.G7.HeatMap],weight:50})]}}),r),c=(0,o.oM)({name:"layout",initialState:{current:null,presets:s,target:null},reducers:{saveCurrentLayout:function(e,t){e.current=t.payload},setTargetLayout:function(e,t){e.target=t.payload}}}),u=c.actions,d=u.saveCurrentLayout,f=u.setTargetLayout;t.ZP=c.reducer},61906:function(e,t,n){"use strict";n.d(t,{h:function(){return y}});var r=n(98656),i=n(92633),o=n(37736),a=n(20619),l=n(75492),s=n(33311),c=n(58055),u=n(15055),d=n(4456),f=n(98358),m=n(41208),x=n(45325),p=n(94582),h=n(8483),g=n(83611),v=n(56800),j={viewing:c.ZP,settings:i.Z,folderBrowser:f.ZP,dataFile:u.Z,sql:s.Z,columnMeta:o.ae.reducer,agColDefs:a.Kb.reducer,columnPreference:l.HW.reducer,rowData:o.It.reducer,baselineColumnStats:o.wL.reducer,filteredColumnStats:o.Kf.reducer,cardinality:o.kY.reducer,boxPlot:d.Z.reducer,heatMap:m.Mx.reducer,histogram:x.S.reducer,bubblePlot:p.X.reducer,layout:h.ZP,initSettings:o.uG.reducer,derivedColumns:g.ZP,toast:v.ZP},y=(0,r.xC)({reducer:j,middleware:function(e){return e({serializableCheck:!1})}})}},function(e){e.O(0,[150,70,4,855,800,190,380,117,980,897,87,600,744],(function(){return t=38238,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=page-9aab81dc8d6dafc0.js.map