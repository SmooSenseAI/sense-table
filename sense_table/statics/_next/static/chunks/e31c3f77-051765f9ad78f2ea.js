"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{41532:function(t,e,i){i.d(e,{Ar:function(){return Ot},Hn:function(){return j}});var s=i(63401),n=i(56801),o=i(50682),r=i(26198),a=Object.defineProperty,d=(t,e,i)=>((t,e,i)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!==typeof e?e+"":e,i);const l=class t{constructor(t){d(this,"_name"),this._name=t}static flip(e){return e===t.HORZ?t.VERT:t.HORZ}getName(){return this._name}toString(){return this._name}};d(l,"HORZ",new l("horz")),d(l,"VERT",new l("vert"));let h=l;class c{constructor(t,e,i,s){d(this,"x"),d(this,"y"),d(this,"width"),d(this,"height"),this.x=t,this.y=e,this.width=i,this.height=s}static empty(){return new c(0,0,0,0)}static fromJson(t){return new c(t.x,t.y,t.width,t.height)}toJson(){return{x:this.x,y:this.y,width:this.width,height:this.height}}snap(t){this.x=Math.round(this.x/t)*t,this.y=Math.round(this.y/t)*t,this.width=Math.round(this.width/t)*t,this.height=Math.round(this.height/t)*t}static getBoundingClientRect(t){const{x:e,y:i,width:s,height:n}=t.getBoundingClientRect();return new c(e,i,s,n)}static getContentRect(t){const e=t.getBoundingClientRect(),i=window.getComputedStyle(t),s=parseFloat(i.paddingLeft),n=parseFloat(i.paddingRight),o=parseFloat(i.paddingTop),r=parseFloat(i.paddingBottom),a=parseFloat(i.borderLeftWidth),d=parseFloat(i.borderRightWidth),l=parseFloat(i.borderTopWidth),h=parseFloat(i.borderBottomWidth),u=e.width-a-s-n-d,g=e.height-l-o-r-h;return new c(e.left+a+s,e.top+l+o,u,g)}static fromDomRect(t){return new c(t.x,t.y,t.width,t.height)}relativeTo(t){return new c(this.x-t.x,this.y-t.y,this.width,this.height)}clone(){return new c(this.x,this.y,this.width,this.height)}equals(t){return this.x===(null==t?void 0:t.x)&&this.y===(null==t?void 0:t.y)&&this.width===(null==t?void 0:t.width)&&this.height===(null==t?void 0:t.height)}equalSize(t){return this.width===(null==t?void 0:t.width)&&this.height===(null==t?void 0:t.height)}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}get bottom(){return this.y+this.height}get right(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(t,e){this.styleWithPosition(t.style,e)}styleWithPosition(t,e="absolute"){return t.left=this.x+"px",t.top=this.y+"px",t.width=Math.max(0,this.width)+"px",t.height=Math.max(0,this.height)+"px",t.position=e,t}contains(t,e){return this.x<=t&&t<=this.getRight()&&this.y<=e&&e<=this.getBottom()}removeInsets(t){return new c(this.x+t.left,this.y+t.top,Math.max(0,this.width-t.left-t.right),Math.max(0,this.height-t.top-t.bottom))}centerInRect(t){this.x=(t.width-this.width)/2,this.y=(t.height-this.height)/2}_getSize(t){let e=this.width;return t===h.VERT&&(e=this.height),e}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}const u=class t{constructor(e,i,s){d(this,"name"),d(this,"orientation"),d(this,"indexPlus"),this.name=e,this.orientation=i,this.indexPlus=s,t.values.set(this.name,this)}static getByName(e){return t.values.get(e)}static getLocation(e,i,s){if(i=(i-e.x)/e.width,s=(s-e.y)/e.height,i>=.25&&i<.75&&s>=.25&&s<.75)return t.CENTER;const n=s>=1-i;return s>=i?n?t.BOTTOM:t.LEFT:n?t.RIGHT:t.TOP}getName(){return this.name}getOrientation(){return this.orientation}getDockRect(e){return this===t.TOP?new c(e.x,e.y,e.width,e.height/2):this===t.BOTTOM?new c(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===t.LEFT?new c(e.x,e.y,e.width/2,e.height):this===t.RIGHT?new c(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,i){if(this===t.TOP){return{start:new c(e.x,e.y,e.width,i),end:new c(e.x,e.y+i,e.width,e.height-i)}}if(this===t.LEFT){return{start:new c(e.x,e.y,i,e.height),end:new c(e.x+i,e.y,e.width-i,e.height)}}if(this===t.RIGHT){return{start:new c(e.getRight()-i,e.y,i,e.height),end:new c(e.x,e.y,e.width-i,e.height)}}return{start:new c(e.x,e.getBottom()-i,e.width,i),end:new c(e.x,e.y,e.width,e.height-i)}}reflect(){return this===t.TOP?t.BOTTOM:this===t.LEFT?t.RIGHT:this===t.RIGHT?t.LEFT:t.TOP}toString(){return"(DockLocation: name="+this.name+", orientation="+this.orientation+")"}};d(u,"values",new Map),d(u,"TOP",new u("top",h.VERT,0)),d(u,"BOTTOM",new u("bottom",h.VERT,1)),d(u,"LEFT",new u("left",h.HORZ,0)),d(u,"RIGHT",new u("right",h.HORZ,1)),d(u,"CENTER",new u("center",h.VERT,0));let g=u;var T=(t=>(t.Close_Tab="Close",t.Close_Tabset="Close tab set",t.Active_Tabset="Active tab set",t.Move_Tabset="Move tab set",t.Move_Tabs="Move tabs(?)",t.Maximize="Maximize tab set",t.Restore="Restore tab set",t.Popout_Tab="Popout selected tab",t.Overflow_Menu_Tooltip="Hidden tabs",t.Error_rendering_component="Error rendering component",t.Error_rendering_component_retry="Retry",t))(T||{}),_=(t=>(t.FLEXLAYOUT__BORDER="flexlayout__border",t.FLEXLAYOUT__BORDER_="flexlayout__border_",t.FLEXLAYOUT__BORDER_TAB_CONTENTS="flexlayout__border_tab_contents",t.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",t.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",t.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",t.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",t.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",t.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",t.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",t.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",t.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",t.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",t.FLEXLAYOUT__BORDER_LEADING="flexlayout__border_leading",t.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",t.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",t.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",t.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",t.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",t.FLEXLAYOUT__EDGE_RECT_TOP="flexlayout__edge_rect_top",t.FLEXLAYOUT__EDGE_RECT_LEFT="flexlayout__edge_rect_left",t.FLEXLAYOUT__EDGE_RECT_BOTTOM="flexlayout__edge_rect_bottom",t.FLEXLAYOUT__EDGE_RECT_RIGHT="flexlayout__edge_rect_right",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",t.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",t.FLEXLAYOUT__LAYOUT="flexlayout__layout",t.FLEXLAYOUT__LAYOUT_MOVEABLES="flexlayout__layout_moveables",t.FLEXLAYOUT__LAYOUT_OVERLAY="flexlayout__layout_overlay",t.FLEXLAYOUT__LAYOUT_TAB_STAMPS="flexlayout__layout_tab_stamps",t.FLEXLAYOUT__LAYOUT_MAIN="flexlayout__layout_main",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER="flexlayout__layout_border_container",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER="flexlayout__layout_border_container_inner",t.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",t.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",t.FLEXLAYOUT__SPLITTER="flexlayout__splitter",t.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",t.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",t.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",t.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",t.FLEXLAYOUT__SPLITTER_HANDLE="flexlayout__splitter_handle",t.FLEXLAYOUT__SPLITTER_HANDLE_HORZ="flexlayout__splitter_handle_horz",t.FLEXLAYOUT__SPLITTER_HANDLE_VERT="flexlayout__splitter_handle_vert",t.FLEXLAYOUT__ROW="flexlayout__row",t.FLEXLAYOUT__TAB="flexlayout__tab",t.FLEXLAYOUT__TAB_POSITION="flexlayout__tab_position",t.FLEXLAYOUT__TAB_MOVEABLE="flexlayout__tab_moveable",t.FLEXLAYOUT__TAB_OVERLAY="flexlayout__tab_overlay",t.FLEXLAYOUT__TABSET="flexlayout__tabset",t.FLEXLAYOUT__TABSET_CONTAINER="flexlayout__tabset_container",t.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",t.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",t.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",t.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",t.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",t.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",t.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",t.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",t.FLEXLAYOUT__TABSET_LEADING="flexlayout__tabset_leading",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",t.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",t.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",t.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",t.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",t.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",t.FLEXLAYOUT__TAB_BUTTON_STRETCH="flexlayout__tab_button_stretch",t.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",t.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",t.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",t.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",t.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",t.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",t.FLEXLAYOUT__TAB_TOOLBAR_ICON="flexlayout__tab_toolbar_icon",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",t.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",t.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",t.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",t.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED="flexlayout__popup_menu_item--selected",t.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",t.FLEXLAYOUT__MINI_SCROLLBAR="flexlayout__mini_scrollbar",t.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER="flexlayout__mini_scrollbar_container",t))(_||{});class p{constructor(t,e){d(this,"type"),d(this,"data"),this.type=t,this.data=e}}const b=class t{static addNode(e,i,s,n,o){return new p(t.ADD_NODE,{json:e,toNode:i,location:s.getName(),index:n,select:o})}static moveNode(e,i,s,n,o){return new p(t.MOVE_NODE,{fromNode:e,toNode:i,location:s.getName(),index:n,select:o})}static deleteTab(e){return new p(t.DELETE_TAB,{node:e})}static deleteTabset(e){return new p(t.DELETE_TABSET,{node:e})}static renameTab(e,i){return new p(t.RENAME_TAB,{node:e,text:i})}static selectTab(e){return new p(t.SELECT_TAB,{tabNode:e})}static setActiveTabset(e,i){return new p(t.SET_ACTIVE_TABSET,{tabsetNode:e,windowId:i})}static adjustWeights(e,i){return new p(t.ADJUST_WEIGHTS,{nodeId:e,weights:i})}static adjustBorderSplit(e,i){return new p(t.ADJUST_BORDER_SPLIT,{node:e,pos:i})}static maximizeToggle(e,i){return new p(t.MAXIMIZE_TOGGLE,{node:e,windowId:i})}static updateModelAttributes(e){return new p(t.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,i){return new p(t.UPDATE_NODE_ATTRIBUTES,{node:e,json:i})}static popoutTab(e){return new p(t.POPOUT_TAB,{node:e})}static popoutTabset(e){return new p(t.POPOUT_TABSET,{node:e})}static closeWindow(e){return new p(t.CLOSE_WINDOW,{windowId:e})}static createWindow(e,i){return new p(t.CREATE_WINDOW,{layout:e,rect:i})}};d(b,"ADD_NODE","FlexLayout_AddNode"),d(b,"MOVE_NODE","FlexLayout_MoveNode"),d(b,"DELETE_TAB","FlexLayout_DeleteTab"),d(b,"DELETE_TABSET","FlexLayout_DeleteTabset"),d(b,"RENAME_TAB","FlexLayout_RenameTab"),d(b,"SELECT_TAB","FlexLayout_SelectTab"),d(b,"SET_ACTIVE_TABSET","FlexLayout_SetActiveTabset"),d(b,"ADJUST_WEIGHTS","FlexLayout_AdjustWeights"),d(b,"ADJUST_BORDER_SPLIT","FlexLayout_AdjustBorderSplit"),d(b,"MAXIMIZE_TOGGLE","FlexLayout_MaximizeToggle"),d(b,"UPDATE_MODEL_ATTRIBUTES","FlexLayout_UpdateModelAttributes"),d(b,"UPDATE_NODE_ATTRIBUTES","FlexLayout_UpdateNodeAttributes"),d(b,"POPOUT_TAB","FlexLayout_PopoutTab"),d(b,"POPOUT_TABSET","FlexLayout_PopoutTabset"),d(b,"CLOSE_WINDOW","FlexLayout_CloseWindow"),d(b,"CREATE_WINDOW","FlexLayout_CreateWindow");let E=b;class f{constructor(t,e,i,s){d(this,"name"),d(this,"alias"),d(this,"modelName"),d(this,"pairedAttr"),d(this,"pairedType"),d(this,"defaultValue"),d(this,"alwaysWriteJson"),d(this,"type"),d(this,"required"),d(this,"fixed"),d(this,"description"),this.name=t,this.alias=void 0,this.modelName=e,this.defaultValue=i,this.alwaysWriteJson=s,this.required=!1,this.fixed=!1,this.type="any"}setType(t){return this.type=t,this}setAlias(t){return this.alias=t,this}setDescription(t){this.description=t}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}setpairedAttr(t){this.pairedAttr=t}setPairedType(t){this.pairedType=t}}d(f,"NUMBER","number"),d(f,"STRING","string"),d(f,"BOOLEAN","boolean");class m{constructor(){d(this,"attributes"),d(this,"nameToAttribute"),this.attributes=[],this.nameToAttribute=new Map}addWithAll(t,e,i,s){const n=new f(t,e,i,s);return this.attributes.push(n),this.nameToAttribute.set(t,n),n}addInherited(t,e){return this.addWithAll(t,e,void 0,!1)}add(t,e,i){return this.addWithAll(t,void 0,e,i)}getAttributes(){return this.attributes}getModelName(t){const e=this.nameToAttribute.get(t);if(void 0!==e)return e.modelName}toJson(t,e){for(const i of this.attributes){const s=e[i.name];(i.alwaysWriteJson||s!==i.defaultValue)&&(t[i.name]=s)}}fromJson(t,e){for(const i of this.attributes){let s=t[i.name];void 0===s&&i.alias&&(s=t[i.alias]),e[i.name]=void 0===s?i.defaultValue:s}}update(t,e){for(const i of this.attributes)if(Object.prototype.hasOwnProperty.call(t,i.name)){const s=t[i.name];void 0===s?delete e[i.name]:e[i.name]=s}}setDefaults(t){for(const e of this.attributes)t[e.name]=e.defaultValue}pairAttributes(t,e){for(const i of e.attributes)if(i.modelName&&this.nameToAttribute.has(i.modelName)){const e=this.nameToAttribute.get(i.modelName);e.setpairedAttr(i),i.setpairedAttr(e),e.setPairedType(t)}}toTypescriptInterface(t,e){var i,s;const n=[],o=this.attributes.sort(((t,e)=>t.name.localeCompare(e.name)));n.push("export interface I"+t+"Attributes {");for(let r=0;r<o.length;r++){const t=o[r];let a,d,l=t.type,h=t;void 0!==h.defaultValue?a=h.defaultValue:void 0!==h.modelName&&void 0!==e&&void 0!==e.nameToAttribute.get(h.modelName)&&(d=h.modelName,h=e.nameToAttribute.get(d),a=h.defaultValue,l=h.type);const c=JSON.stringify(a),u=h.required?"":"?";let g="\t/**\n\t  ";t.description?g+=t.description:t.pairedType&&(null==(i=t.pairedAttr)?void 0:i.description)&&(g+=`Value for ${t.pairedType} attribute ${t.pairedAttr.name} if not overridden`,g+="\n\n\t  ",g+=null==(s=t.pairedAttr)?void 0:s.description),g+="\n\n\t  ",t.fixed?g+=`Fixed value: ${c}`:g+=d?`Default: inherited from Global attribute ${t.modelName} (default ${c})`:`Default: ${c}`,g+="\n\t */",n.push(g),n.push("\t"+t.name+u+": "+l+";\n")}return n.push("}"),n.join("\n")}}class O{constructor(t,e,i,s,n){d(this,"node"),d(this,"rect"),d(this,"location"),d(this,"index"),d(this,"className"),this.node=t,this.rect=e,this.location=i,this.index=s,this.className=n}}class w{constructor(t){d(this,"borders"),d(this,"borderMap"),d(this,"layoutHorizontal"),this.borders=[],this.borderMap=new Map,this.layoutHorizontal=!0}static fromJson(t,e){const i=new w(e);i.borders=t.map((t=>G.fromJson(t,e)));for(const s of i.borders)i.borderMap.set(s.getLocation(),s);return i}toJson(){return this.borders.map((t=>t.toJson()))}getLayoutHorizontal(){return this.layoutHorizontal}getBorders(){return this.borders}getBorderMap(){return this.borderMap}forEachNode(t){for(const e of this.borders){t(e,0);for(const i of e.getChildren())i.forEachNode(t,1)}}setPaths(){for(const t of this.borders){const e="/border/"+t.getLocation().getName();t.setPath(e);let i=0;for(const s of t.getChildren())s.setPath(e+"/t"+i),i++}}findDropTargetNode(t,e,i){for(const s of this.borders)if(s.isShowing()){const n=s.canDrop(t,e,i);if(void 0!==n)return n}}}class R{constructor(t){d(this,"model"),d(this,"attributes"),d(this,"parent"),d(this,"children"),d(this,"rect"),d(this,"path"),d(this,"listeners"),this.model=t,this.attributes={},this.children=[],this.rect=c.empty(),this.listeners=new Map,this.path=""}getId(){let t=this.attributes.id;return void 0!==t||(t=this.model.nextUniqueId(),this.setId(t)),t}getModel(){return this.model}getType(){return this.attributes.type}getParent(){return this.parent}getChildren(){return this.children}getRect(){return this.rect}getPath(){return this.path}getOrientation(){return void 0===this.parent?this.model.isRootOrientationVertical()?h.VERT:h.HORZ:h.flip(this.parent.getOrientation())}setEventListener(t,e){this.listeners.set(t,e)}removeEventListener(t){this.listeners.delete(t)}setId(t){this.attributes.id=t}fireEvent(t,e){this.listeners.has(t)&&this.listeners.get(t)(e)}getAttr(t){let e=this.attributes[t];if(void 0===e){const i=this.getAttributeDefinitions().getModelName(t);void 0!==i&&(e=this.model.getAttribute(i))}return e}forEachNode(t,e){t(this,e),e++;for(const i of this.children)i.forEachNode(t,e)}setPaths(t){let e=0;for(const i of this.children){let s=t;"row"===i.getType()?s+="/r"+e:"tabset"===i.getType()?s+="/ts"+e:"tab"===i.getType()&&(s+="/t"+e),i.path=s,i.setPaths(s),e++}}setParent(t){this.parent=t}setRect(t){this.rect=t}setPath(t){this.path=t}setWeight(t){this.attributes.weight=t}setSelected(t){this.attributes.selected=t}findDropTargetNode(t,e,i,s){let n;if(this.rect.contains(i,s))if(void 0!==this.model.getMaximizedTabset(t))n=this.model.getMaximizedTabset(t).canDrop(e,i,s);else if(n=this.canDrop(e,i,s),void 0===n&&0!==this.children.length)for(const o of this.children)if(n=o.findDropTargetNode(t,e,i,s),void 0!==n)break;return n}canDrop(t,e,i){}canDockInto(t,e){if(null!=e){if(e.location===g.CENTER&&!1===e.node.isEnableDrop())return!1;if(e.location===g.CENTER&&"tabset"===t.getType()&&void 0!==t.getName())return!1;if(e.location!==g.CENTER&&!1===e.node.isEnableDivide())return!1;if(this.model.getOnAllowDrop())return this.model.getOnAllowDrop()(t,e)}return!0}removeChild(t){const e=this.children.indexOf(t);return-1!==e&&this.children.splice(e,1),e}addChild(t,e){return null!=e?this.children.splice(e,0,t):(this.children.push(t),e=this.children.length-1),t.parent=this,e}removeAll(){this.children=[]}styleWithPosition(t){return null==t&&(t={}),this.rect.styleWithPosition(t)}isEnableDivide(){return!0}toAttributeString(){return JSON.stringify(this.attributes,void 0,"\t")}}const A=class t extends R{constructor(e,i,s=!0){super(e),d(this,"tabRect",c.empty()),d(this,"moveableElement"),d(this,"tabStamp"),d(this,"renderedName"),d(this,"extra"),d(this,"visible"),d(this,"rendered"),d(this,"scrollTop"),d(this,"scrollLeft"),this.extra={},this.moveableElement=null,this.tabStamp=null,this.rendered=!1,this.visible=!1,t.attributeDefinitions.fromJson(i,this.attributes),!0===s&&e.addNode(this)}static fromJson(e,i,s=!0){return new t(i,e,s)}getName(){return this.getAttr("name")}getHelpText(){return this.getAttr("helpText")}getComponent(){return this.getAttr("component")}getWindowId(){return this.parent instanceof W?this.parent.getWindowId():j.MAIN_WINDOW_ID}getWindow(){const t=this.model.getwindowsMap().get(this.getWindowId());if(t)return t.window}getConfig(){return this.attributes.config}getExtraData(){return this.extra}isPoppedOut(){return this.getWindowId()!==j.MAIN_WINDOW_ID}isSelected(){return this.getParent().getSelectedNode()===this}getIcon(){return this.getAttr("icon")}isEnableClose(){return this.getAttr("enableClose")}getCloseType(){return this.getAttr("closeType")}isEnablePopout(){return this.getAttr("enablePopout")}isEnablePopoutIcon(){return this.getAttr("enablePopoutIcon")}isEnablePopoutOverlay(){return this.getAttr("enablePopoutOverlay")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableRename(){return this.getAttr("enableRename")}isEnableWindowReMount(){return this.getAttr("enableWindowReMount")}getClassName(){return this.getAttr("className")}getContentClassName(){return this.getAttr("contentClassName")}getTabSetClassName(){return this.getAttr("tabsetClassName")}isEnableRenderOnDemand(){return this.getAttr("enableRenderOnDemand")}getMinWidth(){return this.getAttr("minWidth")}getMinHeight(){return this.getAttr("minHeight")}getMaxWidth(){return this.getAttr("maxWidth")}getMaxHeight(){return this.getAttr("maxHeight")}isVisible(){return this.visible}toJson(){const e={};return t.attributeDefinitions.toJson(e,this.attributes),e}saveScrollPosition(){this.moveableElement&&(this.scrollLeft=this.moveableElement.scrollLeft,this.scrollTop=this.moveableElement.scrollTop)}restoreScrollPosition(){this.scrollTop&&requestAnimationFrame((()=>{this.moveableElement&&this.scrollTop&&(this.moveableElement.scrollTop=this.scrollTop,this.moveableElement.scrollLeft=this.scrollLeft)}))}setRect(t){t.equals(this.rect)||(this.fireEvent("resize",{rect:t}),this.rect=t)}setVisible(t){t!==this.visible&&(this.visible=t,this.fireEvent("visibility",{visible:t}))}getScrollTop(){return this.scrollTop}setScrollTop(t){this.scrollTop=t}getScrollLeft(){return this.scrollLeft}setScrollLeft(t){this.scrollLeft=t}isRendered(){return this.rendered}setRendered(t){this.rendered=t}getTabRect(){return this.tabRect}setTabRect(t){this.tabRect=t}getTabStamp(){return this.tabStamp}setTabStamp(t){this.tabStamp=t}getMoveableElement(){return this.moveableElement}setMoveableElement(t){this.moveableElement=t}setRenderedName(t){this.renderedName=t}getNameForOverflowMenu(){const t=this.getAttr("altName");return void 0!==t?t:this.renderedName}setName(t){this.attributes.name=t}delete(){this.parent.remove(this),this.fireEvent("close",{})}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return t.attributeDefinitions}setBorderWidth(t){this.attributes.borderWidth=t}setBorderHeight(t){this.attributes.borderHeight=t}static getAttributeDefinitions(){return t.attributeDefinitions}static createAttributeDefinitions(){const e=new m;return e.add("type",t.TYPE,!0).setType(f.STRING).setFixed(),e.add("id",void 0).setType(f.STRING).setDescription("the unique id of the tab, if left undefined a uuid will be assigned"),e.add("name","[Unnamed Tab]").setType(f.STRING).setDescription("name of tab to be displayed in the tab button"),e.add("altName",void 0).setType(f.STRING).setDescription("if there is no name specifed then this value will be used in the overflow menu"),e.add("helpText",void 0).setType(f.STRING).setDescription("An optional help text for the tab to be displayed upon tab hover."),e.add("component",void 0).setType(f.STRING).setDescription("string identifying which component to run (for factory)"),e.add("config",void 0).setType("any").setDescription("a place to hold json config for the hosted component"),e.add("tabsetClassName",void 0).setType(f.STRING).setDescription("class applied to parent tabset when this is the only tab and it is stretched to fill the tabset"),e.add("enableWindowReMount",!1).setType(f.BOOLEAN).setDescription("if enabled the tab will re-mount when popped out/in"),e.addInherited("enableClose","tabEnableClose").setType(f.BOOLEAN).setDescription("allow user to close tab via close button"),e.addInherited("closeType","tabCloseType").setType("ICloseType").setDescription("see values in ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(f.BOOLEAN).setDescription("allow user to drag tab to new location"),e.addInherited("enableRename","tabEnableRename").setType(f.BOOLEAN).setDescription("allow user to rename tabs by double clicking"),e.addInherited("className","tabClassName").setType(f.STRING).setDescription("class applied to tab button"),e.addInherited("contentClassName","tabContentClassName").setType(f.STRING).setDescription("class applied to tab content"),e.addInherited("icon","tabIcon").setType(f.STRING).setDescription("the tab icon"),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(f.BOOLEAN).setDescription("whether to avoid rendering component until tab is visible"),e.addInherited("enablePopout","tabEnablePopout").setType(f.BOOLEAN).setAlias("enableFloat").setDescription("enable popout (in popout capable browser)"),e.addInherited("enablePopoutIcon","tabEnablePopoutIcon").setType(f.BOOLEAN).setDescription("whether to show the popout icon in the tabset header if this tab enables popouts"),e.addInherited("enablePopoutOverlay","tabEnablePopoutOverlay").setType(f.BOOLEAN).setDescription("if this tab will not work correctly in a popout window when the main window is backgrounded (inactive)\n            then enabling this option will gray out this tab"),e.addInherited("borderWidth","tabBorderWidth").setType(f.NUMBER).setDescription("width when added to border, -1 will use border size"),e.addInherited("borderHeight","tabBorderHeight").setType(f.NUMBER).setDescription("height when added to border, -1 will use border size"),e.addInherited("minWidth","tabMinWidth").setType(f.NUMBER).setDescription("the min width of this tab"),e.addInherited("minHeight","tabMinHeight").setType(f.NUMBER).setDescription("the min height of this tab"),e.addInherited("maxWidth","tabMaxWidth").setType(f.NUMBER).setDescription("the max width of this tab"),e.addInherited("maxHeight","tabMaxHeight").setType(f.NUMBER).setDescription("the max height of this tab"),e}};d(A,"TYPE","tab"),d(A,"attributeDefinitions",A.createAttributeDefinitions());let L=A;function N(){return"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches}function v(t,e,i){let n;const o=e.getName(),r=e.getName();void 0===i&&(i=0),void 0===n&&void 0!==e.getIcon()&&(n=0!==i?(0,s.jsx)("img",{style:{width:"1em",height:"1em",transform:"rotate("+i+"deg)"},src:e.getIcon(),alt:"leadingContent"}):(0,s.jsx)("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));const a={leading:n,content:o,name:r,buttons:[]};return t.customizeTab(e,a),e.setRenderedName(a.name),a}function y(t){let e=!1;return t.nativeEvent instanceof MouseEvent&&(0!==t.nativeEvent.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)&&(e=!0),e}function x(t,e){const i=[...D("iframe",e),...D("webview",e)];for(const s of i)s.style.pointerEvents=t?"auto":"none"}function D(t,e){return[...e.getElementsByTagName(t)]}function S(t,e,i,s,n){e.preventDefault();const o=t=>{t.preventDefault(),i(t.clientX,t.clientY)},r=t=>{t.preventDefault(),n()},a=()=>{t.removeEventListener("pointermove",o),t.removeEventListener("pointerup",a),t.removeEventListener("pointercancel",r),s()};t.addEventListener("pointermove",o),t.addEventListener("pointerup",a),t.addEventListener("pointercancel",r)}function I(t){if(t instanceof L)return t.isEnablePopout();if(t instanceof W){for(const e of t.getChildren())if(!1===e.isEnablePopout())return!1;return!0}return!1}function M(t,e){const i=t.getAttribute("style");return i!==e.getAttribute("style")&&(i?e.setAttribute("style",i):e.removeAttribute("style"),!0)}function B(t,e){if(void 0!==t&&(t instanceof W||t instanceof G)){const i=t.getSelected();-1!==i&&(e===i&&t.getChildren().length>0?e>=t.getChildren().length&&t.setSelected(t.getChildren().length-1):e<i?t.setSelected(i-1):e>i||t.setSelected(-1))}}function C(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}const U=class t extends R{constructor(e,i){super(e),d(this,"tabStripRect",c.empty()),d(this,"contentRect",c.empty()),d(this,"calculatedMinHeight"),d(this,"calculatedMinWidth"),d(this,"calculatedMaxHeight"),d(this,"calculatedMaxWidth"),this.calculatedMinHeight=0,this.calculatedMinWidth=0,this.calculatedMaxHeight=0,this.calculatedMaxWidth=0,t.attributeDefinitions.fromJson(i,this.attributes),e.addNode(this)}static fromJson(e,i,s){const n=new t(i,e);if(null!=e.children)for(const t of e.children){const e=L.fromJson(t,i);n.addChild(e)}return 0===n.children.length&&n.setSelected(-1),e.maximized&&!0===e.maximized&&(s.maximizedTabSet=n),e.active&&!0===e.active&&(s.activeTabSet=n),n}getName(){return this.getAttr("name")}isEnableActiveIcon(){return this.getAttr("enableActiveIcon")}getSelected(){const t=this.attributes.selected;return void 0!==t?t:-1}getSelectedNode(){const t=this.getSelected();if(-1!==t)return this.children[t]}getWeight(){return this.getAttr("weight")}getAttrMinWidth(){return this.getAttr("minWidth")}getAttrMinHeight(){return this.getAttr("minHeight")}getMinWidth(){return this.calculatedMinWidth}getMinHeight(){return this.calculatedMinHeight}getMinSize(t){return t===h.HORZ?this.getMinWidth():this.getMinHeight()}getAttrMaxWidth(){return this.getAttr("maxWidth")}getAttrMaxHeight(){return this.getAttr("maxHeight")}getMaxWidth(){return this.calculatedMaxWidth}getMaxHeight(){return this.calculatedMaxHeight}getMaxSize(t){return t===h.HORZ?this.getMaxWidth():this.getMaxHeight()}getConfig(){return this.attributes.config}isMaximized(){return this.model.getMaximizedTabset(this.getWindowId())===this}isActive(){return this.model.getActiveTabset(this.getWindowId())===this}isEnableDeleteWhenEmpty(){return this.getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this.getAttr("enableDrop")}isEnableTabWrap(){return this.getAttr("enableTabWrap")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableDivide(){return this.getAttr("enableDivide")}isEnableMaximize(){return this.getAttr("enableMaximize")}isEnableClose(){return this.getAttr("enableClose")}isEnableSingleTabStretch(){return this.getAttr("enableSingleTabStretch")}isEnableTabStrip(){return this.getAttr("enableTabStrip")}isAutoSelectTab(){return this.getAttr("autoSelectTab")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}getClassNameTabStrip(){return this.getAttr("classNameTabStrip")}getTabLocation(){return this.getAttr("tabLocation")}toJson(){const e={};return t.attributeDefinitions.toJson(e,this.attributes),e.children=this.children.map((t=>t.toJson())),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}calcMinMaxSize(){this.calculatedMinHeight=this.getAttrMinHeight(),this.calculatedMinWidth=this.getAttrMinWidth(),this.calculatedMaxHeight=this.getAttrMaxHeight(),this.calculatedMaxWidth=this.getAttrMaxWidth();for(const t of this.children){const e=t;this.calculatedMinWidth=Math.max(this.calculatedMinWidth,e.getMinWidth()),this.calculatedMinHeight=Math.max(this.calculatedMinHeight,e.getMinHeight()),this.calculatedMaxWidth=Math.min(this.calculatedMaxWidth,e.getMaxWidth()),this.calculatedMaxHeight=Math.min(this.calculatedMaxHeight,e.getMaxHeight())}this.calculatedMinHeight+=this.tabStripRect.height,this.calculatedMaxHeight+=this.tabStripRect.height}canMaximize(){return!!this.isEnableMaximize()&&(this.getModel().getMaximizedTabset(this.getWindowId())===this||(this.getParent()!==this.getModel().getRoot(this.getWindowId())||1!==this.getModel().getRoot(this.getWindowId()).getChildren().length))}setContentRect(t){this.contentRect=t}getContentRect(){return this.contentRect}setTabStripRect(t){this.tabStripRect=t}setWeight(t){this.attributes.weight=t}setSelected(t){this.attributes.selected=t}getWindowId(){return this.parent.getWindowId()}canDrop(t,e,i){let s;if(t===this){const t=g.CENTER,e=this.tabStripRect;s=new O(this,e,t,-1,_.FLEXLAYOUT__OUTLINE_RECT)}else{if(this.getWindowId()!==j.MAIN_WINDOW_ID&&!I(t))return;if(this.contentRect.contains(e,i)){let t=g.CENTER;void 0===this.model.getMaximizedTabset(this.parent.getWindowId())&&(t=g.getLocation(this.contentRect,e,i));const n=t.getDockRect(this.rect);s=new O(this,n,t,-1,_.FLEXLAYOUT__OUTLINE_RECT)}else if(null!=this.tabStripRect&&this.tabStripRect.contains(e,i)){let t,n,o;if(0===this.children.length)t=this.tabStripRect.clone(),n=t.y+3,o=t.height-4,t.width=2;else{let r=this.children[0];t=r.getTabRect(),n=t.y,o=t.height;let a=this.tabStripRect.x,d=0;for(let o=0;o<this.children.length;o++){if(r=this.children[o],t=r.getTabRect(),t.y!==n&&(n=t.y,a=this.tabStripRect.x),d=t.x+t.width/2,a<=e&&e<d&&t.y<i&&i<t.getBottom()){const e=g.CENTER,i=new c(t.x-2,t.y,3,t.height);if(this.rect.x<t.x&&t.x<this.rect.getRight()){s=new O(this,i,e,o,_.FLEXLAYOUT__OUTLINE_RECT);break}return}a=d}}if(null==s&&t.getRight()<this.rect.getRight()){const e=g.CENTER,i=new c(t.getRight()-2,n,3,o);s=new O(this,i,e,this.children.length,_.FLEXLAYOUT__OUTLINE_RECT)}}}if(t.canDockInto(t,s))return s}delete(){this.parent.removeChild(this)}remove(t){const e=this.removeChild(t);this.model.tidy(),B(this,e)}drop(e,i,s,n){const o=i;if(this===e)return;let r=e.getParent(),a=0;if(void 0!==r&&(a=r.removeChild(e),r instanceof G&&r.getSelected()===a?r.setSelected(-1):B(r,a)),e instanceof L&&r===this&&a<s&&s>0&&s--,o===g.CENTER){let t=s;if(-1===t&&(t=this.children.length),e instanceof L)this.addChild(e,t),(n||!1!==n&&this.isAutoSelectTab())&&this.setSelected(t);else if(e instanceof Y)e.forEachNode(((e,i)=>{e instanceof L&&(this.addChild(e,t),t++)}),0);else{for(let i=0;i<e.getChildren().length;i++){const s=e.getChildren()[i];this.addChild(s,t),t++}-1===this.getSelected()&&this.children.length>0&&this.setSelected(0)}this.model.setActiveTabset(this,this.parent.getWindowId())}else{let s=e;if(e instanceof L){const i=this.model.getOnCreateTabSet();s=new t(this.model,i?i(e):{}),s.addChild(e),r=s}else if(e instanceof Y){const t=this.getParent();if(e.getOrientation()===t.getOrientation()&&(i.getOrientation()===t.getOrientation()||i===g.CENTER)){const t=new Y(this.model,this.getWindowId(),{});t.addChild(e),s=t}}else s=e;const n=this.parent,a=n.getChildren().indexOf(this);if(n.getOrientation()===o.orientation)s.setWeight(this.getWeight()/2),this.setWeight(this.getWeight()/2),n.addChild(s,a+o.indexPlus);else{const t=new Y(this.model,this.getWindowId(),{});t.setWeight(this.getWeight()),t.addChild(this),this.setWeight(50),s.setWeight(50),t.addChild(s,o.indexPlus),n.removeChild(this),n.addChild(t,a)}s instanceof t&&this.model.setActiveTabset(s,this.getWindowId())}this.model.tidy()}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return t.attributeDefinitions}static getAttributeDefinitions(){return t.attributeDefinitions}static createAttributeDefinitions(){const e=new m;return e.add("type",t.TYPE,!0).setType(f.STRING).setFixed(),e.add("id",void 0).setType(f.STRING).setDescription("the unique id of the tab set, if left undefined a uuid will be assigned"),e.add("weight",100).setType(f.NUMBER).setDescription("relative weight for sizing of this tabset in parent row"),e.add("selected",0).setType(f.NUMBER).setDescription("index of selected/visible tab in tabset"),e.add("name",void 0).setType(f.STRING),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty").setDescription("whether to delete this tabset when is has no tabs"),e.addInherited("enableDrop","tabSetEnableDrop").setDescription("allow user to drag tabs into this tabset"),e.addInherited("enableDrag","tabSetEnableDrag").setDescription("allow user to drag tabs out this tabset"),e.addInherited("enableDivide","tabSetEnableDivide").setDescription("allow user to drag tabs to region of this tabset, splitting into new tabset"),e.addInherited("enableMaximize","tabSetEnableMaximize").setDescription("allow user to maximize tabset to fill view via maximize button"),e.addInherited("enableClose","tabSetEnableClose").setDescription("allow user to close tabset via a close button"),e.addInherited("enableSingleTabStretch","tabSetEnableSingleTabStretch").setDescription("if the tabset has only a single tab then stretch the single tab to fill area and display in a header style"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip").setDescription("a class name to apply to the tab strip"),e.addInherited("enableTabStrip","tabSetEnableTabStrip").setDescription("enable tab strip and allow multiple tabs in this tabset"),e.addInherited("minWidth","tabSetMinWidth").setDescription("minimum width (in px) for this tabset"),e.addInherited("minHeight","tabSetMinHeight").setDescription("minimum height (in px) for this tabset"),e.addInherited("maxWidth","tabSetMaxWidth").setDescription("maximum width (in px) for this tabset"),e.addInherited("maxHeight","tabSetMaxHeight").setDescription("maximum height (in px) for this tabset"),e.addInherited("enableTabWrap","tabSetEnableTabWrap").setDescription("wrap tabs onto multiple lines"),e.addInherited("tabLocation","tabSetTabLocation").setDescription("the location of the tabs either top or bottom"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(f.BOOLEAN).setDescription("whether to select new/moved tabs in tabset"),e.addInherited("enableActiveIcon","tabSetEnableActiveIcon").setType(f.BOOLEAN).setDescription("whether the active icon (*) should be displayed when the tabset is active"),e.addInherited("enableTabScrollbar","tabSetEnableTabScrollbar").setType(f.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};d(U,"TYPE","tabset"),d(U,"attributeDefinitions",U.createAttributeDefinitions());let W=U;const F=class t extends R{constructor(e,i,s){super(e),d(this,"windowId"),d(this,"minHeight"),d(this,"minWidth"),d(this,"maxHeight"),d(this,"maxWidth"),this.windowId=i,this.minHeight=H,this.minWidth=H,this.maxHeight=X,this.maxWidth=X,t.attributeDefinitions.fromJson(s,this.attributes),this.normalizeWeights(),e.addNode(this)}static fromJson(e,i,s){const n=new t(i,s.windowId,e);if(null!=e.children)for(const o of e.children)if(o.type===W.TYPE){const t=W.fromJson(o,i,s);n.addChild(t)}else{const e=t.fromJson(o,i,s);n.addChild(e)}return n}getWeight(){return this.attributes.weight}toJson(){const e={};t.attributeDefinitions.toJson(e,this.attributes),e.children=[];for(const t of this.children)e.children.push(t.toJson());return e}getWindowId(){return this.windowId}setWindowId(t){this.windowId=t}setWeight(t){this.attributes.weight=t}getSplitterBounds(t){const e=this.getOrientation()===h.HORZ,i=this.getChildren(),s=this.model.getSplitterSize(),n=i[0].getRect(),o=i[i.length-1].getRect();let r=e?[n.x,o.getRight()]:[n.y,o.getBottom()];const a=e?[n.x,o.getRight()]:[n.y,o.getBottom()];for(let d=0;d<t;d++){const t=i[d];r[0]+=e?t.getMinWidth():t.getMinHeight(),a[0]+=e?t.getMaxWidth():t.getMaxHeight(),d>0&&(r[0]+=s,a[0]+=s)}for(let d=i.length-1;d>=t;d--){const t=i[d];r[1]-=(e?t.getMinWidth():t.getMinHeight())+s,a[1]-=(e?t.getMaxWidth():t.getMaxHeight())+s}return r=[Math.max(a[1],r[0]),Math.min(a[0],r[1])],r}getSplitterInitials(t){const e=this.getOrientation()===h.HORZ,i=this.getChildren(),s=this.model.getSplitterSize(),n=[];let o=0;for(let a=0;a<i.length;a++){const t=i[a].getRect(),s=e?t.width:t.height;n.push(s),o+=s}const r=i[t].getRect();return{initialSizes:n,sum:o,startPosition:(e?r.x:r.y)-s}}calculateSplit(t,e,i,s,n){const o=this.getOrientation()===h.HORZ,r=this.getChildren(),a=r[t],d=o?a.getMaxWidth():a.getMaxHeight(),l=[...i];if(e<n){let i=n-e,s=0;l[t]+i>d?(s=l[t]+i-d,l[t]=d):l[t]+=i;for(let e=t-1;e>=0;e--){const t=r[e],s=o?t.getMinWidth():t.getMinHeight();if(l[e]-i>s){l[e]-=i;break}i-=l[e]-s,l[e]=s}for(let e=t+1;e<r.length;e++){const t=r[e],i=o?t.getMaxWidth():t.getMaxHeight();if(l[e]+s<i){l[e]+=s;break}s-=i-l[e],l[e]=i}}else{let i=e-n,s=0;l[t-1]+i>d?(s=l[t-1]+i-d,l[t-1]=d):l[t-1]+=i;for(let e=t;e<r.length;e++){const t=r[e],s=o?t.getMinWidth():t.getMinHeight();if(l[e]-i>s){l[e]-=i;break}i-=l[e]-s,l[e]=s}for(let e=t-1;e>=0;e--){const t=r[e],i=o?t.getMaxWidth():t.getMaxHeight();if(l[e]+s<i){l[e]+=s;break}s-=i-l[e],l[e]=i}}return l.map((t=>100*Math.max(.1,t)/s))}getMinSize(t){return t===h.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this.minWidth}getMinHeight(){return this.minHeight}getMaxSize(t){return t===h.HORZ?this.getMaxWidth():this.getMaxHeight()}getMaxWidth(){return this.maxWidth}getMaxHeight(){return this.maxHeight}calcMinMaxSize(){this.minHeight=H,this.minWidth=H,this.maxHeight=X,this.maxWidth=X;let t=!0;for(const e of this.children){const i=e;i.calcMinMaxSize(),this.getOrientation()===h.VERT?(this.minHeight+=i.getMinHeight(),this.maxHeight+=i.getMaxHeight(),t||(this.minHeight+=this.model.getSplitterSize(),this.maxHeight+=this.model.getSplitterSize()),this.minWidth=Math.max(this.minWidth,i.getMinWidth()),this.maxWidth=Math.min(this.maxWidth,i.getMaxWidth())):(this.minWidth+=i.getMinWidth(),this.maxWidth+=i.getMaxWidth(),t||(this.minWidth+=this.model.getSplitterSize(),this.maxWidth+=this.model.getSplitterSize()),this.minHeight=Math.max(this.minHeight,i.getMinHeight()),this.maxHeight=Math.min(this.maxHeight,i.getMaxHeight())),t=!1}}tidy(){let e=0;for(;e<this.children.length;){const i=this.children[e];if(i instanceof t){i.tidy();const s=i.getChildren();if(0===s.length)this.removeChild(i);else if(1===s.length){const n=s[0];if(this.removeChild(i),n instanceof t){let t=0;const s=n.getChildren();for(const e of s){t+=e.getWeight()}for(let n=0;n<s.length;n++){const o=s[n];o.setWeight(i.getWeight()*o.getWeight()/t),this.addChild(o,e+n)}}else n.setWeight(i.getWeight()),this.addChild(n,e)}else e++}else i instanceof W&&0===i.getChildren().length&&i.isEnableDeleteWhenEmpty()?(this.removeChild(i),i===this.model.getMaximizedTabset(this.windowId)&&this.model.setMaximizedTabset(void 0,this.windowId)):e++}if(this===this.model.getRoot(this.windowId)&&0===this.children.length){const t=this.model.getOnCreateTabSet();let e=t?t():{};e={...e,selected:-1};const i=new W(this.model,e);this.model.setActiveTabset(i,this.windowId),this.addChild(i)}}canDrop(t,e,i){const s=i-this.rect.y,n=e-this.rect.x,o=this.rect.width,r=this.rect.height,a=50;let d;if(this.getWindowId()===j.MAIN_WINDOW_ID||I(t)){if(this.model.isEnableEdgeDock()&&void 0===this.parent){if(e<this.rect.x+10&&s>r/2-a&&s<r/2+a){const t=g.LEFT,e=t.getDockRect(this.rect);e.width=e.width/2,d=new O(this,e,t,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(e>this.rect.getRight()-10&&s>r/2-a&&s<r/2+a){const t=g.RIGHT,e=t.getDockRect(this.rect);e.width=e.width/2,e.x+=e.width,d=new O(this,e,t,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(i<this.rect.y+10&&n>o/2-a&&n<o/2+a){const t=g.TOP,e=t.getDockRect(this.rect);e.height=e.height/2,d=new O(this,e,t,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(i>this.rect.getBottom()-10&&n>o/2-a&&n<o/2+a){const t=g.BOTTOM,e=t.getDockRect(this.rect);e.height=e.height/2,e.y+=e.height,d=new O(this,e,t,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(void 0!==d&&!t.canDockInto(t,d))return}return d}}drop(e,i,s){const n=i,o=e.getParent();let r;if(o&&o.removeChild(e),void 0!==o&&o instanceof W&&o.setSelected(0),void 0!==o&&o instanceof G&&o.setSelected(-1),e instanceof W||e instanceof t)r=e,r instanceof t&&r.getOrientation()===this.getOrientation()&&(i.getOrientation()===this.getOrientation()||i===g.CENTER)&&(r=new t(this.model,this.windowId,{}),r.addChild(e));else{const t=this.model.getOnCreateTabSet();r=new W(this.model,t?t(e):{}),r.addChild(e)}let a=this.children.reduce(((t,e)=>t+e.getWeight()),0);0===a&&(a=100),r.setWeight(a/3);const d=!this.model.isRootOrientationVertical();if(n===g.CENTER)-1===s?this.addChild(r,this.children.length):this.addChild(r,s);else if(d&&n===g.LEFT||!d&&n===g.TOP)this.addChild(r,0);else if(d&&n===g.RIGHT||!d&&n===g.BOTTOM)this.addChild(r);else if(d&&n===g.TOP||!d&&n===g.LEFT){const e=new t(this.model,this.windowId,{}),i=new t(this.model,this.windowId,{});i.setWeight(75),r.setWeight(25);for(const t of this.children)i.addChild(t);this.removeAll(),e.addChild(r),e.addChild(i),this.addChild(e)}else if(d&&n===g.BOTTOM||!d&&n===g.RIGHT){const e=new t(this.model,this.windowId,{}),i=new t(this.model,this.windowId,{});i.setWeight(75),r.setWeight(25);for(const t of this.children)i.addChild(t);this.removeAll(),e.addChild(i),e.addChild(r),this.addChild(e)}r instanceof W&&this.model.setActiveTabset(r,this.windowId),this.model.tidy()}isEnableDrop(){return!0}getAttributeDefinitions(){return t.attributeDefinitions}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}static getAttributeDefinitions(){return t.attributeDefinitions}normalizeWeights(){let t=0;for(const e of this.children){t+=e.getWeight()}0===t&&(t=1);for(const e of this.children){const i=e;i.setWeight(Math.max(.001,100*i.getWeight()/t))}}static createAttributeDefinitions(){const e=new m;return e.add("type",t.TYPE,!0).setType(f.STRING).setFixed(),e.add("id",void 0).setType(f.STRING).setDescription("the unique id of the row, if left undefined a uuid will be assigned"),e.add("weight",100).setType(f.NUMBER).setDescription("relative weight for sizing of this row in parent row"),e}};d(F,"TYPE","row"),d(F,"attributeDefinitions",F.createAttributeDefinitions());let Y=F;class P{constructor(t,e){d(this,"_windowId"),d(this,"_layout"),d(this,"_rect"),d(this,"_window"),d(this,"_root"),d(this,"_maximizedTabSet"),d(this,"_activeTabSet"),d(this,"_toScreenRectFunction"),this._windowId=t,this._rect=e,this._toScreenRectFunction=t=>t}visitNodes(t){this.root.forEachNode(t,0)}get windowId(){return this._windowId}get rect(){return this._rect}get layout(){return this._layout}get window(){return this._window}get root(){return this._root}get maximizedTabSet(){return this._maximizedTabSet}get activeTabSet(){return this._activeTabSet}set rect(t){this._rect=t}set layout(t){this._layout=t}set window(t){this._window=t}set root(t){this._root=t}set maximizedTabSet(t){this._maximizedTabSet=t}set activeTabSet(t){this._activeTabSet=t}get toScreenRectFunction(){return this._toScreenRectFunction}set toScreenRectFunction(t){this._toScreenRectFunction=t}toJson(){return this._window&&this._window.screenTop>-1e4&&(this.rect=new c(this._window.screenLeft,this._window.screenTop,this._window.outerWidth,this._window.outerHeight)),{layout:this.root.toJson(),rect:this.rect.toJson()}}static fromJson(t,e,i){const s=e.getwindowsMap().size,n=t.rect?c.fromJson(t.rect):new c(50+50*s,50+50*s,600,400);n.snap(10);const o=new P(i,n);return o.root=Y.fromJson(t.layout,e,o),o}}const H=0,X=99999,z=class t{constructor(){d(this,"attributes"),d(this,"idMap"),d(this,"changeListeners"),d(this,"borders"),d(this,"onAllowDrop"),d(this,"onCreateTabSet"),d(this,"windows"),d(this,"rootWindow"),this.attributes={},this.idMap=new Map,this.borders=new w(this),this.windows=new Map,this.rootWindow=new P(t.MAIN_WINDOW_ID,c.empty()),this.windows.set(t.MAIN_WINDOW_ID,this.rootWindow),this.changeListeners=[]}doAction(e){var i;let s;switch(e.type){case E.ADD_NODE:{const t=new L(this,e.data.json,!0),i=this.idMap.get(e.data.toNode);(i instanceof W||i instanceof G||i instanceof Y)&&(i.drop(t,g.getByName(e.data.location),e.data.index,e.data.select),s=t);break}case E.MOVE_NODE:{const t=this.idMap.get(e.data.fromNode);if(t instanceof L||t instanceof W||t instanceof Y){if(t===this.getMaximizedTabset(t.getWindowId())){this.windows.get(t.getWindowId()).maximizedTabSet=void 0}const i=this.idMap.get(e.data.toNode);(i instanceof W||i instanceof G||i instanceof Y)&&i.drop(t,g.getByName(e.data.location),e.data.index,e.data.select)}this.removeEmptyWindows();break}case E.DELETE_TAB:{const t=this.idMap.get(e.data.node);t instanceof L&&t.delete(),this.removeEmptyWindows();break}case E.DELETE_TABSET:{const t=this.idMap.get(e.data.node);if(t instanceof W){const e=[...t.getChildren()];for(let t=0;t<e.length;t++){const i=e[t];i.isEnableClose()&&i.delete()}0===t.getChildren().length&&t.delete(),this.tidy()}this.removeEmptyWindows();break}case E.POPOUT_TABSET:{const t=this.idMap.get(e.data.node);if(t instanceof W){const e=t.isMaximized(),i=this.windows.get(t.getWindowId()),s=C(),n=new P(s,i.toScreenRectFunction(t.getRect())),o={type:"row",children:[]},r=Y.fromJson(o,this,n);n.root=r,this.windows.set(s,n),r.drop(t,g.CENTER,0),e&&(this.rootWindow.maximizedTabSet=void 0)}this.removeEmptyWindows();break}case E.POPOUT_TAB:{const t=this.idMap.get(e.data.node);if(t instanceof L){const e=C();let i=c.empty();i=t.getParent()instanceof W?t.getParent().getRect():t.getParent().getContentRect();const s=this.windows.get(t.getWindowId()),n=new P(e,s.toScreenRectFunction(i)),o=C(),r={type:"row",children:[{type:"tabset",id:o}]},a=Y.fromJson(r,this,n);n.root=a,this.windows.set(e,n);this.idMap.get(o).drop(t,g.CENTER,0,!0)}this.removeEmptyWindows();break}case E.CLOSE_WINDOW:{const s=this.windows.get(e.data.windowId);s&&(null==(i=this.rootWindow.root)||i.drop(s.root,g.CENTER,-1),this.rootWindow.visitNodes(((e,i)=>{e instanceof Y&&e.setWindowId(t.MAIN_WINDOW_ID)})),this.windows.delete(e.data.windowId));break}case E.CREATE_WINDOW:{const t=C(),i=new P(t,c.fromJson(e.data.rect)),n=Y.fromJson(e.data.layout,this,i);i.root=n,this.windows.set(t,i),s=t;break}case E.RENAME_TAB:{const t=this.idMap.get(e.data.node);t instanceof L&&t.setName(e.data.text);break}case E.SELECT_TAB:{const i=this.idMap.get(e.data.tabNode),s=e.data.windowId?e.data.windowId:t.MAIN_WINDOW_ID,n=this.windows.get(s);if(i instanceof L){const t=i.getParent(),e=t.getChildren().indexOf(i);t instanceof G?t.getSelected()===e?t.setSelected(-1):t.setSelected(e):t instanceof W&&(t.getSelected()!==e&&t.setSelected(e),n.activeTabSet=t)}break}case E.SET_ACTIVE_TABSET:{const i=e.data.windowId?e.data.windowId:t.MAIN_WINDOW_ID,s=this.windows.get(i);if(void 0===e.data.tabsetNode)s.activeTabSet=void 0;else{const t=this.idMap.get(e.data.tabsetNode);t instanceof W&&(s.activeTabSet=t)}break}case E.ADJUST_WEIGHTS:{const t=this.idMap.get(e.data.nodeId).getChildren();for(let i=0;i<t.length;i++){t[i].setWeight(e.data.weights[i])}break}case E.ADJUST_BORDER_SPLIT:{const t=this.idMap.get(e.data.node);t instanceof G&&t.setSize(e.data.pos);break}case E.MAXIMIZE_TOGGLE:{const i=e.data.windowId?e.data.windowId:t.MAIN_WINDOW_ID,s=this.windows.get(i),n=this.idMap.get(e.data.node);n instanceof W&&(n===s.maximizedTabSet?s.maximizedTabSet=void 0:(s.maximizedTabSet=n,s.activeTabSet=n));break}case E.UPDATE_MODEL_ATTRIBUTES:this.updateAttrs(e.data.json);break;case E.UPDATE_NODE_ATTRIBUTES:this.idMap.get(e.data.node).updateAttrs(e.data.json);break}this.updateIdMap();for(const t of this.changeListeners)t(e);return s}getActiveTabset(e=t.MAIN_WINDOW_ID){const i=this.windows.get(e);return i&&i.activeTabSet&&this.getNodeById(i.activeTabSet.getId())?i.activeTabSet:void 0}getMaximizedTabset(e=t.MAIN_WINDOW_ID){return this.windows.get(e).maximizedTabSet}getRoot(e=t.MAIN_WINDOW_ID){return this.windows.get(e).root}isRootOrientationVertical(){return this.attributes.rootOrientationVertical}isEnableRotateBorderIcons(){return this.attributes.enableRotateBorderIcons}getBorderSet(){return this.borders}getwindowsMap(){return this.windows}visitNodes(t){this.borders.forEachNode(t);for(const[e,i]of this.windows)i.root.forEachNode(t,0)}visitWindowNodes(e,i){this.windows.has(e)&&(e===t.MAIN_WINDOW_ID&&this.borders.forEachNode(i),this.windows.get(e).visitNodes(i))}getNodeById(t){return this.idMap.get(t)}getFirstTabSet(e=this.windows.get(t.MAIN_WINDOW_ID).root){const i=e.getChildren()[0];return i instanceof W?i:this.getFirstTabSet(i)}static fromJson(e){const i=new t;if(t.attributeDefinitions.fromJson(e.global,i.attributes),e.borders&&(i.borders=w.fromJson(e.borders,i)),e.popouts)for(const t in e.popouts){const s=e.popouts[t],n=P.fromJson(s,i,t);i.windows.set(t,n)}return i.rootWindow.root=Y.fromJson(e.layout,i,i.getwindowsMap().get(t.MAIN_WINDOW_ID)),i.tidy(),i}toJson(){const e={};t.attributeDefinitions.toJson(e,this.attributes),this.visitNodes((t=>{t.fireEvent("save",{})}));const i={};for(const[s,n]of this.windows)s!==t.MAIN_WINDOW_ID&&(i[s]=n.toJson());return{global:e,borders:this.borders.toJson(),layout:this.rootWindow.root.toJson(),popouts:i}}getSplitterSize(){return this.attributes.splitterSize}getSplitterExtra(){return this.attributes.splitterExtra}isEnableEdgeDock(){return this.attributes.enableEdgeDock}isSplitterEnableHandle(){return this.attributes.splitterEnableHandle}setOnAllowDrop(t){this.onAllowDrop=t}setOnCreateTabSet(t){this.onCreateTabSet=t}addChangeListener(t){this.changeListeners.push(t)}removeChangeListener(t){const e=this.changeListeners.findIndex((e=>e===t));-1!==e&&this.changeListeners.splice(e,1)}toString(){return JSON.stringify(this.toJson())}removeEmptyWindows(){const e=new Set;for(const[i]of this.windows)if(i!==t.MAIN_WINDOW_ID){let t=0;this.visitWindowNodes(i,(e=>{e instanceof L&&t++})),0===t&&e.add(i)}for(const t of e)this.windows.delete(t)}setActiveTabset(t,e){const i=this.windows.get(e);i&&(i.activeTabSet=t||void 0)}setMaximizedTabset(t,e){const i=this.windows.get(e);i&&(i.maximizedTabSet=t||void 0)}updateIdMap(){this.idMap.clear(),this.visitNodes((t=>{this.idMap.set(t.getId(),t)}))}addNode(t){const e=t.getId();if(this.idMap.has(e))throw new Error(`Error: each node must have a unique id, duplicate id:${t.getId()}`);this.idMap.set(e,t)}findDropTargetNode(e,i,s,n){let o=this.windows.get(e).root.findDropTargetNode(e,i,s,n);return void 0===o&&e===t.MAIN_WINDOW_ID&&(o=this.borders.findDropTargetNode(i,s,n)),o}tidy(){for(const[t,e]of this.windows)e.root.tidy()}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}nextUniqueId(){return"#"+C()}getAttribute(t){return this.attributes[t]}getOnAllowDrop(){return this.onAllowDrop}getOnCreateTabSet(){return this.onCreateTabSet}static toTypescriptInterfaces(){t.attributeDefinitions.pairAttributes("RowNode",Y.getAttributeDefinitions()),t.attributeDefinitions.pairAttributes("TabSetNode",W.getAttributeDefinitions()),t.attributeDefinitions.pairAttributes("TabNode",L.getAttributeDefinitions()),t.attributeDefinitions.pairAttributes("BorderNode",G.getAttributeDefinitions());const e=[];e.push(t.attributeDefinitions.toTypescriptInterface("Global",void 0)),e.push(Y.getAttributeDefinitions().toTypescriptInterface("Row",t.attributeDefinitions)),e.push(W.getAttributeDefinitions().toTypescriptInterface("TabSet",t.attributeDefinitions)),e.push(L.getAttributeDefinitions().toTypescriptInterface("Tab",t.attributeDefinitions)),e.push(G.getAttributeDefinitions().toTypescriptInterface("Border",t.attributeDefinitions)),console.log(e.join("\n"))}static createAttributeDefinitions(){const t=new m;return t.add("enableEdgeDock",!0).setType(f.BOOLEAN).setDescription("enable docking to the edges of the layout, this will show the edge indicators"),t.add("rootOrientationVertical",!1).setType(f.BOOLEAN).setDescription("the top level 'row' will layout horizontally by default, set this option true to make it layout vertically"),t.add("enableRotateBorderIcons",!0).setType(f.BOOLEAN).setDescription("boolean indicating if tab icons should rotate with the text in the left and right borders"),t.add("splitterSize",8).setType(f.NUMBER).setDescription("width in pixels of all splitters between tabsets/borders"),t.add("splitterExtra",0).setType(f.NUMBER).setDescription("additional width in pixels of the splitter hit test area"),t.add("splitterEnableHandle",!1).setType(f.BOOLEAN).setDescription("enable a small centralized handle on all splitters"),t.add("tabEnableClose",!0).setType(f.BOOLEAN),t.add("tabCloseType",1).setType("ICloseType"),t.add("tabEnablePopout",!1).setType(f.BOOLEAN).setAlias("tabEnableFloat"),t.add("tabEnablePopoutIcon",!0).setType(f.BOOLEAN),t.add("tabEnablePopoutOverlay",!1).setType(f.BOOLEAN),t.add("tabEnableDrag",!0).setType(f.BOOLEAN),t.add("tabEnableRename",!0).setType(f.BOOLEAN),t.add("tabContentClassName",void 0).setType(f.STRING),t.add("tabClassName",void 0).setType(f.STRING),t.add("tabIcon",void 0).setType(f.STRING),t.add("tabEnableRenderOnDemand",!0).setType(f.BOOLEAN),t.add("tabDragSpeed",.3).setType(f.NUMBER),t.add("tabBorderWidth",-1).setType(f.NUMBER),t.add("tabBorderHeight",-1).setType(f.NUMBER),t.add("tabSetEnableDeleteWhenEmpty",!0).setType(f.BOOLEAN),t.add("tabSetEnableDrop",!0).setType(f.BOOLEAN),t.add("tabSetEnableDrag",!0).setType(f.BOOLEAN),t.add("tabSetEnableDivide",!0).setType(f.BOOLEAN),t.add("tabSetEnableMaximize",!0).setType(f.BOOLEAN),t.add("tabSetEnableClose",!1).setType(f.BOOLEAN),t.add("tabSetEnableSingleTabStretch",!1).setType(f.BOOLEAN),t.add("tabSetAutoSelectTab",!0).setType(f.BOOLEAN),t.add("tabSetEnableActiveIcon",!1).setType(f.BOOLEAN),t.add("tabSetClassNameTabStrip",void 0).setType(f.STRING),t.add("tabSetEnableTabStrip",!0).setType(f.BOOLEAN),t.add("tabSetEnableTabWrap",!1).setType(f.BOOLEAN),t.add("tabSetTabLocation","top").setType("ITabLocation"),t.add("tabMinWidth",H).setType(f.NUMBER),t.add("tabMinHeight",H).setType(f.NUMBER),t.add("tabSetMinWidth",H).setType(f.NUMBER),t.add("tabSetMinHeight",H).setType(f.NUMBER),t.add("tabMaxWidth",X).setType(f.NUMBER),t.add("tabMaxHeight",X).setType(f.NUMBER),t.add("tabSetMaxWidth",X).setType(f.NUMBER),t.add("tabSetMaxHeight",X).setType(f.NUMBER),t.add("tabSetEnableTabScrollbar",!1).setType(f.BOOLEAN),t.add("borderSize",200).setType(f.NUMBER),t.add("borderMinSize",H).setType(f.NUMBER),t.add("borderMaxSize",X).setType(f.NUMBER),t.add("borderEnableDrop",!0).setType(f.BOOLEAN),t.add("borderAutoSelectTabWhenOpen",!0).setType(f.BOOLEAN),t.add("borderAutoSelectTabWhenClosed",!1).setType(f.BOOLEAN),t.add("borderClassName",void 0).setType(f.STRING),t.add("borderEnableAutoHide",!1).setType(f.BOOLEAN),t.add("borderEnableTabScrollbar",!1).setType(f.BOOLEAN),t}};d(z,"MAIN_WINDOW_ID","__main_window_id__"),d(z,"attributeDefinitions",z.createAttributeDefinitions());let j=z;const k=class t extends R{constructor(e,i,s){super(s),d(this,"contentRect",c.empty()),d(this,"tabHeaderRect",c.empty()),d(this,"location"),this.location=e,this.attributes.id=`border_${e.getName()}`,t.attributeDefinitions.fromJson(i,this.attributes),s.addNode(this)}static fromJson(e,i){const s=g.getByName(e.location),n=new t(s,e,i);return e.children&&(n.children=e.children.map((t=>{const e=L.fromJson(t,i);return e.setParent(n),e}))),n}getLocation(){return this.location}getClassName(){return this.getAttr("className")}isHorizontal(){return this.location.orientation===h.HORZ}getSize(){const t=this.getAttr("size"),e=this.getSelected();if(-1===e)return t;{const i=this.children[e],s=this.isHorizontal()?i.getAttr("borderWidth"):i.getAttr("borderHeight");return-1===s?t:s}}getMinSize(){const t=this.getSelectedNode();let e=this.getAttr("minSize");if(t){const i=this.isHorizontal()?t.getMinWidth():t.getMinHeight();e=Math.max(e,i)}return e}getMaxSize(){const t=this.getSelectedNode();let e=this.getAttr("maxSize");if(t){const i=this.isHorizontal()?t.getMaxWidth():t.getMaxHeight();e=Math.min(e,i)}return e}getSelected(){return this.attributes.selected}isAutoHide(){return this.getAttr("enableAutoHide")}getSelectedNode(){if(-1!==this.getSelected())return this.children[this.getSelected()]}getOrientation(){return this.location.getOrientation()}getConfig(){return this.attributes.config}isMaximized(){return!1}isShowing(){return this.attributes.show}toJson(){const e={};return t.attributeDefinitions.toJson(e,this.attributes),e.location=this.location.getName(),e.children=this.children.map((t=>t.toJson())),e}isAutoSelectTab(t){return null==t&&(t=-1!==this.getSelected()),t?this.getAttr("autoSelectTabWhenOpen"):this.getAttr("autoSelectTabWhenClosed")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}setSelected(t){this.attributes.selected=t}getTabHeaderRect(){return this.tabHeaderRect}setTabHeaderRect(t){this.tabHeaderRect=t}getRect(){return this.tabHeaderRect}getContentRect(){return this.contentRect}setContentRect(t){this.contentRect=t}isEnableDrop(){return this.getAttr("enableDrop")}setSize(t){const e=this.getSelected();if(-1===e)this.attributes.size=t;else{const i=this.children[e];-1===(this.isHorizontal()?i.getAttr("borderWidth"):i.getAttr("borderHeight"))?this.attributes.size=t:this.isHorizontal()?i.setBorderWidth(t):i.setBorderHeight(t)}}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}remove(t){const e=this.removeChild(t);-1!==this.getSelected()&&B(this,e)}canDrop(t,e,i){if(!(t instanceof L))return;let s;const n=g.CENTER;if(this.tabHeaderRect.contains(e,i)){if(this.location.orientation===h.VERT)if(this.children.length>0){let t=this.children[0],i=t.getTabRect();const o=i.y,r=i.height;let a=this.tabHeaderRect.x,d=0;for(let l=0;l<this.children.length;l++){if(t=this.children[l],i=t.getTabRect(),d=i.x+i.width/2,e>=a&&e<d){const t=new c(i.x-2,o,3,r);s=new O(this,t,n,l,_.FLEXLAYOUT__OUTLINE_RECT);break}a=d}if(null==s){const t=new c(i.getRight()-2,o,3,r);s=new O(this,t,n,this.children.length,_.FLEXLAYOUT__OUTLINE_RECT)}}else{const t=new c(this.tabHeaderRect.x+1,this.tabHeaderRect.y+2,3,18);s=new O(this,t,n,0,_.FLEXLAYOUT__OUTLINE_RECT)}else if(this.children.length>0){let t=this.children[0],e=t.getTabRect();const o=e.x,r=e.width;let a=this.tabHeaderRect.y,d=0;for(let l=0;l<this.children.length;l++){if(t=this.children[l],e=t.getTabRect(),d=e.y+e.height/2,i>=a&&i<d){const t=new c(o,e.y-2,r,3);s=new O(this,t,n,l,_.FLEXLAYOUT__OUTLINE_RECT);break}a=d}if(null==s){const t=new c(o,e.getBottom()-2,r,3);s=new O(this,t,n,this.children.length,_.FLEXLAYOUT__OUTLINE_RECT)}}else{const t=new c(this.tabHeaderRect.x+2,this.tabHeaderRect.y+1,18,3);s=new O(this,t,n,0,_.FLEXLAYOUT__OUTLINE_RECT)}if(!t.canDockInto(t,s))return}else if(-1!==this.getSelected()&&this.contentRect.contains(e,i)){const e=this.contentRect;if(s=new O(this,e,n,-1,_.FLEXLAYOUT__OUTLINE_RECT),!t.canDockInto(t,s))return}return s}drop(e,i,s,n){let o=0;const r=e.getParent();void 0!==r&&(o=r.removeChild(e),r!==this&&r instanceof t&&r.getSelected()===o?r.setSelected(-1):B(r,o)),e instanceof L&&r===this&&o<s&&s>0&&s--;let a=s;-1===a&&(a=this.children.length),e instanceof L&&this.addChild(e,a),(n||!1!==n&&this.isAutoSelectTab())&&this.setSelected(a),this.model.tidy()}getSplitterBounds(t,e=!1){const i=[0,0],s=e?this.getMinSize():0,n=e?this.getMaxSize():99999,o=this.model.getRoot(j.MAIN_WINDOW_ID),r=o.getRect(),a=this.model.getSplitterSize();if(this.location===g.TOP){i[0]=this.tabHeaderRect.getBottom()+s;const t=this.tabHeaderRect.getBottom()+n;i[1]=Math.max(i[0],r.getBottom()-o.getMinHeight()-a),i[1]=Math.min(i[1],t)}else if(this.location===g.LEFT){i[0]=this.tabHeaderRect.getRight()+s;const t=this.tabHeaderRect.getRight()+n;i[1]=Math.max(i[0],r.getRight()-o.getMinWidth()-a),i[1]=Math.min(i[1],t)}else if(this.location===g.BOTTOM){i[1]=this.tabHeaderRect.y-s-a;const t=this.tabHeaderRect.y-n-a;i[0]=Math.min(i[1],r.y+o.getMinHeight()),i[0]=Math.max(i[0],t)}else if(this.location===g.RIGHT){i[1]=this.tabHeaderRect.x-s-a;const t=this.tabHeaderRect.x-n-a;i[0]=Math.min(i[1],r.x+o.getMinWidth()),i[0]=Math.max(i[0],t)}return i}calculateSplit(t,e){const i=this.getSplitterBounds(e);return this.location===g.BOTTOM||this.location===g.RIGHT?Math.max(0,i[1]-e):Math.max(0,e-i[0])}getAttributeDefinitions(){return t.attributeDefinitions}static getAttributeDefinitions(){return t.attributeDefinitions}static createAttributeDefinitions(){const e=new m;return e.add("type",t.TYPE,!0).setType(f.STRING).setFixed(),e.add("selected",-1).setType(f.NUMBER).setDescription("index of selected/visible tab in border; -1 means no tab selected"),e.add("show",!0).setType(f.BOOLEAN).setDescription("show/hide this border"),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDrop","borderEnableDrop").setType(f.BOOLEAN).setDescription("whether tabs can be dropped into this border"),e.addInherited("className","borderClassName").setType(f.STRING).setDescription("class applied to tab button"),e.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(f.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is already open"),e.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(f.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is currently closed"),e.addInherited("size","borderSize").setType(f.NUMBER).setDescription("size of the tab area when selected"),e.addInherited("minSize","borderMinSize").setType(f.NUMBER).setDescription("the minimum size of the tab area"),e.addInherited("maxSize","borderMaxSize").setType(f.NUMBER).setDescription("the maximum size of the tab area"),e.addInherited("enableAutoHide","borderEnableAutoHide").setType(f.BOOLEAN).setDescription("hide border if it has zero tabs"),e.addInherited("enableTabScrollbar","borderEnableTabScrollbar").setType(f.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};d(k,"TYPE","border"),d(k,"attributeDefinitions",k.createAttributeDefinitions());let G=k,V=!1;const J=t=>{const{layout:e,node:i,index:o,horizontal:r}=t,[a,d]=n.useState(!1),l=n.useRef(null),u=n.useRef(null),g=n.useRef([]),T=n.useRef(void 0),p=n.useRef(void 0),b=n.useRef(0),f=n.useRef(0),m=n.useRef({initialSizes:[],sum:0,startPosition:0}),O=i.getModel().getSplitterSize();let w=i.getModel().getSplitterExtra();N()||(w=Math.max(20,w+O)-O),n.useEffect((()=>{var t,e;return null==(t=l.current)||t.addEventListener("touchstart",R,{passive:!1}),null==(e=u.current)||e.addEventListener("touchstart",R,{passive:!1}),()=>{var t,e;null==(t=l.current)||t.removeEventListener("touchstart",R),null==(e=u.current)||e.removeEventListener("touchstart",R)}}),[]);const R=t=>{t.preventDefault(),t.stopImmediatePropagation()},A=t=>{var s;t.stopPropagation(),i instanceof Y&&(m.current=i.getSplitterInitials(o)),x(!1,e.getCurrentDocument()),S(t.currentTarget.ownerDocument,t,v,y,L),g.current=i.getSplitterBounds(o,!0);const n=e.getRootDiv();T.current=e.getCurrentDocument().createElement("div"),T.current.style.flexDirection=r?"row":"column",T.current.className=e.getClassName(_.FLEXLAYOUT__SPLITTER_DRAG),T.current.style.cursor=i.getOrientation()===h.VERT?"ns-resize":"ew-resize",i.getModel().isSplitterEnableHandle()&&(p.current=e.getCurrentDocument().createElement("div"),p.current.className=M(_.FLEXLAYOUT__SPLITTER_HANDLE)+" "+M(r?_.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:_.FLEXLAYOUT__SPLITTER_HANDLE_VERT),T.current.appendChild(p.current));const a=null==(s=l.current)?void 0:s.getBoundingClientRect(),u=new c(a.x-e.getDomRect().x,a.y-e.getDomRect().y,a.width,a.height);b.current=t.clientX-a.x,f.current=t.clientY-a.y,u.positionElement(T.current),n&&n.appendChild(T.current),d(!0),V=!0},L=()=>{const t=e.getRootDiv();t&&T.current&&t.removeChild(T.current),T.current=void 0,d(!1),V=!1},v=(t,s)=>{if(T.current){const n=e.getDomRect();if(!n)return;i.getOrientation()===h.VERT?T.current.style.top=I(s-n.y-f.current)+"px":T.current.style.left=I(t-n.x-b.current)+"px",e.isRealtimeResize()&&D()}},y=()=>{if(T.current){D();const t=e.getRootDiv();t&&T.current&&t.removeChild(T.current),T.current=void 0}x(!0,e.getCurrentDocument()),d(!1),V=!1},D=t=>{(()=>{if(T.current){let t=0;if(t=i.getOrientation()===h.VERT?T.current.offsetTop:T.current.offsetLeft,i instanceof G){const s=i.calculateSplit(i,t);e.doAction(E.adjustBorderSplit(i.getId(),s))}else{const s=m.current,n=i.calculateSplit(o,t,s.initialSizes,s.sum,s.startPosition);e.doAction(E.adjustWeights(i.getId(),n))}}})()},I=t=>{const e=g.current;let i=t;return t<e[0]&&(i=e[0]),t>e[1]&&(i=e[1]),i},M=e.getClassName,B={cursor:r?"ew-resize":"ns-resize",flexDirection:r?"column":"row"};let C,U=M(_.FLEXLAYOUT__SPLITTER)+" "+M(_.FLEXLAYOUT__SPLITTER_+i.getOrientation().getName());if(i instanceof G?U+=" "+M(_.FLEXLAYOUT__SPLITTER_BORDER):void 0!==i.getModel().getMaximizedTabset(e.getWindowId())&&(B.display="none"),r?(B.width=O+"px",B.minWidth=O+"px"):(B.height=O+"px",B.minHeight=O+"px"),!a&&i.getModel().isSplitterEnableHandle()&&(C=(0,s.jsx)("div",{className:M(_.FLEXLAYOUT__SPLITTER_HANDLE)+" "+M(r?_.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:_.FLEXLAYOUT__SPLITTER_HANDLE_VERT)})),0===w)return(0,s.jsx)("div",{className:U,style:B,ref:l,"data-layout-path":i.getPath()+"/s"+(o-1),onPointerDown:A,children:C});{const t={};i.getOrientation()===h.HORZ?(t.height="100%",t.width=O+w+"px",t.cursor="ew-resize"):(t.height=O+w+"px",t.width="100%",t.cursor="ns-resize");const e=M(_.FLEXLAYOUT__SPLITTER_EXTRA);return(0,s.jsx)("div",{className:U,style:B,ref:l,"data-layout-path":i.getPath()+"/s"+(o-1),onPointerDown:A,children:(0,s.jsx)("div",{style:t,ref:u,className:e,onPointerDown:A})})}};function Z(t){const{layout:e,border:i,show:o}=t,r=n.useRef(null),a=n.useRef(void 0);n.useLayoutEffect((()=>{const t=e.getBoundingClientRect(r.current);!isNaN(t.x)&&t.width>0&&(i.getContentRect().equals(t)||(i.setContentRect(t),V?(a.current&&clearTimeout(a.current),a.current=setTimeout((()=>{e.redrawInternal("border content rect "+t),a.current=void 0}),50)):e.redrawInternal("border content rect "+t)))}));let d=!0;const l={};i.getOrientation()===h.HORZ?(l.width=i.getSize(),l.minWidth=i.getMinSize(),l.maxWidth=i.getMaxSize()):(l.height=i.getSize(),l.minHeight=i.getMinSize(),l.maxHeight=i.getMaxSize(),d=!1),l.display=o?"flex":"none";const c=e.getClassName(_.FLEXLAYOUT__BORDER_TAB_CONTENTS);return i.getLocation()===g.LEFT||i.getLocation()===g.TOP?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:r,style:l,className:c}),o&&(0,s.jsx)(J,{layout:e,node:i,index:0,horizontal:d})]}):(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsx)(J,{layout:e,node:i,index:0,horizontal:d}),(0,s.jsx)("div",{ref:r,style:l,className:c})]})}var q=(t=>(t[t.Visible=1]="Visible",t[t.Always=2]="Always",t[t.Selected=3]="Selected",t))(q||{});const $=t=>{const{layout:e,node:i,selected:o,border:r,icons:a,path:d}=t,l=n.useRef(null),h=n.useRef(null),c=t=>{(()=>{const t=i.getCloseType();return!(!o&&t!==q.Always)||!(t!==q.Visible||!window.matchMedia||!window.matchMedia("(hover: hover) and (pointer: fine)").matches)})()&&(e.doAction(E.deleteTab(i.getId())),t.stopPropagation())},u=t=>{t.stopPropagation()};n.useLayoutEffect((()=>{i.setTabRect(e.getBoundingClientRect(l.current)),e.getEditingTab()===i&&h.current.select()}));const g=t=>{t.stopPropagation()},p=t=>{"Escape"===t.code?e.setEditingTab(void 0):"Enter"!==t.code&&"NumpadEnter"!==t.code||(e.setEditingTab(void 0),e.doAction(E.renameTab(i.getId(),t.target.value)))},b=e.getClassName;let f=b(_.FLEXLAYOUT__BORDER_BUTTON)+" "+b(_.FLEXLAYOUT__BORDER_BUTTON_+r);f+=o?" "+b(_.FLEXLAYOUT__BORDER_BUTTON__SELECTED):" "+b(_.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),void 0!==i.getClassName()&&(f+=" "+i.getClassName());let m=0;!1===i.getModel().isEnableRotateBorderIcons()&&("left"===r?m=90:"right"===r&&(m=-90));const O=v(e,i,m);let w=O.content?(0,s.jsx)("div",{className:b(_.FLEXLAYOUT__BORDER_BUTTON_CONTENT),children:O.content}):null;const R=O.leading?(0,s.jsx)("div",{className:b(_.FLEXLAYOUT__BORDER_BUTTON_LEADING),children:O.leading}):null;if(e.getEditingTab()===i&&(w=(0,s.jsx)("input",{ref:h,className:b(_.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":d+"/textbox",type:"text",autoFocus:!0,defaultValue:i.getName(),onKeyDown:p,onPointerDown:g})),i.isEnableClose()){const t=e.i18nName(T.Close_Tab);O.buttons.push((0,s.jsx)("div",{"data-layout-path":d+"/button/close",title:t,className:b(_.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onPointerDown:u,onClick:c,children:"function"===typeof a.close?a.close(i):a.close},"close"))}return(0,s.jsxs)("div",{ref:l,"data-layout-path":d,className:f,onClick:()=>{e.doAction(E.selectTab(i.getId()))},onAuxClick:t=>{y(t)&&e.auxMouseClick(i,t)},onContextMenu:t=>{e.showContextMenu(i,t)},title:i.getHelpText(),draggable:!0,onDragStart:t=>{i.isEnableDrag()?(t.stopPropagation(),e.setDragNode(t.nativeEvent,i)):t.preventDefault()},onDragEnd:t=>{t.stopPropagation(),e.clearDragMain()},children:[R,w,O.buttons]})},K=t=>{const{layout:e,node:i}=t,n=e.getClassName,o=n(_.FLEXLAYOUT__TAB_BUTTON_STAMP),r=v(e,i),a=r.content?(0,s.jsx)("div",{className:n(_.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:r.content}):i.getNameForOverflowMenu(),d=r.leading?(0,s.jsx)("div",{className:n(_.FLEXLAYOUT__TAB_BUTTON_LEADING),children:r.leading}):null;return(0,s.jsxs)("div",{className:o,title:i.getHelpText(),children:[d,a]})};function Q(t,e,i,n,o){const r=o.getRootDiv(),a=o.getClassName,d=t.ownerDocument,l=t.getBoundingClientRect(),h=(null==r?void 0:r.getBoundingClientRect())??new DOMRect(0,0,100,100),c=d.createElement("div");c.className=a(_.FLEXLAYOUT__POPUP_MENU_CONTAINER),l.left<h.left+h.width/2?c.style.left=l.left-h.left+"px":c.style.right=h.right-l.right+"px",l.top<h.top+h.height/2?c.style.top=l.top-h.top+"px":c.style.bottom=h.bottom-l.bottom+"px",o.showOverlay(!0),r&&r.appendChild(c);const u=()=>{o.hideControlInPortal(),o.showOverlay(!1),r&&r.removeChild(c),c.removeEventListener("pointerdown",g),d.removeEventListener("pointerdown",T)},g=t=>{t.stopPropagation()},T=t=>{u()};c.addEventListener("pointerdown",g),d.addEventListener("pointerdown",T),o.showControlInPortal((0,s.jsx)(tt,{currentDocument:d,parentNode:e,onSelect:n,onHide:u,items:i,classNameMapper:a,layout:o}),c)}const tt=t=>{const{parentNode:e,items:i,onHide:o,onSelect:r,classNameMapper:a,layout:d}=t,l=(0,n.useRef)(null);(0,n.useEffect)((()=>{l.current&&l.current.focus()}),[]);const h=t=>{d.clearDragMain()},c=i.map(((t,i)=>{let n=a(_.FLEXLAYOUT__POPUP_MENU_ITEM);return e.getSelected()===t.index&&(n+=" "+a(_.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED)),(0,s.jsx)("div",{className:n,"data-layout-path":"/popup-menu/tb"+i,onClick:e=>((t,e)=>{r(t),o(),e.stopPropagation()})(t,e),draggable:!0,onDragStart:e=>{return i=e,s=t.node,i.stopPropagation(),d.setDragNode(i.nativeEvent,s),void setTimeout((()=>{o()}),0);var i,s},onDragEnd:h,title:t.node.getHelpText(),children:(0,s.jsx)(K,{node:t.node,layout:d})},t.index)}));return(0,s.jsx)("div",{className:a(_.FLEXLAYOUT__POPUP_MENU),ref:l,tabIndex:0,onKeyDown:t=>{"Escape"===t.key&&o()},"data-layout-path":"/popup-menu",children:c})},et=(t,e,i,s,o,r)=>{const[a,d]=n.useState([]),[l,c]=n.useState(!1),[u,g]=n.useState(!1),T=n.useRef(null),_=n.useRef(!1),p=n.useRef(void 0),b=n.useRef([]),E=n.useRef(0),f=n.useRef(!1);b.current=a,n.useLayoutEffect((()=>{s.current&&B(0)}),[e.getId()]),n.useLayoutEffect((()=>{_.current=!1}),[e.getSelectedNode(),e.getRect().width,e.getRect().height]),n.useLayoutEffect((()=>{N(),!1===_.current&&function(){const i=e.getSelectedNode();if(i&&s.current){const e=t.getBoundingClientRect(s.current),n=i.getTabRect();let o=y(e)-y(n);o>0||I(n)>I(e)?(B(C(s.current)-o),f.current=!0):(o=x(n)-x(e),o>0&&(B(C(s.current)+o),f.current=!0))}}(),O(),w()})),n.useEffect((()=>{var t;return null==(t=T.current)||t.addEventListener("wheel",m,{passive:!1}),()=>{var t;null==(t=T.current)||t.removeEventListener("wheel",m)}}),[T.current]);const m=t=>{t.preventDefault()};const O=()=>{if(s.current&&o.current){const t=s.current,e=o.current,n=D(t),r=M(t),a=C(t);if(r>n&&r>0){let t=n*n/r,s=0;t<20&&(s=20-t,t=20);const o=a*(n-s)/r;i===h.HORZ?(e.style.width=t+"px",e.style.left=o+"px"):(e.style.height=t+"px",e.style.top=o+"px"),e.style.display="block"}else e.style.display="none";i===h.HORZ?e.style.bottom="0px":e.style.right="0px"}},w=()=>{const t=v().length>0;t!==l&&c(t),void 0===p.current&&(p.current=setTimeout((()=>{const t=v();var e,i;e=t,i=b.current,e.length===i.length&&e.every(((t,e)=>t===i[e]))||d(t),p.current=void 0}),100))},R=(t,e)=>{if(s.current&&o.current){const n=s.current,r=o.current,a=D(n),d=M(n),l=D(r),c=n.getBoundingClientRect();let u=0;if(u=i===h.HORZ?t-c.x-E.current:e-c.y-E.current,u=Math.max(0,Math.min(d-l,u)),a>0){B(u*d/a)}}},A=()=>{},L=()=>{},N=()=>{if(s.current){const t=s.current.firstElementChild,e=u?10:0,i=D(t)+e>D(s.current);i!==u&&g(i)}},v=()=>{const t=[];if(s.current){const e=s.current,i=e.getBoundingClientRect(),n=y(i)-1,o=x(i)+1,a=e.firstElementChild;let d=0;Array.from(a.children).forEach((e=>{const i=e.getBoundingClientRect();e.classList.contains(r)&&((y(i)<n||x(i)>o)&&t.push(d),d++)}))}return t},y=t=>i===h.HORZ?t.x:t.y,x=t=>i===h.HORZ?t.right:t.bottom,D=t=>i===h.HORZ?t.clientWidth:t.clientHeight,I=t=>i===h.HORZ?t.width:t.height,M=t=>i===h.HORZ?t.scrollWidth:t.scrollHeight,B=t=>{i===h.HORZ?s.current.scrollLeft=t:s.current.scrollTop=t},C=t=>i===h.HORZ?t.scrollLeft:t.scrollTop;return{selfRef:T,userControlledPositionRef:_,onScroll:()=>{f.current||(_.current=!0),f.current=!1,O(),w()},onScrollPointerDown:t=>{var e;t.stopPropagation(),o.current.setPointerCapture(t.pointerId);const s=null==(e=o.current)?void 0:e.getBoundingClientRect();i===h.HORZ?E.current=t.clientX-s.x:E.current=t.clientY-s.y,S(t.currentTarget.ownerDocument,t,R,A,L)},hiddenTabs:a,onMouseWheel:t=>{if(s.current){if(0===e.getChildren().length)return;let i=0;if(Math.abs(t.deltaY)>0){i=-t.deltaY,1===t.deltaMode&&(i*=40);const e=C(s.current)-i,n=M(s.current)-D(s.current),o=Math.max(0,Math.min(n,e));B(o),t.stopPropagation()}}},isDockStickyButtons:u,isShowHiddenTabs:l}};const it=t=>{const{border:e,layout:i,size:o}=t,r=n.useRef(null),a=n.useRef(null),d=n.useRef(null),l=n.useRef(null),c=n.useRef(null),u=i.getIcons();n.useLayoutEffect((()=>{e.setTabHeaderRect(i.getBoundingClientRect(p.current))}));const{selfRef:p,userControlledPositionRef:b,onScroll:f,onScrollPointerDown:m,hiddenTabs:O,onMouseWheel:w,isDockStickyButtons:R,isShowHiddenTabs:A}=et(i,e,h.flip(e.getOrientation()),c,a,i.getClassName(_.FLEXLAYOUT__BORDER_BUTTON)),L=t=>{y(t)&&i.auxMouseClick(e,t)},N=t=>{t.stopPropagation()},v=t=>{const s=i.getShowOverflowMenu(),n=O.map((t=>({index:t,node:e.getChildren()[t]})));if(void 0!==s)s(e,t,n,x);else{Q(d.current,e,n,x,i)}t.stopPropagation()},x=t=>{i.doAction(E.selectTab(t.node.getId())),b.current=!1},D=t=>{const s=e.getChildren()[e.getSelected()];void 0!==s&&i.doAction(E.popoutTab(s.getId())),t.stopPropagation()},S=i.getClassName,I=[],M=t=>{const n=e.getSelected()===t,o=e.getChildren()[t];I.push((0,s.jsx)($,{layout:i,border:e.getLocation().getName(),node:o,path:e.getPath()+"/tb"+t,selected:n,icons:u},o.getId())),t<e.getChildren().length-1&&I.push((0,s.jsx)("div",{className:S(_.FLEXLAYOUT__BORDER_TAB_DIVIDER)},"divider"+t))};for(let s=0;s<e.getChildren().length;s++)M(s);let B,C=S(_.FLEXLAYOUT__BORDER)+" "+S(_.FLEXLAYOUT__BORDER_+e.getLocation().getName());void 0!==e.getClassName()&&(C+=" "+e.getClassName());let U=[],W=[];const F={leading:B,buttons:U,stickyButtons:W,overflowPosition:void 0};if(i.customizeTabSet(e,F),B=F.leading,W=F.stickyButtons,U=F.buttons,void 0===F.overflowPosition&&(F.overflowPosition=W.length),W.length>0&&(R?U=[...W,...U]:I.push((0,s.jsx)("div",{ref:l,onPointerDown:N,onDragStart:t=>{t.preventDefault()},className:S(_.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:W},"sticky_buttons_container"))),A){const t=i.i18nName(T.Overflow_Menu_Tooltip);let n;if("function"===typeof u.more){const t=O.map((t=>({index:t,node:e.getChildren()[t]})));n=u.more(e,t)}else n=(0,s.jsxs)(s.Fragment,{children:[u.more,(0,s.jsx)("div",{className:S(_.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:O.length>0?O.length:""})]});U.splice(Math.min(F.overflowPosition,U.length),0,(0,s.jsx)("button",{ref:d,className:S(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+S(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:t,onClick:v,onPointerDown:N,children:n},"overflowbutton"))}const Y=e.getSelected();if(-1!==Y){const t=e.getChildren()[Y];if(void 0!==t&&i.isSupportsPopout()&&t.isEnablePopout()){const e=i.i18nName(T.Popout_Tab);U.push((0,s.jsx)("button",{title:e,className:S(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:D,onPointerDown:N,children:"function"===typeof u.popout?u.popout(t):u.popout},"popout"))}}const P=(0,s.jsx)("div",{ref:r,className:S(_.FLEXLAYOUT__BORDER_TOOLBAR)+" "+S(_.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName()),children:U},"toolbar");let H={},X={};const z=o-1;let j,k;return e.getLocation()===g.LEFT?(H={right:"100%",top:0},X={width:z,overflowY:"auto"}):e.getLocation()===g.RIGHT?(H={left:"100%",top:0},X={width:z,overflowY:"auto"}):(H={left:0},X={height:z,overflowX:"auto"}),e.isEnableTabScrollbar()&&(j=(0,s.jsx)("div",{ref:a,className:S(_.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:m})),B&&(k=(0,s.jsx)("div",{className:S(_.FLEXLAYOUT__BORDER_LEADING),children:B})),(0,s.jsxs)("div",{ref:p,style:{display:"flex",flexDirection:e.getOrientation()===h.VERT?"row":"column"},className:C,"data-layout-path":e.getPath(),onClick:L,onAuxClick:L,onContextMenu:t=>{i.showContextMenu(e,t)},onWheel:w,children:[k,(0,s.jsxs)("div",{className:S(_.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[(0,s.jsx)("div",{ref:c,className:S(_.FLEXLAYOUT__BORDER_INNER)+" "+S(_.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName()),style:X,onScroll:f,children:(0,s.jsx)("div",{style:H,className:S(_.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+S(_.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName()),children:I})}),j]}),P]})},st=t=>{const{layout:e,node:i}=t,o=n.useRef(null);n.useEffect((()=>{i.setTabStamp(o.current)}),[i,o.current]);const r=(0,e.getClassName)(_.FLEXLAYOUT__DRAG_RECT);return(0,s.jsx)("div",{ref:o,className:r,children:(0,s.jsx)(K,{layout:e,node:i},i.getId())})},nt=t=>{const{title:e,layout:i,layoutWindow:s,url:r,onCloseWindow:a,onSetWindow:d,children:l}=t,h=n.useRef(null),[c,u]=n.useState(void 0),g=new Map;return n.useLayoutEffect((()=>{if(!h.current){const t=s.windowId,i=s.rect;h.current=window.open(r,t,`left=${i.x},top=${i.y},width=${i.width},height=${i.height}`),h.current?(s.window=h.current,d(s,h.current),window.addEventListener("beforeunload",(()=>{if(h.current){const t=h.current;h.current=null,t.close()}})),h.current.addEventListener("load",(()=>{if(h.current){h.current.focus(),h.current.resizeTo(i.width,i.height),h.current.moveTo(i.x,i.y);const t=h.current.document;t.title=e;const n=t.createElement("div");n.className=_.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,t.body.appendChild(n),function(t,e){const i=[],s=document.querySelectorAll('style, link[rel="stylesheet"]');for(const n of s)ot(t,n,e,i);return Promise.all(i)}(t,g).then((()=>{u(n)}));const o=new MutationObserver((e=>function(t,e,i){for(const s of t)if("childList"===s.type){for(const t of s.addedNodes)(t instanceof HTMLLinkElement||t instanceof HTMLStyleElement)&&ot(e,t,i);for(const t of s.removedNodes)if(t instanceof HTMLLinkElement||t instanceof HTMLStyleElement){const s=i.get(t);s&&e.head.removeChild(s)}}}(e,t,g)));o.observe(document.head,{childList:!0}),h.current.addEventListener("beforeunload",(()=>{h.current&&(a(s),h.current=null,o.disconnect())}))}}))):(console.warn(`Unable to open window ${r}`),a(s))}return()=>{var t;i.getModel().getwindowsMap().has(s.windowId)||(null==(t=h.current)||t.close(),h.current=null)}}),[]),void 0!==c?(0,o.createPortal)(l,c):null};function ot(t,e,i,s){if(e instanceof HTMLLinkElement){const n=e.cloneNode(!0);t.head.appendChild(n),i.set(e,n),s&&s.push(new Promise((t=>{n.onload=()=>t(!0)})))}else if(e instanceof HTMLStyleElement)try{const s=e.cloneNode(!0);t.head.appendChild(s),i.set(e,s)}catch(n){}}const rt={width:"1em",height:"1em",display:"flex",alignItems:"center"},at=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:rt,viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,s.jsx)("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),dt=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:rt,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,s.jsx)("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})]}),lt=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:rt,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,s.jsx)("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})]}),ht=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:10,height:10},preserveAspectRatio:"none",viewBox:"0 0 100 100",children:(0,s.jsx)("path",{fill:"var(--color-edge-icon)",stroke:"var(--color-edge-icon)",d:"M10 30 L90 30 l-40 40 Z"})}),ct=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:rt,viewBox:"0 0 20 20",fill:"var(--color-icon)",children:[(0,s.jsx)("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),(0,s.jsx)("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),ut=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:rt,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,s.jsx)("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})]}),gt=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:rt,height:"24px",viewBox:"0 -960 960 960",width:"24px",children:(0,s.jsx)("path",{fill:"var(--color-icon)",stroke:"var(--color-icon)",d:"M440-120v-264L254-197l-57-57 187-186H120v-80h264L197-706l57-57 186 187v-264h80v264l186-187 57 57-187 186h264v80H576l187 186-57 57-186-187v264h-80Z"})}),Tt=t=>{const{layout:e,show:i}=t;return(0,s.jsx)("div",{className:e.getClassName(_.FLEXLAYOUT__LAYOUT_OVERLAY),style:{display:i?"flex":"none"}})},_t=t=>{const{layout:e,node:i,selected:o,path:r}=t,a=n.useRef(null),d=n.useRef(null),l=e.getIcons();n.useLayoutEffect((()=>{i.setTabRect(e.getBoundingClientRect(a.current)),e.getEditingTab()===i&&d.current.select()}));const h=()=>{e.setEditingTab(i),e.getCurrentDocument().body.addEventListener("pointerdown",c)},c=t=>{t.target!==d.current&&(e.getCurrentDocument().body.removeEventListener("pointerdown",c),e.setEditingTab(void 0))},u=t=>{(()=>{const t=i.getCloseType();return!(!o&&t!==q.Always)||!(t!==q.Visible||!window.matchMedia||!window.matchMedia("(hover: hover) and (pointer: fine)").matches)})()&&(e.doAction(E.deleteTab(i.getId())),t.stopPropagation())},g=t=>{t.stopPropagation()},p=t=>{t.stopPropagation()},b=t=>{"Escape"===t.code?e.setEditingTab(void 0):"Enter"!==t.code&&"NumpadEnter"!==t.code||(e.setEditingTab(void 0),e.doAction(E.renameTab(i.getId(),t.target.value)))},f=e.getClassName,m=i.getParent(),O=m.isEnableSingleTabStretch()&&1===m.getChildren().length,w=O?_.FLEXLAYOUT__TAB_BUTTON_STRETCH:_.FLEXLAYOUT__TAB_BUTTON;let R=f(w);R+=" "+f(w+"_"+m.getTabLocation()),O||(R+=o?" "+f(w+"--selected"):" "+f(w+"--unselected")),void 0!==i.getClassName()&&(R+=" "+i.getClassName());const A=v(e,i);let L=A.content?(0,s.jsx)("div",{className:f(_.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:A.content}):null;const N=A.leading?(0,s.jsx)("div",{className:f(_.FLEXLAYOUT__TAB_BUTTON_LEADING),children:A.leading}):null;if(e.getEditingTab()===i&&(L=(0,s.jsx)("input",{ref:d,className:f(_.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":r+"/textbox",type:"text",autoFocus:!0,defaultValue:i.getName(),onKeyDown:b,onPointerDown:p})),i.isEnableClose()&&!O){const t=e.i18nName(T.Close_Tab);A.buttons.push((0,s.jsx)("div",{"data-layout-path":r+"/button/close",title:t,className:f(_.FLEXLAYOUT__TAB_BUTTON_TRAILING),onPointerDown:g,onClick:u,children:"function"===typeof l.close?l.close(i):l.close},"close"))}return(0,s.jsxs)("div",{ref:a,"data-layout-path":r,className:R,onClick:()=>{e.doAction(E.selectTab(i.getId()))},onAuxClick:t=>{y(t)&&e.auxMouseClick(i,t)},onContextMenu:t=>{e.showContextMenu(i,t)},title:i.getHelpText(),draggable:!0,onDragStart:t=>{i.isEnableDrag()?(t.stopPropagation(),e.setDragNode(t.nativeEvent,i)):t.preventDefault()},onDragEnd:t=>{e.clearDragMain()},onDoubleClick:t=>{i.isEnableRename()&&(h(),t.stopPropagation())},children:[N,L,A.buttons]})},pt=t=>{const{node:e,layout:i}=t,r=n.useRef(null),a=n.useRef(null),d=n.useRef(null),l=n.useRef(null),c=n.useRef(null),u=n.useRef(null),g=n.useRef(null),p=n.useRef(void 0),b=i.getIcons();n.useLayoutEffect((()=>{e.setRect(i.getBoundingClientRect(f.current)),r.current&&e.setTabStripRect(i.getBoundingClientRect(r.current));const t=i.getBoundingClientRect(l.current);e.getContentRect().equals(t)||isNaN(t.x)||(e.setContentRect(t),V?(p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{i.redrawInternal("border content rect "+t),p.current=void 0}),50)):i.redrawInternal("border content rect "+t))}));const{selfRef:f,userControlledPositionRef:m,onScroll:O,onScrollPointerDown:w,hiddenTabs:R,onMouseWheel:A,isDockStickyButtons:L,isShowHiddenTabs:N}=et(i,e,h.HORZ,d,a,i.getClassName(_.FLEXLAYOUT__TAB_BUTTON)),v=t=>{const s=i.getShowOverflowMenu(),n=R.map((t=>({index:t,node:e.getChildren()[t]})));if(void 0!==s)s(e,t,n,x);else{Q(u.current,e,n,x,i)}t.stopPropagation()},x=t=>{i.doAction(E.selectTab(t.node.getId())),m.current=!1},D=t=>{i.getEditingTab()?t.preventDefault():e.isEnableDrag()?(t.stopPropagation(),i.setDragNode(t.nativeEvent,e)):t.preventDefault()},S=t=>{y(t)||i.doAction(E.setActiveTabset(e.getId(),i.getWindowId()))},I=t=>{y(t)&&i.auxMouseClick(e,t)},M=t=>{i.showContextMenu(e,t)},B=t=>{t.stopPropagation()},C=t=>{e.canMaximize()&&i.maximize(e),t.stopPropagation()},U=t=>{i.doAction(E.deleteTabset(e.getId())),t.stopPropagation()},W=t=>{i.doAction(E.deleteTab(e.getChildren()[0].getId())),t.stopPropagation()},F=t=>{void 0!==H&&i.doAction(E.popoutTab(H.getId())),t.stopPropagation()},Y=t=>{e.canMaximize()&&i.maximize(e)},P=i.getClassName,H=e.getSelectedNode(),X=e.getPath(),z=[];if(e.isEnableTabStrip())for(let n=0;n<e.getChildren().length;n++){const t=e.getChildren()[n],o=e.getSelected()===n;z.push((0,s.jsx)(_t,{layout:i,node:t,path:X+"/tb"+n,selected:o},t.getId())),n<e.getChildren().length-1&&z.push((0,s.jsx)("div",{className:P(_.FLEXLAYOUT__TABSET_TAB_DIVIDER)},"divider"+n))}let j,k=[],G=[];const J={leading:j,stickyButtons:k,buttons:G,overflowPosition:void 0};i.customizeTabSet(e,J),j=J.leading,k=J.stickyButtons,G=J.buttons;const Z=e.isEnableSingleTabStretch()&&1===e.getChildren().length,q=Z&&e.getChildren()[0].isEnableClose()||e.isEnableClose();if(void 0===J.overflowPosition&&(J.overflowPosition=k.length),k.length>0&&(e.isEnableTabWrap()||!L&&!Z?z.push((0,s.jsx)("div",{ref:g,onPointerDown:B,onDragStart:t=>{t.preventDefault()},className:P(_.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:k},"sticky_buttons_container")):G=[...k,...G]),!e.isEnableTabWrap()&&N){const t=i.i18nName(T.Overflow_Menu_Tooltip);let n;if("function"===typeof b.more){const t=R.map((t=>({index:t,node:e.getChildren()[t]})));n=b.more(e,t)}else n=(0,s.jsxs)(s.Fragment,{children:[b.more,(0,s.jsx)("div",{className:P(_.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:R.length>0?R.length:""})]});G.splice(Math.min(J.overflowPosition,G.length),0,(0,s.jsx)("button",{"data-layout-path":X+"/button/overflow",ref:u,className:P(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+P(_.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:t,onClick:v,onPointerDown:B,children:n},"overflowbutton"))}if(void 0!==H&&i.isSupportsPopout()&&H.isEnablePopout()&&H.isEnablePopoutIcon()){const t=i.i18nName(T.Popout_Tab);G.push((0,s.jsx)("button",{"data-layout-path":X+"/button/popout",title:t,className:P(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+P(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:F,onPointerDown:B,children:"function"===typeof b.popout?b.popout(H):b.popout},"popout"))}if(e.canMaximize()){const t=i.i18nName(T.Restore),n=i.i18nName(T.Maximize);G.push((0,s.jsx)("button",{"data-layout-path":X+"/button/max",title:e.isMaximized()?t:n,className:P(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+P(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:C,onPointerDown:B,children:e.isMaximized()?"function"===typeof b.restore?b.restore(e):b.restore:"function"===typeof b.maximize?b.maximize(e):b.maximize},"max"))}if(!e.isMaximized()&&q){const t=Z?i.i18nName(T.Close_Tab):i.i18nName(T.Close_Tabset);G.push((0,s.jsx)("button",{"data-layout-path":X+"/button/close",title:t,className:P(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+P(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:Z?W:U,onPointerDown:B,children:"function"===typeof b.closeTabset?b.closeTabset(e):b.closeTabset},"close"))}if(e.isActive()&&e.isEnableActiveIcon()){const t=i.i18nName(T.Active_Tabset);G.push((0,s.jsx)("div",{"data-layout-path":X+"/button/active",title:t,className:P(_.FLEXLAYOUT__TAB_TOOLBAR_ICON),children:"function"===typeof b.activeTabset?b.activeTabset(e):b.activeTabset},"active"))}const $=(0,s.jsx)("div",{ref:c,className:P(_.FLEXLAYOUT__TAB_TOOLBAR),onPointerDown:B,onDragStart:t=>{t.preventDefault()},children:G},"buttonbar");let K,tt,it,st=P(_.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(void 0!==e.getClassNameTabStrip()&&(st+=" "+e.getClassNameTabStrip()),st+=" "+_.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&(st+=" "+P(_.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(st+=" "+P(_.FLEXLAYOUT__TABSET_MAXIMIZED)),Z){const t=e.getChildren()[0];void 0!==t.getTabSetClassName()&&(st+=" "+t.getTabSetClassName())}if(j&&(tt=(0,s.jsx)("div",{className:P(_.FLEXLAYOUT__TABSET_LEADING),children:j})),e.isEnableTabWrap())e.isEnableTabStrip()&&(K=(0,s.jsxs)("div",{className:st,style:{flexWrap:"wrap",gap:"1px",marginTop:"2px"},ref:r,"data-layout-path":X+"/tabstrip",onPointerDown:S,onDoubleClick:Y,onContextMenu:M,onClick:I,onAuxClick:I,draggable:!0,onDragStart:D,children:[tt,z,(0,s.jsx)("div",{style:{flexGrow:1}}),$]}));else if(e.isEnableTabStrip()){let t;e.isEnableTabScrollbar()&&(t=(0,s.jsx)("div",{ref:a,className:P(_.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:w})),K=(0,s.jsxs)("div",{className:st,ref:r,"data-layout-path":X+"/tabstrip",onPointerDown:S,onDoubleClick:Y,onContextMenu:M,onClick:I,onAuxClick:I,draggable:!0,onWheel:A,onDragStart:D,children:[tt,(0,s.jsxs)("div",{className:P(_.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[(0,s.jsx)("div",{ref:d,className:P(_.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+P(_.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation()),style:{overflowX:"auto",overflowY:"hidden"},onScroll:O,children:(0,s.jsx)("div",{style:{width:Z?"100%":"none"},className:P(_.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+P(_.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation()),children:z})}),t]}),$]})}if(0===e.getChildren().length){const t=i.getTabSetPlaceHolderCallback();t&&(it=t(e))}let nt=(0,s.jsx)("div",{ref:l,className:P(_.FLEXLAYOUT__TABSET_CONTENT),children:it});nt="top"===e.getTabLocation()?(0,s.jsxs)(s.Fragment,{children:[K,nt]}):(0,s.jsxs)(s.Fragment,{children:[nt,K]});const ot={flexGrow:Math.max(1,1e3*e.getWeight()),minWidth:e.getMinWidth(),minHeight:e.getMinHeight(),maxWidth:e.getMaxWidth(),maxHeight:e.getMaxHeight()};void 0===e.getModel().getMaximizedTabset(i.getWindowId())||e.isMaximized()||(ot.display="none");const rt=(0,s.jsx)("div",{ref:f,className:P(_.FLEXLAYOUT__TABSET_CONTAINER),style:ot,children:(0,s.jsx)("div",{className:P(_.FLEXLAYOUT__TABSET),"data-layout-path":X,children:nt})});return e.isMaximized()&&i.getMainElement()?(0,o.createPortal)((0,s.jsx)("div",{style:{position:"absolute",display:"flex",top:0,left:0,bottom:0,right:0},children:rt}),i.getMainElement()):rt},bt=t=>{const{layout:e,node:i}=t,o=n.useRef(null),r=i.getOrientation()===h.HORZ;n.useLayoutEffect((()=>{i.setRect(e.getBoundingClientRect(o.current))}));const a=[];let d=0;for(const n of i.getChildren())d>0&&a.push((0,s.jsx)(J,{layout:e,node:i,index:d,horizontal:r},"splitter"+d)),n instanceof Y?a.push((0,s.jsx)(bt,{layout:e,node:n},n.getId())):n instanceof W&&a.push((0,s.jsx)(pt,{layout:e,node:n},n.getId())),d++;const l={flexGrow:Math.max(1,1e3*i.getWeight()),minWidth:i.getMinWidth(),minHeight:i.getMinHeight(),maxWidth:i.getMaxWidth(),maxHeight:i.getMaxHeight()};return l.flexDirection=r?"row":"column",(0,s.jsx)("div",{ref:o,className:e.getClassName(_.FLEXLAYOUT__ROW),style:l,children:a})},Et=t=>{const{layout:e,selected:i,node:o,path:r}=t,a=n.useRef(null),d=n.useRef(!0),l=o.getParent(),h=l.getContentRect();n.useLayoutEffect((()=>{const t=o.getMoveableElement();a.current.appendChild(t),o.setMoveableElement(t);const e=()=>{o.saveScrollPosition()};return t.addEventListener("scroll",e),a.current.addEventListener("pointerdown",c),()=>{t.removeEventListener("scroll",e),a.current&&a.current.removeEventListener("pointerdown",c),o.setVisible(!1)}}),[]),n.useEffect((()=>{o.isSelected()&&d.current&&(o.restoreScrollPosition(),d.current=!1)}));const c=()=>{const t=o.getParent();t instanceof W&&(t.isActive()||e.doAction(E.setActiveTabset(t.getId(),e.getWindowId())))};o.setRect(h);const u=e.getClassName,g={};h.styleWithPosition(g);let T=null;if(i){if(o.setVisible(!0),document.hidden&&o.isEnablePopoutOverlay()){const t={};h.styleWithPosition(t),T=(0,s.jsx)("div",{style:t,className:u(_.FLEXLAYOUT__TAB_OVERLAY)})}}else g.display="none",o.setVisible(!1);l instanceof W&&void 0!==o.getModel().getMaximizedTabset(e.getWindowId())&&(l.isMaximized()?g.zIndex=10:g.display="none"),l instanceof G&&(l.isShowing()||(g.display="none"));let p=u(_.FLEXLAYOUT__TAB);return l instanceof G&&(p+=" "+u(_.FLEXLAYOUT__TAB_BORDER),p+=" "+u(_.FLEXLAYOUT__TAB_BORDER_+l.getLocation().getName())),void 0!==o.getContentClassName()&&(p+=" "+o.getContentClassName()),(0,s.jsxs)(s.Fragment,{children:[T,(0,s.jsx)("div",{ref:a,style:g,className:p,"data-layout-path":r})]})};class ft extends n.Component{constructor(t){super(t),d(this,"retry",(()=>{this.setState({hasError:!1})})),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,e){console.debug(t),console.debug(e)}render(){return this.state.hasError?(0,s.jsx)("div",{className:_.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER,children:(0,s.jsx)("div",{className:_.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT,children:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[this.props.message,(0,s.jsx)("p",{children:(0,s.jsx)("button",{onClick:this.retry,children:this.props.retryText})})]})})}):this.props.children}}const mt=n.memo((({layout:t,node:e})=>(0,s.jsx)(ft,{message:t.i18nName(T.Error_rendering_component),retryText:t.i18nName(T.Error_rendering_component_retry),children:t.props.factory(e)})),(function(t,e){return!(e.visible&&(!t.rect.equalSize(e.rect)||t.forceRevision!==e.forceRevision||t.tabsRevision!==e.tabsRevision))}));class Ot extends n.Component{constructor(t){super(t),d(this,"selfRef"),d(this,"revision"),this.selfRef=n.createRef(),this.revision=0}redraw(){this.selfRef.current.redraw("parent "+this.revision)}addTabToTabSet(t,e){return this.selfRef.current.addTabToTabSet(t,e)}addTabWithDragAndDrop(t,e,i){this.selfRef.current.addTabWithDragAndDrop(t,e,i)}moveTabWithDragAndDrop(t,e){this.selfRef.current.moveTabWithDragAndDrop(t,e)}addTabToActiveTabSet(t){return this.selfRef.current.addTabToActiveTabSet(t)}setDragComponent(t,e,i,s){this.selfRef.current.setDragComponent(t,e,i,s)}getRootDiv(){return this.selfRef.current.getRootDiv()}render(){return(0,s.jsx)(Rt,{ref:this.selfRef,...this.props,renderRevision:this.revision++})}}const wt=class t extends n.Component{constructor(e){super(e),d(this,"selfRef"),d(this,"moveablesRef"),d(this,"findBorderBarSizeRef"),d(this,"mainRef"),d(this,"previousModel"),d(this,"orderedTabIds"),d(this,"orderedTabMoveableIds"),d(this,"moveableElementMap",new Map),d(this,"dropInfo"),d(this,"outlineDiv"),d(this,"currentDocument"),d(this,"currentWindow"),d(this,"supportsPopout"),d(this,"popoutURL"),d(this,"icons"),d(this,"resizeObserver"),d(this,"dragEnterCount",0),d(this,"dragging",!1),d(this,"windowId"),d(this,"layoutWindow"),d(this,"mainLayout"),d(this,"isMainWindow"),d(this,"isDraggingOverWindow"),d(this,"styleObserver"),d(this,"popoutWindowName"),d(this,"updateLayoutMetrics",(()=>{if(this.findBorderBarSizeRef.current){const t=this.findBorderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:t})}})),d(this,"onModelChange",(t=>{this.redrawInternal("model change"),this.props.onModelChange&&this.props.onModelChange(this.props.model,t)})),d(this,"updateRect",(()=>{if(this.selfRef.current){const t=c.fromDomRect(this.selfRef.current.getBoundingClientRect());t.equals(this.state.rect)||0===t.width||0===t.height||(this.setState({rect:t}),this.windowId!==j.MAIN_WINDOW_ID&&this.redrawInternal("rect updated"))}})),d(this,"getClassName",(t=>void 0===this.props.classNameMapper?t:this.props.classNameMapper(t))),d(this,"onCloseWindow",(t=>{this.doAction(E.closeWindow(t.windowId))})),d(this,"onSetWindow",((t,e)=>{})),d(this,"showControlInPortal",((t,e)=>{const i=(0,o.createPortal)(t,e);this.setState({portal:i})})),d(this,"hideControlInPortal",(()=>{this.setState({portal:void 0})})),d(this,"getIcons",(()=>this.icons)),d(this,"setDragNode",((e,i)=>{if(t.dragState=new yt(this.mainLayout,"internal",i,void 0,void 0),e.dataTransfer.setData("text/plain","--flexlayout--"),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.dropEffect="move",this.dragEnterCount=0,i instanceof W){let t=!1,s=this.i18nName(T.Move_Tabset);if(i.getChildren().length>0&&(s=this.i18nName(T.Move_Tabs).replace("?",String(i.getChildren().length))),this.props.onRenderDragRect){const n=this.props.onRenderDragRect(s,i,void 0);n&&(this.setDragComponent(e,n,10,10),t=!0)}t||this.setDragComponent(e,s,10,10)}else{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,o=e.clientY-t.top,r=null==i?void 0:i.getParent(),a=r instanceof G&&r.getOrientation()===h.HORZ,d=a?10:n,l=a?10:o;let c=!1;if(this.props.onRenderDragRect){const t=(0,s.jsx)(K,{layout:this,node:i},i.getId()),n=this.props.onRenderDragRect(t,i,void 0);n&&(this.setDragComponent(e,n,d,l),c=!0)}c||(!function(){const t=navigator.userAgent;return t.includes("Safari")&&!t.includes("Chrome")&&!t.includes("Chromium")}()?e.dataTransfer.setDragImage(i.getTabStamp(),d,l):this.setDragComponent(e,(0,s.jsx)(K,{node:i,layout:this}),d,l))}})),d(this,"onDragEnterRaw",(t=>{this.dragEnterCount++,1===this.dragEnterCount&&this.onDragEnter(t)})),d(this,"onDragLeaveRaw",(t=>{this.dragEnterCount--,0===this.dragEnterCount&&this.onDragLeave(t)})),d(this,"onDragEnter",(e=>{if(!t.dragState&&this.props.onExternalDrag){const i=this.props.onExternalDrag(e);if(i){const e=L.fromJson(i.json,this.props.model,!1);t.dragState=new yt(this.mainLayout,"external",e,i.json,i.onDrop)}}if(t.dragState){if(this.windowId!==j.MAIN_WINDOW_ID&&t.dragState.mainLayout===this.mainLayout&&t.dragState.mainLayout.setDraggingOverWindow(!0),t.dragState.mainLayout!==this.mainLayout)return;e.preventDefault(),this.dropInfo=void 0;const i=this.selfRef.current;this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(_.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden";const s=this.props.model.getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${s}s, left ${s}s, width ${s}s, height ${s}s`,i.appendChild(this.outlineDiv),this.dragging=!0,this.showOverlay(!0),this.isDraggingOverWindow||void 0!==this.props.model.getMaximizedTabset(this.windowId)||this.setState({showEdges:this.props.model.isEnableEdgeDock()});const n=this.selfRef.current.getBoundingClientRect();new c(e.clientX-n.left,e.clientY-n.top,1,1).positionElement(this.outlineDiv)}})),d(this,"onDragOver",(e=>{var i;if(this.dragging&&!this.isDraggingOverWindow){e.preventDefault();const s=null==(i=this.selfRef.current)?void 0:i.getBoundingClientRect(),n={x:e.clientX-((null==s?void 0:s.left)??0),y:e.clientY-((null==s?void 0:s.top)??0)};this.checkForBorderToShow(n.x,n.y);const o=this.props.model.findDropTargetNode(this.windowId,t.dragState.dragNode,n.x,n.y);o&&(this.dropInfo=o,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(o.className),o.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))}})),d(this,"onDragLeave",(e=>{this.dragging&&(this.windowId!==j.MAIN_WINDOW_ID&&t.dragState.mainLayout.setDraggingOverWindow(!1),this.clearDragLocal())})),d(this,"onDrop",(e=>{if(this.dragging){e.preventDefault();const i=t.dragState;if(this.dropInfo)if(void 0!==i.dragJson){const t=this.doAction(E.addNode(i.dragJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));void 0!==i.fnNewNodeDropped&&i.fnNewNodeDropped(t,e)}else void 0!==i.dragNode&&this.doAction(E.moveNode(i.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.mainLayout.clearDragMain()}this.dragEnterCount=0})),this.orderedTabIds=[],this.orderedTabMoveableIds=[],this.selfRef=n.createRef(),this.moveablesRef=n.createRef(),this.mainRef=n.createRef(),this.findBorderBarSizeRef=n.createRef(),this.supportsPopout=void 0!==e.supportsPopout?e.supportsPopout:Lt,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons={...At,...e.icons},this.windowId=e.windowId?e.windowId:j.MAIN_WINDOW_ID,this.mainLayout=this.props.mainLayout?this.props.mainLayout:this,this.isDraggingOverWindow=!1,this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.popoutWindowName=this.props.popoutWindowName||"Popout Window",this.state={rect:c.empty(),editingTab:void 0,showEdges:!1,showOverlay:!1,calculatedBorderBarSize:29,layoutRevision:0,forceRevision:0,showHiddenBorder:g.CENTER},this.isMainWindow=this.windowId===j.MAIN_WINDOW_ID}componentDidMount(){if(this.updateRect(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.layoutWindow.window=this.currentWindow,this.layoutWindow.toScreenRectFunction=t=>this.getScreenRect(t),this.resizeObserver=new ResizeObserver((t=>{requestAnimationFrame((()=>{this.updateRect()}))})),this.selfRef.current&&this.resizeObserver.observe(this.selfRef.current),this.isMainWindow)this.props.model.addChangeListener(this.onModelChange),this.updateLayoutMetrics();else{this.currentWindow.addEventListener("resize",(()=>{this.updateRect()}));const t=this.props.mainLayout.getRootDiv(),e=this.selfRef.current;M(t,e),this.styleObserver=new MutationObserver((()=>{M(t,e)&&this.redraw("mutation observer")})),this.styleObserver.observe(t,{attributeFilter:["style"]})}document.addEventListener("visibilitychange",(()=>{for(const[t,e]of this.props.model.getwindowsMap()){e.layout&&this.redraw("visibility change")}}))}componentDidUpdate(){this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.isMainWindow&&(this.props.model!==this.previousModel&&(void 0!==this.previousModel&&this.previousModel.removeChangeListener(this.onModelChange),this.props.model.getwindowsMap().get(this.windowId).layout=this,this.props.model.addChangeListener(this.onModelChange),this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.layoutWindow.toScreenRectFunction=t=>this.getScreenRect(t),this.previousModel=this.props.model,this.tidyMoveablesMap()),this.updateLayoutMetrics())}componentWillUnmount(){var t,e;this.selfRef.current&&(null==(t=this.resizeObserver)||t.unobserve(this.selfRef.current)),this.isMainWindow&&this.props.model.removeChangeListener(this.onModelChange),null==(e=this.styleObserver)||e.disconnect()}render(){if(!this.selfRef.current)return(0,s.jsxs)("div",{ref:this.selfRef,className:this.getClassName(_.FLEXLAYOUT__LAYOUT),children:[(0,s.jsx)("div",{ref:this.moveablesRef,className:this.getClassName(_.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),this.renderMetricsElements()]});const t=this.props.model;t.getRoot(this.windowId).calcMinMaxSize(),t.getRoot(this.windowId).setPaths(""),t.getBorderSet().setPaths();const e=this.renderLayout(),i=this.renderBorders(e),n=this.renderTabs(),o=this.reorderComponents(n,this.orderedTabIds);let r=null,a=null,d=null,l=null;if(this.isMainWindow){r=this.renderWindows(),l=this.renderMetricsElements();const t=this.renderTabMoveables();a=this.reorderComponents(t,this.orderedTabMoveableIds),d=(0,s.jsx)("div",{className:this.getClassName(_.FLEXLAYOUT__LAYOUT_TAB_STAMPS),children:this.renderTabStamps()},"__tabStamps__")}return(0,s.jsxs)("div",{ref:this.selfRef,className:this.getClassName(_.FLEXLAYOUT__LAYOUT),onDragEnter:this.onDragEnterRaw,onDragLeave:this.onDragLeaveRaw,onDragOver:this.onDragOver,onDrop:this.onDrop,children:[(0,s.jsx)("div",{ref:this.moveablesRef,className:this.getClassName(_.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),l,(0,s.jsx)(Tt,{layout:this,show:this.state.showOverlay},"__overlay__"),i,o,a,d,this.state.portal,r]})}renderBorders(t){const e=this.getClassName(_.FLEXLAYOUT__LAYOUT_MAIN),i=this.props.model.getBorderSet().getBorderMap();if(this.isMainWindow&&i.size>0){t=(0,s.jsx)("div",{className:e,ref:this.mainRef,children:t});const n=new Map,o=new Map;for(const[t,e]of g.values){const t=i.get(e);t&&t.isShowing()&&(!t.isAutoHide()||t.isAutoHide()&&(t.getChildren().length>0||this.state.showHiddenBorder===e))&&(n.set(e,(0,s.jsx)(it,{layout:this,border:t,size:this.state.calculatedBorderBarSize})),o.set(e,(0,s.jsx)(Z,{layout:this,border:t,show:-1!==t.getSelected()})))}const r=this.getClassName(_.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER),a=this.getClassName(_.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER);if(this.props.model.getBorderSet().getLayoutHorizontal()){const e=(0,s.jsxs)("div",{className:a,style:{flexDirection:"column"},children:[o.get(g.TOP),(0,s.jsxs)("div",{className:a,style:{flexDirection:"row"},children:[o.get(g.LEFT),t,o.get(g.RIGHT)]}),o.get(g.BOTTOM)]});return(0,s.jsxs)("div",{className:r,style:{flexDirection:"column"},children:[n.get(g.TOP),(0,s.jsxs)("div",{className:a,style:{flexDirection:"row"},children:[n.get(g.LEFT),e,n.get(g.RIGHT)]}),n.get(g.BOTTOM)]})}{const e=(0,s.jsxs)("div",{className:a,style:{flexDirection:"row"},children:[o.get(g.LEFT),(0,s.jsxs)("div",{className:a,style:{flexDirection:"column"},children:[o.get(g.TOP),t,o.get(g.BOTTOM)]}),o.get(g.RIGHT)]});return(0,s.jsxs)("div",{className:r,style:{flexDirection:"row"},children:[n.get(g.LEFT),(0,s.jsxs)("div",{className:a,style:{flexDirection:"column"},children:[n.get(g.TOP),e,n.get(g.BOTTOM)]}),n.get(g.RIGHT)]})}}return(0,s.jsx)("div",{className:e,ref:this.mainRef,style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex"},children:t})}renderLayout(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(bt,{layout:this,node:this.props.model.getRoot(this.windowId)},"__row__"),this.renderEdgeIndicators()]})}renderEdgeIndicators(){const t=[],e=this.icons.edgeArrow;if(this.state.showEdges){const i=this.props.model.getRoot(this.windowId).getRect(),n=Nt,o=vt,r=Nt/2,a=this.getClassName(_.FLEXLAYOUT__EDGE_RECT),d=50;t.push((0,s.jsx)("div",{style:{top:0,left:i.width/2-r,width:n,height:o,borderBottomLeftRadius:d,borderBottomRightRadius:d},className:a+" "+this.getClassName(_.FLEXLAYOUT__EDGE_RECT_TOP),children:(0,s.jsx)("div",{style:{transform:"rotate(180deg)"},children:e})},"North")),t.push((0,s.jsx)("div",{style:{top:i.height/2-r,left:0,width:o,height:n,borderTopRightRadius:d,borderBottomRightRadius:d},className:a+" "+this.getClassName(_.FLEXLAYOUT__EDGE_RECT_LEFT),children:(0,s.jsx)("div",{style:{transform:"rotate(90deg)"},children:e})},"West")),t.push((0,s.jsx)("div",{style:{top:i.height-o,left:i.width/2-r,width:n,height:o,borderTopLeftRadius:d,borderTopRightRadius:d},className:a+" "+this.getClassName(_.FLEXLAYOUT__EDGE_RECT_BOTTOM),children:(0,s.jsx)("div",{children:e})},"South")),t.push((0,s.jsx)("div",{style:{top:i.height/2-r,left:i.width-o,width:o,height:n,borderTopLeftRadius:d,borderBottomLeftRadius:d},className:a+" "+this.getClassName(_.FLEXLAYOUT__EDGE_RECT_RIGHT),children:(0,s.jsx)("div",{style:{transform:"rotate(-90deg)"},children:e})},"East"))}return t}renderWindows(){const e=[];if(this.supportsPopout){const i=this.props.model.getwindowsMap();let n=1;for(const[o,r]of i)o!==j.MAIN_WINDOW_ID&&(e.push((0,s.jsx)(nt,{layout:this,title:this.popoutWindowName+" "+n,layoutWindow:r,url:this.popoutURL+"?id="+o,onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow,children:(0,s.jsx)("div",{className:this.props.popoutClassName,children:(0,s.jsx)(t,{...this.props,windowId:o,mainLayout:this})})},o)),n++)}return e}renderTabMoveables(){const t=new Map;return this.props.model.visitNodes((e=>{if(e instanceof L){const i=e,n=this.getMoveableElement(i.getId());i.setMoveableElement(n);const r=i.isSelected(),a=i.getParent().getContentRect(),d=r||!i.isEnableRenderOnDemand(),l=i.isRendered()||d&&a.width>0&&a.height>0;if(l){const r=i.getId()+(i.isEnableWindowReMount()?i.getWindowId():"");t.set(e.getId(),(0,o.createPortal)((0,s.jsx)(mt,{layout:this,node:i,rect:a,visible:d,forceRevision:this.state.forceRevision,tabsRevision:this.props.renderRevision},r),n,r)),i.setRendered(l)}}})),t}renderTabStamps(){const t=[];return this.props.model.visitNodes((e=>{if(e instanceof L){const i=e;t.push((0,s.jsx)(st,{layout:this,node:i},i.getId()))}})),t}renderTabs(){const t=new Map;return this.props.model.visitWindowNodes(this.windowId,(e=>{if(e instanceof L){const i=e,n=i.isSelected(),o=i.getPath();(i.isRendered()||n||!i.isEnableRenderOnDemand())&&t.set(i.getId(),(0,s.jsx)(Et,{layout:this,path:o,node:i,selected:n},i.getId()))}})),t}renderMetricsElements(){return(0,s.jsx)("div",{ref:this.findBorderBarSizeRef,className:this.getClassName(_.FLEXLAYOUT__BORDER_SIZER),children:"FindBorderBarSize"},"findBorderBarSize")}checkForBorderToShow(t,e){const i=this.getBoundingClientRect(this.mainRef.current),s=i.getCenter(),n=vt,o=Nt/2;let r=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===g.CENTER&&(e>s.y-o&&e<s.y+o||t>s.x-o&&t<s.x+o)&&(r=!0);let a=g.CENTER;r||(t<=i.x+n?a=g.LEFT:t>=i.getRight()-n?a=g.RIGHT:e<=i.y+n?a=g.TOP:e>=i.getBottom()-n&&(a=g.BOTTOM)),a!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:a})}tidyMoveablesMap(){const t=new Map;this.props.model.visitNodes(((e,i)=>{e instanceof L&&t.set(e.getId(),e)}));for(const[e,i]of this.moveableElementMap)t.has(e)||(i.remove(),this.moveableElementMap.delete(e))}reorderComponents(t,e){const i=[],s=new Set;let n=[];for(const o of e)t.get(o)&&(i.push(o),s.add(o));e.splice(0,e.length,...i);for(const[o,r]of t)s.has(o)||e.push(o);return n=e.map((e=>t.get(e))),n}redraw(t){this.mainLayout.setState(((t,e)=>({forceRevision:t.forceRevision+1})))}redrawInternal(t){this.mainLayout.setState(((t,e)=>({layoutRevision:t.layoutRevision+1})))}doAction(t){if(void 0!==this.props.onAction){const e=this.props.onAction(t);return void 0!==e?this.props.model.doAction(e):void 0}return this.props.model.doAction(t)}getBoundingClientRect(t){const e=this.getDomRect();return e?c.getBoundingClientRect(t).relativeTo(e):c.empty()}getMoveableContainer(){return this.moveablesRef.current}getMoveableElement(t){let e=this.moveableElementMap.get(t);return void 0===e&&(e=document.createElement("div"),this.moveablesRef.current.appendChild(e),e.className=_.FLEXLAYOUT__TAB_MOVEABLE,this.moveableElementMap.set(t,e)),e}getMainLayout(){return this.mainLayout}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current?c.fromDomRect(this.selfRef.current.getBoundingClientRect()):c.empty()}getWindowId(){return this.windowId}getRootDiv(){return this.selfRef.current}getMainElement(){return this.mainRef.current}getFactory(){return this.props.factory}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){return this.props.realtimeResize??!1}getPopoutURL(){return this.popoutURL}setEditingTab(t){this.setState({editingTab:t})}getEditingTab(){return this.state.editingTab}getModel(){return this.props.model}getScreenRect(t){const e=t.clone(),i=this.getDomRect();return e.x=this.currentWindow.screenX+this.currentWindow.scrollX+1+i.x+e.x,e.y=this.currentWindow.screenY+this.currentWindow.scrollY+59+i.y+e.y,e.height+=60,e.width+=2,e}addTabToTabSet(t,e){if(void 0!==this.props.model.getNodeById(t)){return this.doAction(E.addNode(e,t,g.CENTER,-1))}}addTabToActiveTabSet(t){const e=this.props.model.getActiveTabset(this.windowId);if(void 0!==e){return this.doAction(E.addNode(t,e.getId(),g.CENTER,-1))}}maximize(t){this.doAction(E.maximizeToggle(t.getId(),this.getWindowId()))}customizeTab(t,e){this.props.onRenderTab&&this.props.onRenderTab(t,e)}customizeTabSet(t,e){this.props.onRenderTabSet&&this.props.onRenderTabSet(t,e)}i18nName(t,e){let i;return this.props.i18nMapper&&(i=this.props.i18nMapper(t,e)),void 0===i&&(i=t+(void 0===e?"":e)),i}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(t,e){this.props.onContextMenu&&this.props.onContextMenu(t,e)}auxMouseClick(t,e){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(t,e)}showOverlay(t){this.setState({showOverlay:t}),x(!t,this.currentDocument)}addTabWithDragAndDrop(e,i,s){const n=L.fromJson(i,this.props.model,!1);t.dragState=new yt(this.mainLayout,"add",n,i,s)}moveTabWithDragAndDrop(t,e){this.setDragNode(t,e)}setDragComponent(t,e,i,n){const o=(0,s.jsx)("div",{style:{position:"unset"},className:this.getClassName(_.FLEXLAYOUT__LAYOUT)+" "+this.getClassName(_.FLEXLAYOUT__DRAG_RECT),children:e}),a=this.currentDocument.createElement("div");a.setAttribute("data-layout-path","/drag-rectangle"),a.style.position="absolute",a.style.left="-10000px",a.style.top="-10000px",this.currentDocument.body.appendChild(a),(0,r.createRoot)(a).render(o),t.dataTransfer.setDragImage(a,i,n),setTimeout((()=>{this.currentDocument.body.removeChild(a)}),0)}setDraggingOverWindow(t){this.isDraggingOverWindow!==t&&(this.outlineDiv&&(this.outlineDiv.style.visibility=t?"hidden":"visible"),t?this.setState({showEdges:!1}):void 0===this.props.model.getMaximizedTabset(this.windowId)&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.isDraggingOverWindow=t)}clearDragMain(){t.dragState=void 0,this.windowId===j.MAIN_WINDOW_ID&&(this.isDraggingOverWindow=!1);for(const[,t]of this.props.model.getwindowsMap())t.layout.clearDragLocal()}clearDragLocal(){this.setState({showEdges:!1}),this.showOverlay(!1),this.dragEnterCount=0,this.dragging=!1,this.outlineDiv&&(this.selfRef.current.removeChild(this.outlineDiv),this.outlineDiv=void 0)}};d(wt,"dragState");let Rt=wt;const At={close:(0,s.jsx)(at,{}),closeTabset:(0,s.jsx)(at,{}),popout:(0,s.jsx)(ct,{}),maximize:(0,s.jsx)(dt,{}),restore:(0,s.jsx)(ut,{}),more:(0,s.jsx)(lt,{}),edgeArrow:(0,s.jsx)(ht,{}),activeTabset:(0,s.jsx)(gt,{})},Lt=N(),Nt=100,vt=10;class yt{constructor(t,e,i,s,n){d(this,"mainLayout"),d(this,"dragSource"),d(this,"dragNode"),d(this,"dragJson"),d(this,"fnNewNodeDropped"),this.mainLayout=t,this.dragSource=e,this.dragNode=i,this.dragJson=s,this.fnNewNodeDropped=n}}}}]);
//# sourceMappingURL=e31c3f77-051765f9ad78f2ea.js.map