"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{41532:function(t,e,i){i.d(e,{Ar:function(){return t_},Hn:function(){return j}});var s,n,o,r=i(63401),a=i(56801),l=i(50682),d=i(26198),h=Object.defineProperty,c=(t,e,i)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,u=(t,e,i)=>c(t,"symbol"!=typeof e?e+"":e,i);let g=class t{constructor(t){u(this,"_name"),this._name=t}static flip(e){return e===t.HORZ?t.VERT:t.HORZ}getName(){return this._name}toString(){return this._name}};u(g,"HORZ",new g("horz")),u(g,"VERT",new g("vert"));class T{constructor(t,e,i,s){u(this,"x"),u(this,"y"),u(this,"width"),u(this,"height"),this.x=t,this.y=e,this.width=i,this.height=s}static empty(){return new T(0,0,0,0)}static fromJson(t){return new T(t.x,t.y,t.width,t.height)}toJson(){return{x:this.x,y:this.y,width:this.width,height:this.height}}snap(t){this.x=Math.round(this.x/t)*t,this.y=Math.round(this.y/t)*t,this.width=Math.round(this.width/t)*t,this.height=Math.round(this.height/t)*t}static getBoundingClientRect(t){let{x:e,y:i,width:s,height:n}=t.getBoundingClientRect();return new T(e,i,s,n)}static getContentRect(t){let e=t.getBoundingClientRect(),i=window.getComputedStyle(t),s=parseFloat(i.paddingLeft),n=parseFloat(i.paddingRight),o=parseFloat(i.paddingTop),r=parseFloat(i.paddingBottom),a=parseFloat(i.borderLeftWidth),l=parseFloat(i.borderRightWidth),d=parseFloat(i.borderTopWidth),h=parseFloat(i.borderBottomWidth),c=e.width-a-s-n-l,u=e.height-d-o-r-h;return new T(e.left+a+s,e.top+d+o,c,u)}static fromDomRect(t){return new T(t.x,t.y,t.width,t.height)}relativeTo(t){return new T(this.x-t.x,this.y-t.y,this.width,this.height)}clone(){return new T(this.x,this.y,this.width,this.height)}equals(t){return this.x===(null==t?void 0:t.x)&&this.y===(null==t?void 0:t.y)&&this.width===(null==t?void 0:t.width)&&this.height===(null==t?void 0:t.height)}equalSize(t){return this.width===(null==t?void 0:t.width)&&this.height===(null==t?void 0:t.height)}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}get bottom(){return this.y+this.height}get right(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(t,e){this.styleWithPosition(t.style,e)}styleWithPosition(t,e="absolute"){return t.left=this.x+"px",t.top=this.y+"px",t.width=Math.max(0,this.width)+"px",t.height=Math.max(0,this.height)+"px",t.position=e,t}contains(t,e){return!!(this.x<=t&&t<=this.getRight()&&this.y<=e&&e<=this.getBottom())}removeInsets(t){return new T(this.x+t.left,this.y+t.top,Math.max(0,this.width-t.left-t.right),Math.max(0,this.height-t.top-t.bottom))}centerInRect(t){this.x=(t.width-this.width)/2,this.y=(t.height-this.height)/2}_getSize(t){let e=this.width;return t===g.VERT&&(e=this.height),e}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}let _=class t{constructor(e,i,s){u(this,"name"),u(this,"orientation"),u(this,"indexPlus"),this.name=e,this.orientation=i,this.indexPlus=s,t.values.set(this.name,this)}static getByName(e){return t.values.get(e)}static getLocation(e,i,s){if(i=(i-e.x)/e.width,s=(s-e.y)/e.height,i>=.25&&i<.75&&s>=.25&&s<.75)return t.CENTER;let n=s>=i,o=s>=1-i;return n?o?t.BOTTOM:t.LEFT:o?t.RIGHT:t.TOP}getName(){return this.name}getOrientation(){return this.orientation}getDockRect(e){return this===t.TOP?new T(e.x,e.y,e.width,e.height/2):this===t.BOTTOM?new T(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===t.LEFT?new T(e.x,e.y,e.width/2,e.height):this===t.RIGHT?new T(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,i){if(this===t.TOP){let t=new T(e.x,e.y,e.width,i),s=new T(e.x,e.y+i,e.width,e.height-i);return{start:t,end:s}}if(this===t.LEFT){let t=new T(e.x,e.y,i,e.height),s=new T(e.x+i,e.y,e.width-i,e.height);return{start:t,end:s}}if(this===t.RIGHT){let t=new T(e.getRight()-i,e.y,i,e.height),s=new T(e.x,e.y,e.width-i,e.height);return{start:t,end:s}}{let t=new T(e.x,e.getBottom()-i,e.width,i),s=new T(e.x,e.y,e.width,e.height-i);return{start:t,end:s}}}reflect(){return this===t.TOP?t.BOTTOM:this===t.LEFT?t.RIGHT:this===t.RIGHT?t.LEFT:t.TOP}toString(){return"(DockLocation: name="+this.name+", orientation="+this.orientation+")"}};u(_,"values",new Map),u(_,"TOP",new _("top",g.VERT,0)),u(_,"BOTTOM",new _("bottom",g.VERT,1)),u(_,"LEFT",new _("left",g.HORZ,0)),u(_,"RIGHT",new _("right",g.HORZ,1)),u(_,"CENTER",new _("center",g.VERT,0));var p=((s=p||{}).Close_Tab="Close",s.Close_Tabset="Close tab set",s.Active_Tabset="Active tab set",s.Move_Tabset="Move tab set",s.Move_Tabs="Move tabs(?)",s.Maximize="Maximize tab set",s.Restore="Restore tab set",s.Popout_Tab="Popout selected tab",s.Overflow_Menu_Tooltip="Hidden tabs",s.Error_rendering_component="Error rendering component",s.Error_rendering_component_retry="Retry",s),b=((n=b||{}).FLEXLAYOUT__BORDER="flexlayout__border",n.FLEXLAYOUT__BORDER_="flexlayout__border_",n.FLEXLAYOUT__BORDER_TAB_CONTENTS="flexlayout__border_tab_contents",n.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",n.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",n.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",n.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",n.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",n.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",n.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",n.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",n.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",n.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",n.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",n.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",n.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",n.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",n.FLEXLAYOUT__BORDER_LEADING="flexlayout__border_leading",n.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",n.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",n.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",n.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",n.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",n.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",n.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",n.FLEXLAYOUT__EDGE_RECT_TOP="flexlayout__edge_rect_top",n.FLEXLAYOUT__EDGE_RECT_LEFT="flexlayout__edge_rect_left",n.FLEXLAYOUT__EDGE_RECT_BOTTOM="flexlayout__edge_rect_bottom",n.FLEXLAYOUT__EDGE_RECT_RIGHT="flexlayout__edge_rect_right",n.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",n.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",n.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",n.FLEXLAYOUT__LAYOUT="flexlayout__layout",n.FLEXLAYOUT__LAYOUT_MOVEABLES="flexlayout__layout_moveables",n.FLEXLAYOUT__LAYOUT_OVERLAY="flexlayout__layout_overlay",n.FLEXLAYOUT__LAYOUT_TAB_STAMPS="flexlayout__layout_tab_stamps",n.FLEXLAYOUT__LAYOUT_MAIN="flexlayout__layout_main",n.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER="flexlayout__layout_border_container",n.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER="flexlayout__layout_border_container_inner",n.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",n.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",n.FLEXLAYOUT__SPLITTER="flexlayout__splitter",n.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",n.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",n.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",n.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",n.FLEXLAYOUT__SPLITTER_HANDLE="flexlayout__splitter_handle",n.FLEXLAYOUT__SPLITTER_HANDLE_HORZ="flexlayout__splitter_handle_horz",n.FLEXLAYOUT__SPLITTER_HANDLE_VERT="flexlayout__splitter_handle_vert",n.FLEXLAYOUT__ROW="flexlayout__row",n.FLEXLAYOUT__TAB="flexlayout__tab",n.FLEXLAYOUT__TAB_POSITION="flexlayout__tab_position",n.FLEXLAYOUT__TAB_MOVEABLE="flexlayout__tab_moveable",n.FLEXLAYOUT__TAB_OVERLAY="flexlayout__tab_overlay",n.FLEXLAYOUT__TABSET="flexlayout__tabset",n.FLEXLAYOUT__TABSET_CONTAINER="flexlayout__tabset_container",n.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",n.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",n.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",n.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",n.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",n.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",n.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",n.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",n.FLEXLAYOUT__TABSET_LEADING="flexlayout__tabset_leading",n.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",n.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",n.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",n.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",n.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",n.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",n.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",n.FLEXLAYOUT__TAB_BUTTON_STRETCH="flexlayout__tab_button_stretch",n.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",n.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",n.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",n.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",n.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",n.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",n.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",n.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",n.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",n.FLEXLAYOUT__TAB_TOOLBAR_ICON="flexlayout__tab_toolbar_icon",n.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",n.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",n.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",n.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",n.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",n.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",n.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED="flexlayout__popup_menu_item--selected",n.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",n.FLEXLAYOUT__MINI_SCROLLBAR="flexlayout__mini_scrollbar",n.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER="flexlayout__mini_scrollbar_container",n);class E{constructor(t,e){u(this,"type"),u(this,"data"),this.type=t,this.data=e}}let f=class t{static addNode(e,i,s,n,o){return new E(t.ADD_NODE,{json:e,toNode:i,location:s.getName(),index:n,select:o})}static moveNode(e,i,s,n,o){return new E(t.MOVE_NODE,{fromNode:e,toNode:i,location:s.getName(),index:n,select:o})}static deleteTab(e){return new E(t.DELETE_TAB,{node:e})}static deleteTabset(e){return new E(t.DELETE_TABSET,{node:e})}static renameTab(e,i){return new E(t.RENAME_TAB,{node:e,text:i})}static selectTab(e){return new E(t.SELECT_TAB,{tabNode:e})}static setActiveTabset(e,i){return new E(t.SET_ACTIVE_TABSET,{tabsetNode:e,windowId:i})}static adjustWeights(e,i){return new E(t.ADJUST_WEIGHTS,{nodeId:e,weights:i})}static adjustBorderSplit(e,i){return new E(t.ADJUST_BORDER_SPLIT,{node:e,pos:i})}static maximizeToggle(e,i){return new E(t.MAXIMIZE_TOGGLE,{node:e,windowId:i})}static updateModelAttributes(e){return new E(t.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,i){return new E(t.UPDATE_NODE_ATTRIBUTES,{node:e,json:i})}static popoutTab(e){return new E(t.POPOUT_TAB,{node:e})}static popoutTabset(e){return new E(t.POPOUT_TABSET,{node:e})}static closeWindow(e){return new E(t.CLOSE_WINDOW,{windowId:e})}static createWindow(e,i){return new E(t.CREATE_WINDOW,{layout:e,rect:i})}};u(f,"ADD_NODE","FlexLayout_AddNode"),u(f,"MOVE_NODE","FlexLayout_MoveNode"),u(f,"DELETE_TAB","FlexLayout_DeleteTab"),u(f,"DELETE_TABSET","FlexLayout_DeleteTabset"),u(f,"RENAME_TAB","FlexLayout_RenameTab"),u(f,"SELECT_TAB","FlexLayout_SelectTab"),u(f,"SET_ACTIVE_TABSET","FlexLayout_SetActiveTabset"),u(f,"ADJUST_WEIGHTS","FlexLayout_AdjustWeights"),u(f,"ADJUST_BORDER_SPLIT","FlexLayout_AdjustBorderSplit"),u(f,"MAXIMIZE_TOGGLE","FlexLayout_MaximizeToggle"),u(f,"UPDATE_MODEL_ATTRIBUTES","FlexLayout_UpdateModelAttributes"),u(f,"UPDATE_NODE_ATTRIBUTES","FlexLayout_UpdateNodeAttributes"),u(f,"POPOUT_TAB","FlexLayout_PopoutTab"),u(f,"POPOUT_TABSET","FlexLayout_PopoutTabset"),u(f,"CLOSE_WINDOW","FlexLayout_CloseWindow"),u(f,"CREATE_WINDOW","FlexLayout_CreateWindow");class m{constructor(t,e,i,s){u(this,"name"),u(this,"alias"),u(this,"modelName"),u(this,"pairedAttr"),u(this,"pairedType"),u(this,"defaultValue"),u(this,"alwaysWriteJson"),u(this,"type"),u(this,"required"),u(this,"fixed"),u(this,"description"),this.name=t,this.alias=void 0,this.modelName=e,this.defaultValue=i,this.alwaysWriteJson=s,this.required=!1,this.fixed=!1,this.type="any"}setType(t){return this.type=t,this}setAlias(t){return this.alias=t,this}setDescription(t){this.description=t}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}setpairedAttr(t){this.pairedAttr=t}setPairedType(t){this.pairedType=t}}u(m,"NUMBER","number"),u(m,"STRING","string"),u(m,"BOOLEAN","boolean");class O{constructor(){u(this,"attributes"),u(this,"nameToAttribute"),this.attributes=[],this.nameToAttribute=new Map}addWithAll(t,e,i,s){let n=new m(t,e,i,s);return this.attributes.push(n),this.nameToAttribute.set(t,n),n}addInherited(t,e){return this.addWithAll(t,e,void 0,!1)}add(t,e,i){return this.addWithAll(t,void 0,e,i)}getAttributes(){return this.attributes}getModelName(t){let e=this.nameToAttribute.get(t);if(void 0!==e)return e.modelName}toJson(t,e){for(let i of this.attributes){let s=e[i.name];(i.alwaysWriteJson||s!==i.defaultValue)&&(t[i.name]=s)}}fromJson(t,e){for(let i of this.attributes){let s=t[i.name];void 0===s&&i.alias&&(s=t[i.alias]),void 0===s?e[i.name]=i.defaultValue:e[i.name]=s}}update(t,e){for(let i of this.attributes)if(Object.prototype.hasOwnProperty.call(t,i.name)){let s=t[i.name];void 0===s?delete e[i.name]:e[i.name]=s}}setDefaults(t){for(let e of this.attributes)t[e.name]=e.defaultValue}pairAttributes(t,e){for(let i of e.attributes)if(i.modelName&&this.nameToAttribute.has(i.modelName)){let e=this.nameToAttribute.get(i.modelName);e.setpairedAttr(i),i.setpairedAttr(e),e.setPairedType(t)}}toTypescriptInterface(t,e){var i,s;let n=[],o=this.attributes.sort((t,e)=>t.name.localeCompare(e.name));n.push("export interface I"+t+"Attributes {");for(let t=0;t<o.length;t++){let r,a;let l=o[t],d=l.type,h=l;void 0!==h.defaultValue?r=h.defaultValue:void 0!==h.modelName&&void 0!==e&&void 0!==e.nameToAttribute.get(h.modelName)&&(a=h.modelName,r=(h=e.nameToAttribute.get(a)).defaultValue,d=h.type);let c=JSON.stringify(r),u=h.required?"":"?",g="	/**\n	  ";l.description?g+=l.description:l.pairedType&&(null==(i=l.pairedAttr)?void 0:i.description)&&(g+=`Value for ${l.pairedType} attribute ${l.pairedAttr.name} if not overridden

	  `+(null==(s=l.pairedAttr)?void 0:s.description)),g+="\n\n	  ",l.fixed?g+=`Fixed value: ${c}`:a?g+=`Default: inherited from Global attribute ${l.modelName} (default ${c})`:g+=`Default: ${c}`,g+="\n	 */",n.push(g),n.push("	"+l.name+u+": "+d+";\n")}return n.push("}"),n.join("\n")}}class A{constructor(t,e,i,s,n){u(this,"node"),u(this,"rect"),u(this,"location"),u(this,"index"),u(this,"className"),this.node=t,this.rect=e,this.location=i,this.index=s,this.className=n}}class R{constructor(t){u(this,"borders"),u(this,"borderMap"),u(this,"layoutHorizontal"),this.borders=[],this.borderMap=new Map,this.layoutHorizontal=!0}static fromJson(t,e){let i=new R(e);for(let s of(i.borders=t.map(t=>G.fromJson(t,e)),i.borders))i.borderMap.set(s.getLocation(),s);return i}toJson(){return this.borders.map(t=>t.toJson())}getLayoutHorizontal(){return this.layoutHorizontal}getBorders(){return this.borders}getBorderMap(){return this.borderMap}forEachNode(t){for(let e of this.borders)for(let i of(t(e,0),e.getChildren()))i.forEachNode(t,1)}setPaths(){for(let t of this.borders){let e="/border/"+t.getLocation().getName();t.setPath(e);let i=0;for(let s of t.getChildren())s.setPath(e+"/t"+i),i++}}findDropTargetNode(t,e,i){for(let s of this.borders)if(s.isShowing()){let n=s.canDrop(t,e,i);if(void 0!==n)return n}}}class L{constructor(t){u(this,"model"),u(this,"attributes"),u(this,"parent"),u(this,"children"),u(this,"rect"),u(this,"path"),u(this,"listeners"),this.model=t,this.attributes={},this.children=[],this.rect=T.empty(),this.listeners=new Map,this.path=""}getId(){let t=this.attributes.id;return void 0!==t||(t=this.model.nextUniqueId(),this.setId(t)),t}getModel(){return this.model}getType(){return this.attributes.type}getParent(){return this.parent}getChildren(){return this.children}getRect(){return this.rect}getPath(){return this.path}getOrientation(){return void 0===this.parent?this.model.isRootOrientationVertical()?g.VERT:g.HORZ:g.flip(this.parent.getOrientation())}setEventListener(t,e){this.listeners.set(t,e)}removeEventListener(t){this.listeners.delete(t)}setId(t){this.attributes.id=t}fireEvent(t,e){this.listeners.has(t)&&this.listeners.get(t)(e)}getAttr(t){let e=this.attributes[t];if(void 0===e){let i=this.getAttributeDefinitions().getModelName(t);void 0!==i&&(e=this.model.getAttribute(i))}return e}forEachNode(t,e){for(let i of(t(this,e),e++,this.children))i.forEachNode(t,e)}setPaths(t){let e=0;for(let i of this.children){let s=t;"row"===i.getType()?s+="/r"+e:"tabset"===i.getType()?s+="/ts"+e:"tab"===i.getType()&&(s+="/t"+e),i.path=s,i.setPaths(s),e++}}setParent(t){this.parent=t}setRect(t){this.rect=t}setPath(t){this.path=t}setWeight(t){this.attributes.weight=t}setSelected(t){this.attributes.selected=t}findDropTargetNode(t,e,i,s){let n;if(this.rect.contains(i,s)){if(void 0!==this.model.getMaximizedTabset(t))n=this.model.getMaximizedTabset(t).canDrop(e,i,s);else if(void 0===(n=this.canDrop(e,i,s))&&0!==this.children.length){for(let o of this.children)if(void 0!==(n=o.findDropTargetNode(t,e,i,s)))break}}return n}canDrop(t,e,i){}canDockInto(t,e){if(null!=e){if(e.location===_.CENTER&&!1===e.node.isEnableDrop()||e.location===_.CENTER&&"tabset"===t.getType()&&void 0!==t.getName()||e.location!==_.CENTER&&!1===e.node.isEnableDivide())return!1;if(this.model.getOnAllowDrop())return this.model.getOnAllowDrop()(t,e)}return!0}removeChild(t){let e=this.children.indexOf(t);return -1!==e&&this.children.splice(e,1),e}addChild(t,e){return null!=e?this.children.splice(e,0,t):(this.children.push(t),e=this.children.length-1),t.parent=this,e}removeAll(){this.children=[]}styleWithPosition(t){return null==t&&(t={}),this.rect.styleWithPosition(t)}isEnableDivide(){return!0}toAttributeString(){return JSON.stringify(this.attributes,void 0,"	")}}let w=class t extends L{constructor(e,i,s=!0){super(e),u(this,"tabRect",T.empty()),u(this,"moveableElement"),u(this,"tabStamp"),u(this,"renderedName"),u(this,"extra"),u(this,"visible"),u(this,"rendered"),u(this,"scrollTop"),u(this,"scrollLeft"),this.extra={},this.moveableElement=null,this.tabStamp=null,this.rendered=!1,this.visible=!1,t.attributeDefinitions.fromJson(i,this.attributes),!0===s&&e.addNode(this)}static fromJson(e,i,s=!0){let n=new t(i,e,s);return n}getName(){return this.getAttr("name")}getHelpText(){return this.getAttr("helpText")}getComponent(){return this.getAttr("component")}getWindowId(){return this.parent instanceof W?this.parent.getWindowId():j.MAIN_WINDOW_ID}getWindow(){let t=this.model.getwindowsMap().get(this.getWindowId());if(t)return t.window}getConfig(){return this.attributes.config}getExtraData(){return this.extra}isPoppedOut(){return this.getWindowId()!==j.MAIN_WINDOW_ID}isSelected(){return this.getParent().getSelectedNode()===this}getIcon(){return this.getAttr("icon")}isEnableClose(){return this.getAttr("enableClose")}getCloseType(){return this.getAttr("closeType")}isEnablePopout(){return this.getAttr("enablePopout")}isEnablePopoutIcon(){return this.getAttr("enablePopoutIcon")}isEnablePopoutOverlay(){return this.getAttr("enablePopoutOverlay")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableRename(){return this.getAttr("enableRename")}isEnableWindowReMount(){return this.getAttr("enableWindowReMount")}getClassName(){return this.getAttr("className")}getContentClassName(){return this.getAttr("contentClassName")}getTabSetClassName(){return this.getAttr("tabsetClassName")}isEnableRenderOnDemand(){return this.getAttr("enableRenderOnDemand")}getMinWidth(){return this.getAttr("minWidth")}getMinHeight(){return this.getAttr("minHeight")}getMaxWidth(){return this.getAttr("maxWidth")}getMaxHeight(){return this.getAttr("maxHeight")}isVisible(){return this.visible}toJson(){let e={};return t.attributeDefinitions.toJson(e,this.attributes),e}saveScrollPosition(){this.moveableElement&&(this.scrollLeft=this.moveableElement.scrollLeft,this.scrollTop=this.moveableElement.scrollTop)}restoreScrollPosition(){this.scrollTop&&requestAnimationFrame(()=>{this.moveableElement&&this.scrollTop&&(this.moveableElement.scrollTop=this.scrollTop,this.moveableElement.scrollLeft=this.scrollLeft)})}setRect(t){t.equals(this.rect)||(this.fireEvent("resize",{rect:t}),this.rect=t)}setVisible(t){t!==this.visible&&(this.visible=t,this.fireEvent("visibility",{visible:t}))}getScrollTop(){return this.scrollTop}setScrollTop(t){this.scrollTop=t}getScrollLeft(){return this.scrollLeft}setScrollLeft(t){this.scrollLeft=t}isRendered(){return this.rendered}setRendered(t){this.rendered=t}getTabRect(){return this.tabRect}setTabRect(t){this.tabRect=t}getTabStamp(){return this.tabStamp}setTabStamp(t){this.tabStamp=t}getMoveableElement(){return this.moveableElement}setMoveableElement(t){this.moveableElement=t}setRenderedName(t){this.renderedName=t}getNameForOverflowMenu(){let t=this.getAttr("altName");return void 0!==t?t:this.renderedName}setName(t){this.attributes.name=t}delete(){this.parent.remove(this),this.fireEvent("close",{})}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return t.attributeDefinitions}setBorderWidth(t){this.attributes.borderWidth=t}setBorderHeight(t){this.attributes.borderHeight=t}static getAttributeDefinitions(){return t.attributeDefinitions}static createAttributeDefinitions(){let e=new O;return e.add("type",t.TYPE,!0).setType(m.STRING).setFixed(),e.add("id",void 0).setType(m.STRING).setDescription("the unique id of the tab, if left undefined a uuid will be assigned"),e.add("name","[Unnamed Tab]").setType(m.STRING).setDescription("name of tab to be displayed in the tab button"),e.add("altName",void 0).setType(m.STRING).setDescription("if there is no name specifed then this value will be used in the overflow menu"),e.add("helpText",void 0).setType(m.STRING).setDescription("An optional help text for the tab to be displayed upon tab hover."),e.add("component",void 0).setType(m.STRING).setDescription("string identifying which component to run (for factory)"),e.add("config",void 0).setType("any").setDescription("a place to hold json config for the hosted component"),e.add("tabsetClassName",void 0).setType(m.STRING).setDescription("class applied to parent tabset when this is the only tab and it is stretched to fill the tabset"),e.add("enableWindowReMount",!1).setType(m.BOOLEAN).setDescription("if enabled the tab will re-mount when popped out/in"),e.addInherited("enableClose","tabEnableClose").setType(m.BOOLEAN).setDescription("allow user to close tab via close button"),e.addInherited("closeType","tabCloseType").setType("ICloseType").setDescription("see values in ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(m.BOOLEAN).setDescription("allow user to drag tab to new location"),e.addInherited("enableRename","tabEnableRename").setType(m.BOOLEAN).setDescription("allow user to rename tabs by double clicking"),e.addInherited("className","tabClassName").setType(m.STRING).setDescription("class applied to tab button"),e.addInherited("contentClassName","tabContentClassName").setType(m.STRING).setDescription("class applied to tab content"),e.addInherited("icon","tabIcon").setType(m.STRING).setDescription("the tab icon"),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(m.BOOLEAN).setDescription("whether to avoid rendering component until tab is visible"),e.addInherited("enablePopout","tabEnablePopout").setType(m.BOOLEAN).setAlias("enableFloat").setDescription("enable popout (in popout capable browser)"),e.addInherited("enablePopoutIcon","tabEnablePopoutIcon").setType(m.BOOLEAN).setDescription("whether to show the popout icon in the tabset header if this tab enables popouts"),e.addInherited("enablePopoutOverlay","tabEnablePopoutOverlay").setType(m.BOOLEAN).setDescription(`if this tab will not work correctly in a popout window when the main window is backgrounded (inactive)
            then enabling this option will gray out this tab`),e.addInherited("borderWidth","tabBorderWidth").setType(m.NUMBER).setDescription("width when added to border, -1 will use border size"),e.addInherited("borderHeight","tabBorderHeight").setType(m.NUMBER).setDescription("height when added to border, -1 will use border size"),e.addInherited("minWidth","tabMinWidth").setType(m.NUMBER).setDescription("the min width of this tab"),e.addInherited("minHeight","tabMinHeight").setType(m.NUMBER).setDescription("the min height of this tab"),e.addInherited("maxWidth","tabMaxWidth").setType(m.NUMBER).setDescription("the max width of this tab"),e.addInherited("maxHeight","tabMaxHeight").setType(m.NUMBER).setDescription("the max height of this tab"),e}};function N(){let t="undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches;return t}function v(t,e,i){let s;let n=e.getName(),o=e.getName();void 0===i&&(i=0),void 0===s&&void 0!==e.getIcon()&&(s=0!==i?(0,r.jsx)("img",{style:{width:"1em",height:"1em",transform:"rotate("+i+"deg)"},src:e.getIcon(),alt:"leadingContent"}):(0,r.jsx)("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));let a={leading:s,content:n,name:o,buttons:[]};return t.customizeTab(e,a),e.setRenderedName(a.name),a}function x(t){let e=!1;return t.nativeEvent instanceof MouseEvent&&(0!==t.nativeEvent.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)&&(e=!0),e}function y(t,e){let i=[...D("iframe",e),...D("webview",e)];for(let e of i)e.style.pointerEvents=t?"auto":"none"}function D(t,e){return[...e.getElementsByTagName(t)]}function S(t,e,i,s,n){e.preventDefault();let o=t=>{t.preventDefault(),i(t.clientX,t.clientY)},r=t=>{t.preventDefault(),n()},a=()=>{t.removeEventListener("pointermove",o),t.removeEventListener("pointerup",a),t.removeEventListener("pointercancel",r),s()};t.addEventListener("pointermove",o),t.addEventListener("pointerup",a),t.addEventListener("pointercancel",r)}function I(t){if(t instanceof w)return t.isEnablePopout();if(t instanceof W){for(let e of t.getChildren())if(!1===e.isEnablePopout())return!1;return!0}return!1}function M(t,e){let i=t.getAttribute("style"),s=e.getAttribute("style");return i!==s&&(i?e.setAttribute("style",i):e.removeAttribute("style"),!0)}function B(t,e){if(void 0!==t&&(t instanceof W||t instanceof G)){let i=t.getSelected();-1!==i&&(e===i&&t.getChildren().length>0?e>=t.getChildren().length&&t.setSelected(t.getChildren().length-1):e<i?t.setSelected(i-1):e>i||t.setSelected(-1))}}function C(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}u(w,"TYPE","tab"),u(w,"attributeDefinitions",w.createAttributeDefinitions());let U=class t extends L{constructor(e,i){super(e),u(this,"tabStripRect",T.empty()),u(this,"contentRect",T.empty()),u(this,"calculatedMinHeight"),u(this,"calculatedMinWidth"),u(this,"calculatedMaxHeight"),u(this,"calculatedMaxWidth"),this.calculatedMinHeight=0,this.calculatedMinWidth=0,this.calculatedMaxHeight=0,this.calculatedMaxWidth=0,t.attributeDefinitions.fromJson(i,this.attributes),e.addNode(this)}static fromJson(e,i,s){let n=new t(i,e);if(null!=e.children)for(let t of e.children){let e=w.fromJson(t,i);n.addChild(e)}return 0===n.children.length&&n.setSelected(-1),e.maximized&&!0===e.maximized&&(s.maximizedTabSet=n),e.active&&!0===e.active&&(s.activeTabSet=n),n}getName(){return this.getAttr("name")}isEnableActiveIcon(){return this.getAttr("enableActiveIcon")}getSelected(){let t=this.attributes.selected;return void 0!==t?t:-1}getSelectedNode(){let t=this.getSelected();if(-1!==t)return this.children[t]}getWeight(){return this.getAttr("weight")}getAttrMinWidth(){return this.getAttr("minWidth")}getAttrMinHeight(){return this.getAttr("minHeight")}getMinWidth(){return this.calculatedMinWidth}getMinHeight(){return this.calculatedMinHeight}getMinSize(t){return t===g.HORZ?this.getMinWidth():this.getMinHeight()}getAttrMaxWidth(){return this.getAttr("maxWidth")}getAttrMaxHeight(){return this.getAttr("maxHeight")}getMaxWidth(){return this.calculatedMaxWidth}getMaxHeight(){return this.calculatedMaxHeight}getMaxSize(t){return t===g.HORZ?this.getMaxWidth():this.getMaxHeight()}getConfig(){return this.attributes.config}isMaximized(){return this.model.getMaximizedTabset(this.getWindowId())===this}isActive(){return this.model.getActiveTabset(this.getWindowId())===this}isEnableDeleteWhenEmpty(){return this.getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this.getAttr("enableDrop")}isEnableTabWrap(){return this.getAttr("enableTabWrap")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableDivide(){return this.getAttr("enableDivide")}isEnableMaximize(){return this.getAttr("enableMaximize")}isEnableClose(){return this.getAttr("enableClose")}isEnableSingleTabStretch(){return this.getAttr("enableSingleTabStretch")}isEnableTabStrip(){return this.getAttr("enableTabStrip")}isAutoSelectTab(){return this.getAttr("autoSelectTab")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}getClassNameTabStrip(){return this.getAttr("classNameTabStrip")}getTabLocation(){return this.getAttr("tabLocation")}toJson(){let e={};return t.attributeDefinitions.toJson(e,this.attributes),e.children=this.children.map(t=>t.toJson()),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}calcMinMaxSize(){for(let t of(this.calculatedMinHeight=this.getAttrMinHeight(),this.calculatedMinWidth=this.getAttrMinWidth(),this.calculatedMaxHeight=this.getAttrMaxHeight(),this.calculatedMaxWidth=this.getAttrMaxWidth(),this.children)){let e=t;this.calculatedMinWidth=Math.max(this.calculatedMinWidth,e.getMinWidth()),this.calculatedMinHeight=Math.max(this.calculatedMinHeight,e.getMinHeight()),this.calculatedMaxWidth=Math.min(this.calculatedMaxWidth,e.getMaxWidth()),this.calculatedMaxHeight=Math.min(this.calculatedMaxHeight,e.getMaxHeight())}this.calculatedMinHeight+=this.tabStripRect.height,this.calculatedMaxHeight+=this.tabStripRect.height}canMaximize(){return!!this.isEnableMaximize()&&(this.getModel().getMaximizedTabset(this.getWindowId())===this||this.getParent()!==this.getModel().getRoot(this.getWindowId())||1!==this.getModel().getRoot(this.getWindowId()).getChildren().length)}setContentRect(t){this.contentRect=t}getContentRect(){return this.contentRect}setTabStripRect(t){this.tabStripRect=t}setWeight(t){this.attributes.weight=t}setSelected(t){this.attributes.selected=t}getWindowId(){return this.parent.getWindowId()}canDrop(t,e,i){let s;if(t===this){let t=_.CENTER,e=this.tabStripRect;s=new A(this,e,t,-1,b.FLEXLAYOUT__OUTLINE_RECT)}else if(this.getWindowId()!==j.MAIN_WINDOW_ID&&!I(t))return;else if(this.contentRect.contains(e,i)){let t=_.CENTER;void 0===this.model.getMaximizedTabset(this.parent.getWindowId())&&(t=_.getLocation(this.contentRect,e,i));let n=t.getDockRect(this.rect);s=new A(this,n,t,-1,b.FLEXLAYOUT__OUTLINE_RECT)}else if(null!=this.tabStripRect&&this.tabStripRect.contains(e,i)){let t,n,o;if(0===this.children.length)n=(t=this.tabStripRect.clone()).y+3,o=t.height-4,t.width=2;else{let r=this.children[0];n=(t=r.getTabRect()).y,o=t.height;let a=this.tabStripRect.x,l=0;for(let o=0;o<this.children.length;o++){if((t=(r=this.children[o]).getTabRect()).y!==n&&(n=t.y,a=this.tabStripRect.x),l=t.x+t.width/2,a<=e&&e<l&&t.y<i&&i<t.getBottom()){let e=_.CENTER,i=new T(t.x-2,t.y,3,t.height);if(!(this.rect.x<t.x&&t.x<this.rect.getRight()))return;s=new A(this,i,e,o,b.FLEXLAYOUT__OUTLINE_RECT);break}a=l}}if(null==s&&t.getRight()<this.rect.getRight()){let e=_.CENTER,i=new T(t.getRight()-2,n,3,o);s=new A(this,i,e,this.children.length,b.FLEXLAYOUT__OUTLINE_RECT)}}if(t.canDockInto(t,s))return s}delete(){this.parent.removeChild(this)}remove(t){let e=this.removeChild(t);this.model.tidy(),B(this,e)}drop(e,i,s,n){if(this===e)return;let o=e.getParent(),r=0;if(void 0!==o&&(r=o.removeChild(e),o instanceof G&&o.getSelected()===r?o.setSelected(-1):B(o,r)),e instanceof w&&o===this&&r<s&&s>0&&s--,i===_.CENTER){let t=s;if(-1===t&&(t=this.children.length),e instanceof w)this.addChild(e,t),(n||!1!==n&&this.isAutoSelectTab())&&this.setSelected(t);else if(e instanceof Y)e.forEachNode((e,i)=>{e instanceof w&&(this.addChild(e,t),t++)},0);else{for(let i=0;i<e.getChildren().length;i++){let s=e.getChildren()[i];this.addChild(s,t),t++}-1===this.getSelected()&&this.children.length>0&&this.setSelected(0)}this.model.setActiveTabset(this,this.parent.getWindowId())}else{let s=e;if(e instanceof w){let i=this.model.getOnCreateTabSet();(s=new t(this.model,i?i(e):{})).addChild(e),o=s}else if(e instanceof Y){let t=this.getParent();if(e.getOrientation()===t.getOrientation()&&(i.getOrientation()===t.getOrientation()||i===_.CENTER)){let t=new Y(this.model,this.getWindowId(),{});t.addChild(e),s=t}}else s=e;let n=this.parent,r=n.getChildren().indexOf(this);if(n.getOrientation()===i.orientation)s.setWeight(this.getWeight()/2),this.setWeight(this.getWeight()/2),n.addChild(s,r+i.indexPlus);else{let t=new Y(this.model,this.getWindowId(),{});t.setWeight(this.getWeight()),t.addChild(this),this.setWeight(50),s.setWeight(50),t.addChild(s,i.indexPlus),n.removeChild(this),n.addChild(t,r)}s instanceof t&&this.model.setActiveTabset(s,this.getWindowId())}this.model.tidy()}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return t.attributeDefinitions}static getAttributeDefinitions(){return t.attributeDefinitions}static createAttributeDefinitions(){let e=new O;return e.add("type",t.TYPE,!0).setType(m.STRING).setFixed(),e.add("id",void 0).setType(m.STRING).setDescription("the unique id of the tab set, if left undefined a uuid will be assigned"),e.add("weight",100).setType(m.NUMBER).setDescription("relative weight for sizing of this tabset in parent row"),e.add("selected",0).setType(m.NUMBER).setDescription("index of selected/visible tab in tabset"),e.add("name",void 0).setType(m.STRING),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty").setDescription("whether to delete this tabset when is has no tabs"),e.addInherited("enableDrop","tabSetEnableDrop").setDescription("allow user to drag tabs into this tabset"),e.addInherited("enableDrag","tabSetEnableDrag").setDescription("allow user to drag tabs out this tabset"),e.addInherited("enableDivide","tabSetEnableDivide").setDescription("allow user to drag tabs to region of this tabset, splitting into new tabset"),e.addInherited("enableMaximize","tabSetEnableMaximize").setDescription("allow user to maximize tabset to fill view via maximize button"),e.addInherited("enableClose","tabSetEnableClose").setDescription("allow user to close tabset via a close button"),e.addInherited("enableSingleTabStretch","tabSetEnableSingleTabStretch").setDescription("if the tabset has only a single tab then stretch the single tab to fill area and display in a header style"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip").setDescription("a class name to apply to the tab strip"),e.addInherited("enableTabStrip","tabSetEnableTabStrip").setDescription("enable tab strip and allow multiple tabs in this tabset"),e.addInherited("minWidth","tabSetMinWidth").setDescription("minimum width (in px) for this tabset"),e.addInherited("minHeight","tabSetMinHeight").setDescription("minimum height (in px) for this tabset"),e.addInherited("maxWidth","tabSetMaxWidth").setDescription("maximum width (in px) for this tabset"),e.addInherited("maxHeight","tabSetMaxHeight").setDescription("maximum height (in px) for this tabset"),e.addInherited("enableTabWrap","tabSetEnableTabWrap").setDescription("wrap tabs onto multiple lines"),e.addInherited("tabLocation","tabSetTabLocation").setDescription("the location of the tabs either top or bottom"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(m.BOOLEAN).setDescription("whether to select new/moved tabs in tabset"),e.addInherited("enableActiveIcon","tabSetEnableActiveIcon").setType(m.BOOLEAN).setDescription("whether the active icon (*) should be displayed when the tabset is active"),e.addInherited("enableTabScrollbar","tabSetEnableTabScrollbar").setType(m.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};u(U,"TYPE","tabset"),u(U,"attributeDefinitions",U.createAttributeDefinitions());let W=U,F=class t extends L{constructor(e,i,s){super(e),u(this,"windowId"),u(this,"minHeight"),u(this,"minWidth"),u(this,"maxHeight"),u(this,"maxWidth"),this.windowId=i,this.minHeight=H,this.minWidth=H,this.maxHeight=X,this.maxWidth=X,t.attributeDefinitions.fromJson(s,this.attributes),this.normalizeWeights(),e.addNode(this)}static fromJson(e,i,s){let n=new t(i,s.windowId,e);if(null!=e.children)for(let o of e.children)if(o.type===W.TYPE){let t=W.fromJson(o,i,s);n.addChild(t)}else{let e=t.fromJson(o,i,s);n.addChild(e)}return n}getWeight(){return this.attributes.weight}toJson(){let e={};for(let i of(t.attributeDefinitions.toJson(e,this.attributes),e.children=[],this.children))e.children.push(i.toJson());return e}getWindowId(){return this.windowId}setWindowId(t){this.windowId=t}setWeight(t){this.attributes.weight=t}getSplitterBounds(t){let e=this.getOrientation()===g.HORZ,i=this.getChildren(),s=this.model.getSplitterSize(),n=i[0].getRect(),o=i[i.length-1].getRect(),r=e?[n.x,o.getRight()]:[n.y,o.getBottom()],a=e?[n.x,o.getRight()]:[n.y,o.getBottom()];for(let n=0;n<t;n++){let t=i[n];r[0]+=e?t.getMinWidth():t.getMinHeight(),a[0]+=e?t.getMaxWidth():t.getMaxHeight(),n>0&&(r[0]+=s,a[0]+=s)}for(let n=i.length-1;n>=t;n--){let t=i[n];r[1]-=(e?t.getMinWidth():t.getMinHeight())+s,a[1]-=(e?t.getMaxWidth():t.getMaxHeight())+s}return[Math.max(a[1],r[0]),Math.min(a[0],r[1])]}getSplitterInitials(t){let e=this.getOrientation()===g.HORZ,i=this.getChildren(),s=this.model.getSplitterSize(),n=[],o=0;for(let t=0;t<i.length;t++){let s=i[t],r=s.getRect(),a=e?r.width:r.height;n.push(a),o+=a}let r=i[t].getRect(),a=(e?r.x:r.y)-s;return{initialSizes:n,sum:o,startPosition:a}}calculateSplit(t,e,i,s,n){let o=this.getOrientation()===g.HORZ,r=this.getChildren(),a=r[t],l=o?a.getMaxWidth():a.getMaxHeight(),d=[...i];if(e<n){let i=n-e,s=0;d[t]+i>l?(s=d[t]+i-l,d[t]=l):d[t]+=i;for(let e=t-1;e>=0;e--){let t=r[e],s=o?t.getMinWidth():t.getMinHeight();if(d[e]-i>s){d[e]-=i;break}i-=d[e]-s,d[e]=s}for(let e=t+1;e<r.length;e++){let t=r[e],i=o?t.getMaxWidth():t.getMaxHeight();if(d[e]+s<i){d[e]+=s;break}s-=i-d[e],d[e]=i}}else{let i=e-n,s=0;d[t-1]+i>l?(s=d[t-1]+i-l,d[t-1]=l):d[t-1]+=i;for(let e=t;e<r.length;e++){let t=r[e],s=o?t.getMinWidth():t.getMinHeight();if(d[e]-i>s){d[e]-=i;break}i-=d[e]-s,d[e]=s}for(let e=t-1;e>=0;e--){let t=r[e],i=o?t.getMaxWidth():t.getMaxHeight();if(d[e]+s<i){d[e]+=s;break}s-=i-d[e],d[e]=i}}let h=d.map(t=>100*Math.max(.1,t)/s);return h}getMinSize(t){return t===g.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this.minWidth}getMinHeight(){return this.minHeight}getMaxSize(t){return t===g.HORZ?this.getMaxWidth():this.getMaxHeight()}getMaxWidth(){return this.maxWidth}getMaxHeight(){return this.maxHeight}calcMinMaxSize(){this.minHeight=H,this.minWidth=H,this.maxHeight=X,this.maxWidth=X;let t=!0;for(let e of this.children){let i=e;i.calcMinMaxSize(),this.getOrientation()===g.VERT?(this.minHeight+=i.getMinHeight(),this.maxHeight+=i.getMaxHeight(),t||(this.minHeight+=this.model.getSplitterSize(),this.maxHeight+=this.model.getSplitterSize()),this.minWidth=Math.max(this.minWidth,i.getMinWidth()),this.maxWidth=Math.min(this.maxWidth,i.getMaxWidth())):(this.minWidth+=i.getMinWidth(),this.maxWidth+=i.getMaxWidth(),t||(this.minWidth+=this.model.getSplitterSize(),this.maxWidth+=this.model.getSplitterSize()),this.minHeight=Math.max(this.minHeight,i.getMinHeight()),this.maxHeight=Math.min(this.maxHeight,i.getMaxHeight())),t=!1}}tidy(){let e=0;for(;e<this.children.length;){let i=this.children[e];if(i instanceof t){i.tidy();let s=i.getChildren();if(0===s.length)this.removeChild(i);else if(1===s.length){let n=s[0];if(this.removeChild(i),n instanceof t){let t=0,s=n.getChildren();for(let e of s){let i=e;t+=i.getWeight()}for(let n=0;n<s.length;n++){let o=s[n];o.setWeight(i.getWeight()*o.getWeight()/t),this.addChild(o,e+n)}}else n.setWeight(i.getWeight()),this.addChild(n,e)}else e++}else i instanceof W&&0===i.getChildren().length&&i.isEnableDeleteWhenEmpty()?(this.removeChild(i),i===this.model.getMaximizedTabset(this.windowId)&&this.model.setMaximizedTabset(void 0,this.windowId)):e++}if(this===this.model.getRoot(this.windowId)&&0===this.children.length){let t=this.model.getOnCreateTabSet(),e=t?t():{};e={...e,selected:-1};let i=new W(this.model,e);this.model.setActiveTabset(i,this.windowId),this.addChild(i)}}canDrop(t,e,i){let s;let n=i-this.rect.y,o=e-this.rect.x,r=this.rect.width,a=this.rect.height;if(this.getWindowId()===j.MAIN_WINDOW_ID||I(t)){if(this.model.isEnableEdgeDock()&&void 0===this.parent){if(e<this.rect.x+10&&n>a/2-50&&n<a/2+50){let t=_.LEFT,e=t.getDockRect(this.rect);e.width=e.width/2,s=new A(this,e,t,-1,b.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(e>this.rect.getRight()-10&&n>a/2-50&&n<a/2+50){let t=_.RIGHT,e=t.getDockRect(this.rect);e.width=e.width/2,e.x+=e.width,s=new A(this,e,t,-1,b.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(i<this.rect.y+10&&o>r/2-50&&o<r/2+50){let t=_.TOP,e=t.getDockRect(this.rect);e.height=e.height/2,s=new A(this,e,t,-1,b.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(i>this.rect.getBottom()-10&&o>r/2-50&&o<r/2+50){let t=_.BOTTOM,e=t.getDockRect(this.rect);e.height=e.height/2,e.y+=e.height,s=new A(this,e,t,-1,b.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(void 0!==s&&!t.canDockInto(t,s))return}return s}}drop(e,i,s){let n;let o=e.getParent();if(o&&o.removeChild(e),void 0!==o&&o instanceof W&&o.setSelected(0),void 0!==o&&o instanceof G&&o.setSelected(-1),e instanceof W||e instanceof t)(n=e)instanceof t&&n.getOrientation()===this.getOrientation()&&(i.getOrientation()===this.getOrientation()||i===_.CENTER)&&(n=new t(this.model,this.windowId,{})).addChild(e);else{let t=this.model.getOnCreateTabSet();(n=new W(this.model,t?t(e):{})).addChild(e)}let r=this.children.reduce((t,e)=>t+e.getWeight(),0);0===r&&(r=100),n.setWeight(r/3);let a=!this.model.isRootOrientationVertical();if(i===_.CENTER)-1===s?this.addChild(n,this.children.length):this.addChild(n,s);else if(a&&i===_.LEFT||!a&&i===_.TOP)this.addChild(n,0);else if(a&&i===_.RIGHT||!a&&i===_.BOTTOM)this.addChild(n);else if(a&&i===_.TOP||!a&&i===_.LEFT){let e=new t(this.model,this.windowId,{}),i=new t(this.model,this.windowId,{});for(let t of(i.setWeight(75),n.setWeight(25),this.children))i.addChild(t);this.removeAll(),e.addChild(n),e.addChild(i),this.addChild(e)}else if(a&&i===_.BOTTOM||!a&&i===_.RIGHT){let e=new t(this.model,this.windowId,{}),i=new t(this.model,this.windowId,{});for(let t of(i.setWeight(75),n.setWeight(25),this.children))i.addChild(t);this.removeAll(),e.addChild(i),e.addChild(n),this.addChild(e)}n instanceof W&&this.model.setActiveTabset(n,this.windowId),this.model.tidy()}isEnableDrop(){return!0}getAttributeDefinitions(){return t.attributeDefinitions}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}static getAttributeDefinitions(){return t.attributeDefinitions}normalizeWeights(){let t=0;for(let e of this.children){let i=e;t+=i.getWeight()}for(let e of(0===t&&(t=1),this.children)){let i=e;i.setWeight(Math.max(.001,100*i.getWeight()/t))}}static createAttributeDefinitions(){let e=new O;return e.add("type",t.TYPE,!0).setType(m.STRING).setFixed(),e.add("id",void 0).setType(m.STRING).setDescription("the unique id of the row, if left undefined a uuid will be assigned"),e.add("weight",100).setType(m.NUMBER).setDescription("relative weight for sizing of this row in parent row"),e}};u(F,"TYPE","row"),u(F,"attributeDefinitions",F.createAttributeDefinitions());let Y=F;class P{constructor(t,e){u(this,"_windowId"),u(this,"_layout"),u(this,"_rect"),u(this,"_window"),u(this,"_root"),u(this,"_maximizedTabSet"),u(this,"_activeTabSet"),u(this,"_toScreenRectFunction"),this._windowId=t,this._rect=e,this._toScreenRectFunction=t=>t}visitNodes(t){this.root.forEachNode(t,0)}get windowId(){return this._windowId}get rect(){return this._rect}get layout(){return this._layout}get window(){return this._window}get root(){return this._root}get maximizedTabSet(){return this._maximizedTabSet}get activeTabSet(){return this._activeTabSet}set rect(t){this._rect=t}set layout(t){this._layout=t}set window(t){this._window=t}set root(t){this._root=t}set maximizedTabSet(t){this._maximizedTabSet=t}set activeTabSet(t){this._activeTabSet=t}get toScreenRectFunction(){return this._toScreenRectFunction}set toScreenRectFunction(t){this._toScreenRectFunction=t}toJson(){return this._window&&this._window.screenTop>-1e4&&(this.rect=new T(this._window.screenLeft,this._window.screenTop,this._window.outerWidth,this._window.outerHeight)),{layout:this.root.toJson(),rect:this.rect.toJson()}}static fromJson(t,e,i){let s=e.getwindowsMap().size,n=t.rect?T.fromJson(t.rect):new T(50+50*s,50+50*s,600,400);n.snap(10);let o=new P(i,n);return o.root=Y.fromJson(t.layout,e,o),o}}let H=0,X=99999,z=class t{constructor(){u(this,"attributes"),u(this,"idMap"),u(this,"changeListeners"),u(this,"borders"),u(this,"onAllowDrop"),u(this,"onCreateTabSet"),u(this,"windows"),u(this,"rootWindow"),this.attributes={},this.idMap=new Map,this.borders=new R(this),this.windows=new Map,this.rootWindow=new P(t.MAIN_WINDOW_ID,T.empty()),this.windows.set(t.MAIN_WINDOW_ID,this.rootWindow),this.changeListeners=[]}doAction(e){var i;let s;switch(e.type){case f.ADD_NODE:{let t=new w(this,e.data.json,!0),i=this.idMap.get(e.data.toNode);(i instanceof W||i instanceof G||i instanceof Y)&&(i.drop(t,_.getByName(e.data.location),e.data.index,e.data.select),s=t);break}case f.MOVE_NODE:{let t=this.idMap.get(e.data.fromNode);if(t instanceof w||t instanceof W||t instanceof Y){if(t===this.getMaximizedTabset(t.getWindowId())){let e=this.windows.get(t.getWindowId());e.maximizedTabSet=void 0}let i=this.idMap.get(e.data.toNode);(i instanceof W||i instanceof G||i instanceof Y)&&i.drop(t,_.getByName(e.data.location),e.data.index,e.data.select)}this.removeEmptyWindows();break}case f.DELETE_TAB:{let t=this.idMap.get(e.data.node);t instanceof w&&t.delete(),this.removeEmptyWindows();break}case f.DELETE_TABSET:{let t=this.idMap.get(e.data.node);if(t instanceof W){let e=[...t.getChildren()];for(let t=0;t<e.length;t++){let i=e[t];i.isEnableClose()&&i.delete()}0===t.getChildren().length&&t.delete(),this.tidy()}this.removeEmptyWindows();break}case f.POPOUT_TABSET:{let t=this.idMap.get(e.data.node);if(t instanceof W){let e=t.isMaximized(),i=this.windows.get(t.getWindowId()),s=C(),n=new P(s,i.toScreenRectFunction(t.getRect())),o=Y.fromJson({type:"row",children:[]},this,n);n.root=o,this.windows.set(s,n),o.drop(t,_.CENTER,0),e&&(this.rootWindow.maximizedTabSet=void 0)}this.removeEmptyWindows();break}case f.POPOUT_TAB:{let t=this.idMap.get(e.data.node);if(t instanceof w){let e=C(),i=T.empty();i=t.getParent() instanceof W?t.getParent().getRect():t.getParent().getContentRect();let s=this.windows.get(t.getWindowId()),n=new P(e,s.toScreenRectFunction(i)),o=C(),r=Y.fromJson({type:"row",children:[{type:"tabset",id:o}]},this,n);n.root=r,this.windows.set(e,n);let a=this.idMap.get(o);a.drop(t,_.CENTER,0,!0)}this.removeEmptyWindows();break}case f.CLOSE_WINDOW:{let s=this.windows.get(e.data.windowId);s&&(null==(i=this.rootWindow.root)||i.drop(s.root,_.CENTER,-1),this.rootWindow.visitNodes((e,i)=>{e instanceof Y&&e.setWindowId(t.MAIN_WINDOW_ID)}),this.windows.delete(e.data.windowId));break}case f.CREATE_WINDOW:{let t=C(),i=new P(t,T.fromJson(e.data.rect)),n=Y.fromJson(e.data.layout,this,i);i.root=n,this.windows.set(t,i),s=t;break}case f.RENAME_TAB:{let t=this.idMap.get(e.data.node);t instanceof w&&t.setName(e.data.text);break}case f.SELECT_TAB:{let i=this.idMap.get(e.data.tabNode),s=e.data.windowId?e.data.windowId:t.MAIN_WINDOW_ID,n=this.windows.get(s);if(i instanceof w){let t=i.getParent(),e=t.getChildren().indexOf(i);t instanceof G?t.getSelected()===e?t.setSelected(-1):t.setSelected(e):t instanceof W&&(t.getSelected()!==e&&t.setSelected(e),n.activeTabSet=t)}break}case f.SET_ACTIVE_TABSET:{let i=e.data.windowId?e.data.windowId:t.MAIN_WINDOW_ID,s=this.windows.get(i);if(void 0===e.data.tabsetNode)s.activeTabSet=void 0;else{let t=this.idMap.get(e.data.tabsetNode);t instanceof W&&(s.activeTabSet=t)}break}case f.ADJUST_WEIGHTS:{let t=this.idMap.get(e.data.nodeId),i=t.getChildren();for(let t=0;t<i.length;t++){let s=i[t];s.setWeight(e.data.weights[t])}break}case f.ADJUST_BORDER_SPLIT:{let t=this.idMap.get(e.data.node);t instanceof G&&t.setSize(e.data.pos);break}case f.MAXIMIZE_TOGGLE:{let i=e.data.windowId?e.data.windowId:t.MAIN_WINDOW_ID,s=this.windows.get(i),n=this.idMap.get(e.data.node);n instanceof W&&(n===s.maximizedTabSet?s.maximizedTabSet=void 0:(s.maximizedTabSet=n,s.activeTabSet=n));break}case f.UPDATE_MODEL_ATTRIBUTES:this.updateAttrs(e.data.json);break;case f.UPDATE_NODE_ATTRIBUTES:{let t=this.idMap.get(e.data.node);t.updateAttrs(e.data.json)}}for(let t of(this.updateIdMap(),this.changeListeners))t(e);return s}getActiveTabset(e=t.MAIN_WINDOW_ID){let i=this.windows.get(e);return i&&i.activeTabSet&&this.getNodeById(i.activeTabSet.getId())?i.activeTabSet:void 0}getMaximizedTabset(e=t.MAIN_WINDOW_ID){return this.windows.get(e).maximizedTabSet}getRoot(e=t.MAIN_WINDOW_ID){return this.windows.get(e).root}isRootOrientationVertical(){return this.attributes.rootOrientationVertical}isEnableRotateBorderIcons(){return this.attributes.enableRotateBorderIcons}getBorderSet(){return this.borders}getwindowsMap(){return this.windows}visitNodes(t){for(let[e,i]of(this.borders.forEachNode(t),this.windows))i.root.forEachNode(t,0)}visitWindowNodes(e,i){this.windows.has(e)&&(e===t.MAIN_WINDOW_ID&&this.borders.forEachNode(i),this.windows.get(e).visitNodes(i))}getNodeById(t){return this.idMap.get(t)}getFirstTabSet(e=this.windows.get(t.MAIN_WINDOW_ID).root){let i=e.getChildren()[0];return i instanceof W?i:this.getFirstTabSet(i)}static fromJson(e){let i=new t;if(t.attributeDefinitions.fromJson(e.global,i.attributes),e.borders&&(i.borders=R.fromJson(e.borders,i)),e.popouts)for(let t in e.popouts){let s=e.popouts[t],n=P.fromJson(s,i,t);i.windows.set(t,n)}return i.rootWindow.root=Y.fromJson(e.layout,i,i.getwindowsMap().get(t.MAIN_WINDOW_ID)),i.tidy(),i}toJson(){let e={};t.attributeDefinitions.toJson(e,this.attributes),this.visitNodes(t=>{t.fireEvent("save",{})});let i={};for(let[e,s]of this.windows)e!==t.MAIN_WINDOW_ID&&(i[e]=s.toJson());return{global:e,borders:this.borders.toJson(),layout:this.rootWindow.root.toJson(),popouts:i}}getSplitterSize(){return this.attributes.splitterSize}getSplitterExtra(){return this.attributes.splitterExtra}isEnableEdgeDock(){return this.attributes.enableEdgeDock}isSplitterEnableHandle(){return this.attributes.splitterEnableHandle}setOnAllowDrop(t){this.onAllowDrop=t}setOnCreateTabSet(t){this.onCreateTabSet=t}addChangeListener(t){this.changeListeners.push(t)}removeChangeListener(t){let e=this.changeListeners.findIndex(e=>e===t);-1!==e&&this.changeListeners.splice(e,1)}toString(){return JSON.stringify(this.toJson())}removeEmptyWindows(){let e=new Set;for(let[i]of this.windows)if(i!==t.MAIN_WINDOW_ID){let t=0;this.visitWindowNodes(i,e=>{e instanceof w&&t++}),0===t&&e.add(i)}for(let t of e)this.windows.delete(t)}setActiveTabset(t,e){let i=this.windows.get(e);i&&(t?i.activeTabSet=t:i.activeTabSet=void 0)}setMaximizedTabset(t,e){let i=this.windows.get(e);i&&(t?i.maximizedTabSet=t:i.maximizedTabSet=void 0)}updateIdMap(){this.idMap.clear(),this.visitNodes(t=>{this.idMap.set(t.getId(),t)})}addNode(t){let e=t.getId();if(this.idMap.has(e))throw Error(`Error: each node must have a unique id, duplicate id:${t.getId()}`);this.idMap.set(e,t)}findDropTargetNode(e,i,s,n){let o=this.windows.get(e).root.findDropTargetNode(e,i,s,n);return void 0===o&&e===t.MAIN_WINDOW_ID&&(o=this.borders.findDropTargetNode(i,s,n)),o}tidy(){for(let[t,e]of this.windows)e.root.tidy()}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}nextUniqueId(){return"#"+C()}getAttribute(t){return this.attributes[t]}getOnAllowDrop(){return this.onAllowDrop}getOnCreateTabSet(){return this.onCreateTabSet}static toTypescriptInterfaces(){t.attributeDefinitions.pairAttributes("RowNode",Y.getAttributeDefinitions()),t.attributeDefinitions.pairAttributes("TabSetNode",W.getAttributeDefinitions()),t.attributeDefinitions.pairAttributes("TabNode",w.getAttributeDefinitions()),t.attributeDefinitions.pairAttributes("BorderNode",G.getAttributeDefinitions());let e=[];e.push(t.attributeDefinitions.toTypescriptInterface("Global",void 0)),e.push(Y.getAttributeDefinitions().toTypescriptInterface("Row",t.attributeDefinitions)),e.push(W.getAttributeDefinitions().toTypescriptInterface("TabSet",t.attributeDefinitions)),e.push(w.getAttributeDefinitions().toTypescriptInterface("Tab",t.attributeDefinitions)),e.push(G.getAttributeDefinitions().toTypescriptInterface("Border",t.attributeDefinitions)),console.log(e.join("\n"))}static createAttributeDefinitions(){let t=new O;return t.add("enableEdgeDock",!0).setType(m.BOOLEAN).setDescription("enable docking to the edges of the layout, this will show the edge indicators"),t.add("rootOrientationVertical",!1).setType(m.BOOLEAN).setDescription("the top level 'row' will layout horizontally by default, set this option true to make it layout vertically"),t.add("enableRotateBorderIcons",!0).setType(m.BOOLEAN).setDescription("boolean indicating if tab icons should rotate with the text in the left and right borders"),t.add("splitterSize",8).setType(m.NUMBER).setDescription("width in pixels of all splitters between tabsets/borders"),t.add("splitterExtra",0).setType(m.NUMBER).setDescription("additional width in pixels of the splitter hit test area"),t.add("splitterEnableHandle",!1).setType(m.BOOLEAN).setDescription("enable a small centralized handle on all splitters"),t.add("tabEnableClose",!0).setType(m.BOOLEAN),t.add("tabCloseType",1).setType("ICloseType"),t.add("tabEnablePopout",!1).setType(m.BOOLEAN).setAlias("tabEnableFloat"),t.add("tabEnablePopoutIcon",!0).setType(m.BOOLEAN),t.add("tabEnablePopoutOverlay",!1).setType(m.BOOLEAN),t.add("tabEnableDrag",!0).setType(m.BOOLEAN),t.add("tabEnableRename",!0).setType(m.BOOLEAN),t.add("tabContentClassName",void 0).setType(m.STRING),t.add("tabClassName",void 0).setType(m.STRING),t.add("tabIcon",void 0).setType(m.STRING),t.add("tabEnableRenderOnDemand",!0).setType(m.BOOLEAN),t.add("tabDragSpeed",.3).setType(m.NUMBER),t.add("tabBorderWidth",-1).setType(m.NUMBER),t.add("tabBorderHeight",-1).setType(m.NUMBER),t.add("tabSetEnableDeleteWhenEmpty",!0).setType(m.BOOLEAN),t.add("tabSetEnableDrop",!0).setType(m.BOOLEAN),t.add("tabSetEnableDrag",!0).setType(m.BOOLEAN),t.add("tabSetEnableDivide",!0).setType(m.BOOLEAN),t.add("tabSetEnableMaximize",!0).setType(m.BOOLEAN),t.add("tabSetEnableClose",!1).setType(m.BOOLEAN),t.add("tabSetEnableSingleTabStretch",!1).setType(m.BOOLEAN),t.add("tabSetAutoSelectTab",!0).setType(m.BOOLEAN),t.add("tabSetEnableActiveIcon",!1).setType(m.BOOLEAN),t.add("tabSetClassNameTabStrip",void 0).setType(m.STRING),t.add("tabSetEnableTabStrip",!0).setType(m.BOOLEAN),t.add("tabSetEnableTabWrap",!1).setType(m.BOOLEAN),t.add("tabSetTabLocation","top").setType("ITabLocation"),t.add("tabMinWidth",H).setType(m.NUMBER),t.add("tabMinHeight",H).setType(m.NUMBER),t.add("tabSetMinWidth",H).setType(m.NUMBER),t.add("tabSetMinHeight",H).setType(m.NUMBER),t.add("tabMaxWidth",X).setType(m.NUMBER),t.add("tabMaxHeight",X).setType(m.NUMBER),t.add("tabSetMaxWidth",X).setType(m.NUMBER),t.add("tabSetMaxHeight",X).setType(m.NUMBER),t.add("tabSetEnableTabScrollbar",!1).setType(m.BOOLEAN),t.add("borderSize",200).setType(m.NUMBER),t.add("borderMinSize",H).setType(m.NUMBER),t.add("borderMaxSize",X).setType(m.NUMBER),t.add("borderEnableDrop",!0).setType(m.BOOLEAN),t.add("borderAutoSelectTabWhenOpen",!0).setType(m.BOOLEAN),t.add("borderAutoSelectTabWhenClosed",!1).setType(m.BOOLEAN),t.add("borderClassName",void 0).setType(m.STRING),t.add("borderEnableAutoHide",!1).setType(m.BOOLEAN),t.add("borderEnableTabScrollbar",!1).setType(m.BOOLEAN),t}};u(z,"MAIN_WINDOW_ID","__main_window_id__"),u(z,"attributeDefinitions",z.createAttributeDefinitions());let j=z,k=class t extends L{constructor(e,i,s){super(s),u(this,"contentRect",T.empty()),u(this,"tabHeaderRect",T.empty()),u(this,"location"),this.location=e,this.attributes.id=`border_${e.getName()}`,t.attributeDefinitions.fromJson(i,this.attributes),s.addNode(this)}static fromJson(e,i){let s=_.getByName(e.location),n=new t(s,e,i);return e.children&&(n.children=e.children.map(t=>{let e=w.fromJson(t,i);return e.setParent(n),e})),n}getLocation(){return this.location}getClassName(){return this.getAttr("className")}isHorizontal(){return this.location.orientation===g.HORZ}getSize(){let t=this.getAttr("size"),e=this.getSelected();if(-1===e)return t;{let i=this.children[e],s=this.isHorizontal()?i.getAttr("borderWidth"):i.getAttr("borderHeight");return -1===s?t:s}}getMinSize(){let t=this.getSelectedNode(),e=this.getAttr("minSize");if(t){let i=this.isHorizontal()?t.getMinWidth():t.getMinHeight();e=Math.max(e,i)}return e}getMaxSize(){let t=this.getSelectedNode(),e=this.getAttr("maxSize");if(t){let i=this.isHorizontal()?t.getMaxWidth():t.getMaxHeight();e=Math.min(e,i)}return e}getSelected(){return this.attributes.selected}isAutoHide(){return this.getAttr("enableAutoHide")}getSelectedNode(){if(-1!==this.getSelected())return this.children[this.getSelected()]}getOrientation(){return this.location.getOrientation()}getConfig(){return this.attributes.config}isMaximized(){return!1}isShowing(){return this.attributes.show}toJson(){let e={};return t.attributeDefinitions.toJson(e,this.attributes),e.location=this.location.getName(),e.children=this.children.map(t=>t.toJson()),e}isAutoSelectTab(t){return(null==t&&(t=-1!==this.getSelected()),t)?this.getAttr("autoSelectTabWhenOpen"):this.getAttr("autoSelectTabWhenClosed")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}setSelected(t){this.attributes.selected=t}getTabHeaderRect(){return this.tabHeaderRect}setTabHeaderRect(t){this.tabHeaderRect=t}getRect(){return this.tabHeaderRect}getContentRect(){return this.contentRect}setContentRect(t){this.contentRect=t}isEnableDrop(){return this.getAttr("enableDrop")}setSize(t){let e=this.getSelected();if(-1===e)this.attributes.size=t;else{let i=this.children[e],s=this.isHorizontal()?i.getAttr("borderWidth"):i.getAttr("borderHeight");-1===s?this.attributes.size=t:this.isHorizontal()?i.setBorderWidth(t):i.setBorderHeight(t)}}updateAttrs(e){t.attributeDefinitions.update(e,this.attributes)}remove(t){let e=this.removeChild(t);-1!==this.getSelected()&&B(this,e)}canDrop(t,e,i){let s;if(!(t instanceof w))return;let n=_.CENTER;if(this.tabHeaderRect.contains(e,i)){if(this.location.orientation===g.VERT){if(this.children.length>0){let t=this.children[0],i=t.getTabRect(),o=i.y,r=i.height,a=this.tabHeaderRect.x,l=0;for(let d=0;d<this.children.length;d++){if(l=(i=(t=this.children[d]).getTabRect()).x+i.width/2,e>=a&&e<l){let t=new T(i.x-2,o,3,r);s=new A(this,t,n,d,b.FLEXLAYOUT__OUTLINE_RECT);break}a=l}if(null==s){let t=new T(i.getRight()-2,o,3,r);s=new A(this,t,n,this.children.length,b.FLEXLAYOUT__OUTLINE_RECT)}}else{let t=new T(this.tabHeaderRect.x+1,this.tabHeaderRect.y+2,3,18);s=new A(this,t,n,0,b.FLEXLAYOUT__OUTLINE_RECT)}}else if(this.children.length>0){let t=this.children[0],e=t.getTabRect(),o=e.x,r=e.width,a=this.tabHeaderRect.y,l=0;for(let d=0;d<this.children.length;d++){if(l=(e=(t=this.children[d]).getTabRect()).y+e.height/2,i>=a&&i<l){let t=new T(o,e.y-2,r,3);s=new A(this,t,n,d,b.FLEXLAYOUT__OUTLINE_RECT);break}a=l}if(null==s){let t=new T(o,e.getBottom()-2,r,3);s=new A(this,t,n,this.children.length,b.FLEXLAYOUT__OUTLINE_RECT)}}else{let t=new T(this.tabHeaderRect.x+2,this.tabHeaderRect.y+1,18,3);s=new A(this,t,n,0,b.FLEXLAYOUT__OUTLINE_RECT)}if(!t.canDockInto(t,s))return}else if(-1!==this.getSelected()&&this.contentRect.contains(e,i)){let e=this.contentRect;if(s=new A(this,e,n,-1,b.FLEXLAYOUT__OUTLINE_RECT),!t.canDockInto(t,s))return}return s}drop(e,i,s,n){let o=0,r=e.getParent();void 0!==r&&(o=r.removeChild(e),r!==this&&r instanceof t&&r.getSelected()===o?r.setSelected(-1):B(r,o)),e instanceof w&&r===this&&o<s&&s>0&&s--;let a=s;-1===a&&(a=this.children.length),e instanceof w&&this.addChild(e,a),(n||!1!==n&&this.isAutoSelectTab())&&this.setSelected(a),this.model.tidy()}getSplitterBounds(t,e=!1){let i=[0,0],s=e?this.getMinSize():0,n=e?this.getMaxSize():99999,o=this.model.getRoot(j.MAIN_WINDOW_ID),r=o.getRect(),a=this.model.getSplitterSize();if(this.location===_.TOP){i[0]=this.tabHeaderRect.getBottom()+s;let t=this.tabHeaderRect.getBottom()+n;i[1]=Math.max(i[0],r.getBottom()-o.getMinHeight()-a),i[1]=Math.min(i[1],t)}else if(this.location===_.LEFT){i[0]=this.tabHeaderRect.getRight()+s;let t=this.tabHeaderRect.getRight()+n;i[1]=Math.max(i[0],r.getRight()-o.getMinWidth()-a),i[1]=Math.min(i[1],t)}else if(this.location===_.BOTTOM){i[1]=this.tabHeaderRect.y-s-a;let t=this.tabHeaderRect.y-n-a;i[0]=Math.min(i[1],r.y+o.getMinHeight()),i[0]=Math.max(i[0],t)}else if(this.location===_.RIGHT){i[1]=this.tabHeaderRect.x-s-a;let t=this.tabHeaderRect.x-n-a;i[0]=Math.min(i[1],r.x+o.getMinWidth()),i[0]=Math.max(i[0],t)}return i}calculateSplit(t,e){let i=this.getSplitterBounds(e);return this.location===_.BOTTOM||this.location===_.RIGHT?Math.max(0,i[1]-e):Math.max(0,e-i[0])}getAttributeDefinitions(){return t.attributeDefinitions}static getAttributeDefinitions(){return t.attributeDefinitions}static createAttributeDefinitions(){let e=new O;return e.add("type",t.TYPE,!0).setType(m.STRING).setFixed(),e.add("selected",-1).setType(m.NUMBER).setDescription("index of selected/visible tab in border; -1 means no tab selected"),e.add("show",!0).setType(m.BOOLEAN).setDescription("show/hide this border"),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDrop","borderEnableDrop").setType(m.BOOLEAN).setDescription("whether tabs can be dropped into this border"),e.addInherited("className","borderClassName").setType(m.STRING).setDescription("class applied to tab button"),e.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(m.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is already open"),e.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(m.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is currently closed"),e.addInherited("size","borderSize").setType(m.NUMBER).setDescription("size of the tab area when selected"),e.addInherited("minSize","borderMinSize").setType(m.NUMBER).setDescription("the minimum size of the tab area"),e.addInherited("maxSize","borderMaxSize").setType(m.NUMBER).setDescription("the maximum size of the tab area"),e.addInherited("enableAutoHide","borderEnableAutoHide").setType(m.BOOLEAN).setDescription("hide border if it has zero tabs"),e.addInherited("enableTabScrollbar","borderEnableTabScrollbar").setType(m.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};u(k,"TYPE","border"),u(k,"attributeDefinitions",k.createAttributeDefinitions());let G=k,V=!1,J=t=>{let e;let{layout:i,node:s,index:n,horizontal:o}=t,[l,d]=a.useState(!1),h=a.useRef(null),c=a.useRef(null),u=a.useRef([]),_=a.useRef(void 0),p=a.useRef(void 0),E=a.useRef(0),m=a.useRef(0),O=a.useRef({initialSizes:[],sum:0,startPosition:0}),A=s.getModel().getSplitterSize(),R=s.getModel().getSplitterExtra();N()||(R=Math.max(20,R+A)-A),a.useEffect(()=>{var t,e;return null==(t=h.current)||t.addEventListener("touchstart",L,{passive:!1}),null==(e=c.current)||e.addEventListener("touchstart",L,{passive:!1}),()=>{var t,e;null==(t=h.current)||t.removeEventListener("touchstart",L),null==(e=c.current)||e.removeEventListener("touchstart",L)}},[]);let L=t=>{t.preventDefault(),t.stopImmediatePropagation()},w=t=>{var e;t.stopPropagation(),s instanceof Y&&(O.current=s.getSplitterInitials(n)),y(!1,i.getCurrentDocument()),S(t.currentTarget.ownerDocument,t,x,D,v),u.current=s.getSplitterBounds(n,!0);let r=i.getRootDiv();_.current=i.getCurrentDocument().createElement("div"),_.current.style.flexDirection=o?"row":"column",_.current.className=i.getClassName(b.FLEXLAYOUT__SPLITTER_DRAG),_.current.style.cursor=s.getOrientation()===g.VERT?"ns-resize":"ew-resize",s.getModel().isSplitterEnableHandle()&&(p.current=i.getCurrentDocument().createElement("div"),p.current.className=B(b.FLEXLAYOUT__SPLITTER_HANDLE)+" "+(o?B(b.FLEXLAYOUT__SPLITTER_HANDLE_HORZ):B(b.FLEXLAYOUT__SPLITTER_HANDLE_VERT)),_.current.appendChild(p.current));let a=null==(e=h.current)?void 0:e.getBoundingClientRect(),l=new T(a.x-i.getDomRect().x,a.y-i.getDomRect().y,a.width,a.height);E.current=t.clientX-a.x,m.current=t.clientY-a.y,l.positionElement(_.current),r&&r.appendChild(_.current),d(!0),V=!0},v=()=>{let t=i.getRootDiv();t&&_.current&&t.removeChild(_.current),_.current=void 0,d(!1),V=!1},x=(t,e)=>{if(_.current){let n=i.getDomRect();n&&(s.getOrientation()===g.VERT?_.current.style.top=M(e-n.y-m.current)+"px":_.current.style.left=M(t-n.x-E.current)+"px",i.isRealtimeResize()&&I())}},D=()=>{if(_.current){I();let t=i.getRootDiv();t&&_.current&&t.removeChild(_.current),_.current=void 0}y(!0,i.getCurrentDocument()),d(!1),V=!1},I=t=>{(()=>{if(_.current){let t=0;if(t=s.getOrientation()===g.VERT?_.current.offsetTop:_.current.offsetLeft,s instanceof G){let e=s.calculateSplit(s,t);i.doAction(f.adjustBorderSplit(s.getId(),e))}else{let e=O.current,o=s.calculateSplit(n,t,e.initialSizes,e.sum,e.startPosition);i.doAction(f.adjustWeights(s.getId(),o))}}})()},M=t=>{let e=u.current,i=t;return t<e[0]&&(i=e[0]),t>e[1]&&(i=e[1]),i},B=i.getClassName,C={cursor:o?"ew-resize":"ns-resize",flexDirection:o?"column":"row"},U=B(b.FLEXLAYOUT__SPLITTER)+" "+B(b.FLEXLAYOUT__SPLITTER_+s.getOrientation().getName());if(s instanceof G?U+=" "+B(b.FLEXLAYOUT__SPLITTER_BORDER):void 0!==s.getModel().getMaximizedTabset(i.getWindowId())&&(C.display="none"),o?(C.width=A+"px",C.minWidth=A+"px"):(C.height=A+"px",C.minHeight=A+"px"),!l&&s.getModel().isSplitterEnableHandle()&&(e=(0,r.jsx)("div",{className:B(b.FLEXLAYOUT__SPLITTER_HANDLE)+" "+(o?B(b.FLEXLAYOUT__SPLITTER_HANDLE_HORZ):B(b.FLEXLAYOUT__SPLITTER_HANDLE_VERT))})),0===R)return(0,r.jsx)("div",{className:U,style:C,ref:h,"data-layout-path":s.getPath()+"/s"+(n-1),onPointerDown:w,children:e});{let t={};s.getOrientation()===g.HORZ?(t.height="100%",t.width=A+R+"px",t.cursor="ew-resize"):(t.height=A+R+"px",t.width="100%",t.cursor="ns-resize");let e=B(b.FLEXLAYOUT__SPLITTER_EXTRA);return(0,r.jsx)("div",{className:U,style:C,ref:h,"data-layout-path":s.getPath()+"/s"+(n-1),onPointerDown:w,children:(0,r.jsx)("div",{style:t,ref:c,className:e,onPointerDown:w})})}};function Z(t){let{layout:e,border:i,show:s}=t,n=a.useRef(null),o=a.useRef(void 0);a.useLayoutEffect(()=>{let t=e.getBoundingClientRect(n.current);isNaN(t.x)||!(t.width>0)||i.getContentRect().equals(t)||(i.setContentRect(t),V?(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{e.redrawInternal("border content rect "+t),o.current=void 0},50)):e.redrawInternal("border content rect "+t))});let l=!0,d={};i.getOrientation()===g.HORZ?(d.width=i.getSize(),d.minWidth=i.getMinSize(),d.maxWidth=i.getMaxSize()):(d.height=i.getSize(),d.minHeight=i.getMinSize(),d.maxHeight=i.getMaxSize(),l=!1),d.display=s?"flex":"none";let h=e.getClassName(b.FLEXLAYOUT__BORDER_TAB_CONTENTS);return i.getLocation()===_.LEFT||i.getLocation()===_.TOP?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:n,style:d,className:h}),s&&(0,r.jsx)(J,{layout:e,node:i,index:0,horizontal:l})]}):(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)(J,{layout:e,node:i,index:0,horizontal:l}),(0,r.jsx)("div",{ref:n,style:d,className:h})]})}var q=((o=q||{})[o.Visible=1]="Visible",o[o.Always=2]="Always",o[o.Selected=3]="Selected",o);let $=t=>{let{layout:e,node:i,selected:s,border:n,icons:o,path:l}=t,d=a.useRef(null),h=a.useRef(null),c=()=>{let t=i.getCloseType();return!!s||t===q.Always||t===q.Visible&&!!window.matchMedia&&!!window.matchMedia("(hover: hover) and (pointer: fine)").matches};a.useLayoutEffect(()=>{i.setTabRect(e.getBoundingClientRect(d.current)),e.getEditingTab()===i&&h.current.select()});let u=e.getClassName,g=u(b.FLEXLAYOUT__BORDER_BUTTON)+" "+u(b.FLEXLAYOUT__BORDER_BUTTON_+n);s?g+=" "+u(b.FLEXLAYOUT__BORDER_BUTTON__SELECTED):g+=" "+u(b.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),void 0!==i.getClassName()&&(g+=" "+i.getClassName());let T=0;!1===i.getModel().isEnableRotateBorderIcons()&&("left"===n?T=90:"right"===n&&(T=-90));let _=v(e,i,T),E=_.content?(0,r.jsx)("div",{className:u(b.FLEXLAYOUT__BORDER_BUTTON_CONTENT),children:_.content}):null,m=_.leading?(0,r.jsx)("div",{className:u(b.FLEXLAYOUT__BORDER_BUTTON_LEADING),children:_.leading}):null;if(e.getEditingTab()===i&&(E=(0,r.jsx)("input",{ref:h,className:u(b.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":l+"/textbox",type:"text",autoFocus:!0,defaultValue:i.getName(),onKeyDown:t=>{"Escape"===t.code?e.setEditingTab(void 0):("Enter"===t.code||"NumpadEnter"===t.code)&&(e.setEditingTab(void 0),e.doAction(f.renameTab(i.getId(),t.target.value)))},onPointerDown:t=>{t.stopPropagation()}})),i.isEnableClose()){let t=e.i18nName(p.Close_Tab);_.buttons.push((0,r.jsx)("div",{"data-layout-path":l+"/button/close",title:t,className:u(b.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onPointerDown:t=>{t.stopPropagation()},onClick:t=>{c()&&(e.doAction(f.deleteTab(i.getId())),t.stopPropagation())},children:"function"==typeof o.close?o.close(i):o.close},"close"))}return(0,r.jsxs)("div",{ref:d,"data-layout-path":l,className:g,onClick:()=>{e.doAction(f.selectTab(i.getId()))},onAuxClick:t=>{x(t)&&e.auxMouseClick(i,t)},onContextMenu:t=>{e.showContextMenu(i,t)},title:i.getHelpText(),draggable:!0,onDragStart:t=>{i.isEnableDrag()?(t.stopPropagation(),e.setDragNode(t.nativeEvent,i)):t.preventDefault()},onDragEnd:t=>{t.stopPropagation(),e.clearDragMain()},children:[m,E,_.buttons]})},K=t=>{let{layout:e,node:i}=t,s=e.getClassName,n=s(b.FLEXLAYOUT__TAB_BUTTON_STAMP),o=v(e,i),a=o.content?(0,r.jsx)("div",{className:s(b.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:o.content}):i.getNameForOverflowMenu(),l=o.leading?(0,r.jsx)("div",{className:s(b.FLEXLAYOUT__TAB_BUTTON_LEADING),children:o.leading}):null;return(0,r.jsxs)("div",{className:n,title:i.getHelpText(),children:[l,a]})};function Q(t,e,i,s,n){let o=n.getRootDiv(),a=n.getClassName,l=t.ownerDocument,d=t.getBoundingClientRect(),h=(null==o?void 0:o.getBoundingClientRect())??new DOMRect(0,0,100,100),c=l.createElement("div");c.className=a(b.FLEXLAYOUT__POPUP_MENU_CONTAINER),d.left<h.left+h.width/2?c.style.left=d.left-h.left+"px":c.style.right=h.right-d.right+"px",d.top<h.top+h.height/2?c.style.top=d.top-h.top+"px":c.style.bottom=h.bottom-d.bottom+"px",n.showOverlay(!0),o&&o.appendChild(c);let u=()=>{n.hideControlInPortal(),n.showOverlay(!1),o&&o.removeChild(c),c.removeEventListener("pointerdown",g),l.removeEventListener("pointerdown",T)},g=t=>{t.stopPropagation()},T=t=>{u()};c.addEventListener("pointerdown",g),l.addEventListener("pointerdown",T),n.showControlInPortal((0,r.jsx)(tt,{currentDocument:l,parentNode:e,onSelect:s,onHide:u,items:i,classNameMapper:a,layout:n}),c)}let tt=t=>{let{parentNode:e,items:i,onHide:s,onSelect:n,classNameMapper:o,layout:l}=t,d=(0,a.useRef)(null);(0,a.useEffect)(()=>{d.current&&d.current.focus()},[]);let h=(t,e)=>{n(t),s(),e.stopPropagation()},c=(t,e)=>{t.stopPropagation(),l.setDragNode(t.nativeEvent,e),setTimeout(()=>{s()},0)},u=t=>{l.clearDragMain()},g=i.map((t,i)=>{let s=o(b.FLEXLAYOUT__POPUP_MENU_ITEM);return e.getSelected()===t.index&&(s+=" "+o(b.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED)),(0,r.jsx)("div",{className:s,"data-layout-path":"/popup-menu/tb"+i,onClick:e=>h(t,e),draggable:!0,onDragStart:e=>c(e,t.node),onDragEnd:u,title:t.node.getHelpText(),children:(0,r.jsx)(K,{node:t.node,layout:l})},t.index)});return(0,r.jsx)("div",{className:o(b.FLEXLAYOUT__POPUP_MENU),ref:d,tabIndex:0,onKeyDown:t=>{"Escape"===t.key&&s()},"data-layout-path":"/popup-menu",children:g})},te=(t,e,i,s,n,o)=>{let[r,l]=a.useState([]),[d,h]=a.useState(!1),[c,u]=a.useState(!1),T=a.useRef(null),_=a.useRef(!1),p=a.useRef(void 0),b=a.useRef([]),E=a.useRef(0),f=a.useRef(!1);b.current=r,a.useLayoutEffect(()=>{s.current&&B(0)},[e.getId()]),a.useLayoutEffect(()=>{_.current=!1},[e.getSelectedNode(),e.getRect().width,e.getRect().height]),a.useLayoutEffect(()=>{N(),!1===_.current&&function(){let i=e.getSelectedNode();if(i&&s.current){let e=t.getBoundingClientRect(s.current),n=i.getTabRect(),o=x(e)-x(n);o>0||I(n)>I(e)?(B(C(s.current)-o),f.current=!0):(o=y(n)-y(e))>0&&(B(C(s.current)+o),f.current=!0)}}(),O(),A()}),a.useEffect(()=>{var t;return null==(t=T.current)||t.addEventListener("wheel",m,{passive:!1}),()=>{var t;null==(t=T.current)||t.removeEventListener("wheel",m)}},[T.current]);let m=t=>{t.preventDefault()},O=()=>{if(s.current&&n.current){let t=s.current,e=n.current,o=D(t),r=M(t),a=C(t);if(r>o&&r>0){let t=o*o/r,s=0;t<20&&(s=20-t,t=20);let n=a*(o-s)/r;i===g.HORZ?(e.style.width=t+"px",e.style.left=n+"px"):(e.style.height=t+"px",e.style.top=n+"px"),e.style.display="block"}else e.style.display="none";i===g.HORZ?e.style.bottom="0px":e.style.right="0px"}},A=()=>{let t=v(),e=t.length>0;e!==d&&h(e),void 0===p.current&&(p.current=setTimeout(()=>{var t;let e=v();t=b.current,e.length===t.length&&e.every((e,i)=>e===t[i])||l(e),p.current=void 0},100))},R=(t,e)=>{if(s.current&&n.current){let o=s.current,r=n.current,a=D(o),l=M(o),d=D(r),h=o.getBoundingClientRect(),c=0;if(c=Math.max(0,Math.min(l-d,c=i===g.HORZ?t-h.x-E.current:e-h.y-E.current)),a>0){let t=c*l/a;B(t)}}},L=()=>{},w=()=>{},N=()=>{if(s.current){let t=s.current,e=t.firstElementChild,i=D(e)+(c?10:0)>D(s.current);i!==c&&u(i)}},v=()=>{let t=[];if(s.current){let e=s.current,i=e.getBoundingClientRect(),n=x(i)-1,r=y(i)+1,a=e.firstElementChild,l=0;Array.from(a.children).forEach(e=>{let i=e.getBoundingClientRect();e.classList.contains(o)&&((x(i)<n||y(i)>r)&&t.push(l),l++)})}return t},x=t=>i===g.HORZ?t.x:t.y,y=t=>i===g.HORZ?t.right:t.bottom,D=t=>i===g.HORZ?t.clientWidth:t.clientHeight,I=t=>i===g.HORZ?t.width:t.height,M=t=>i===g.HORZ?t.scrollWidth:t.scrollHeight,B=t=>{i===g.HORZ?s.current.scrollLeft=t:s.current.scrollTop=t},C=t=>i===g.HORZ?t.scrollLeft:t.scrollTop;return{selfRef:T,userControlledPositionRef:_,onScroll:()=>{f.current||(_.current=!0),f.current=!1,O(),A()},onScrollPointerDown:t=>{var e;t.stopPropagation(),n.current.setPointerCapture(t.pointerId);let s=null==(e=n.current)?void 0:e.getBoundingClientRect();i===g.HORZ?E.current=t.clientX-s.x:E.current=t.clientY-s.y,S(t.currentTarget.ownerDocument,t,R,L,w)},hiddenTabs:r,onMouseWheel:t=>{if(s.current){if(0===e.getChildren().length)return;let i=0;if(Math.abs(t.deltaY)>0){i=-t.deltaY,1===t.deltaMode&&(i*=40);let e=C(s.current)-i,n=M(s.current)-D(s.current),o=Math.max(0,Math.min(n,e));B(o),t.stopPropagation()}}},isDockStickyButtons:c,isShowHiddenTabs:d}},ti=t=>{let e,i,s;let{border:n,layout:o,size:l}=t,d=a.useRef(null),h=a.useRef(null),c=a.useRef(null),u=a.useRef(null),T=a.useRef(null),E=o.getIcons();a.useLayoutEffect(()=>{n.setTabHeaderRect(o.getBoundingClientRect(m.current))});let{selfRef:m,userControlledPositionRef:O,onScroll:A,onScrollPointerDown:R,hiddenTabs:L,onMouseWheel:w,isDockStickyButtons:N,isShowHiddenTabs:v}=te(o,n,g.flip(n.getOrientation()),T,h,o.getClassName(b.FLEXLAYOUT__BORDER_BUTTON)),y=t=>{x(t)&&o.auxMouseClick(n,t)},D=t=>{t.stopPropagation()},S=t=>{o.doAction(f.selectTab(t.node.getId())),O.current=!1},I=o.getClassName,M=[],B=t=>{let e=n.getSelected()===t,i=n.getChildren()[t];M.push((0,r.jsx)($,{layout:o,border:n.getLocation().getName(),node:i,path:n.getPath()+"/tb"+t,selected:e,icons:E},i.getId())),t<n.getChildren().length-1&&M.push((0,r.jsx)("div",{className:I(b.FLEXLAYOUT__BORDER_TAB_DIVIDER)},"divider"+t))};for(let t=0;t<n.getChildren().length;t++)B(t);let C=I(b.FLEXLAYOUT__BORDER)+" "+I(b.FLEXLAYOUT__BORDER_+n.getLocation().getName());void 0!==n.getClassName()&&(C+=" "+n.getClassName());let U=[],W=[],F={leading:e,buttons:U,stickyButtons:W,overflowPosition:void 0};if(o.customizeTabSet(n,F),e=F.leading,W=F.stickyButtons,U=F.buttons,void 0===F.overflowPosition&&(F.overflowPosition=W.length),W.length>0&&(N?U=[...W,...U]:M.push((0,r.jsx)("div",{ref:u,onPointerDown:D,onDragStart:t=>{t.preventDefault()},className:I(b.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:W},"sticky_buttons_container"))),v){let t;let e=o.i18nName(p.Overflow_Menu_Tooltip);if("function"==typeof E.more){let e=L.map(t=>({index:t,node:n.getChildren()[t]}));t=E.more(n,e)}else t=(0,r.jsxs)(r.Fragment,{children:[E.more,(0,r.jsx)("div",{className:I(b.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:L.length>0?L.length:""})]});U.splice(Math.min(F.overflowPosition,U.length),0,(0,r.jsx)("button",{ref:c,className:I(b.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+I(b.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+I(b.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+n.getLocation().getName()),title:e,onClick:t=>{let e=o.getShowOverflowMenu(),i=L.map(t=>({index:t,node:n.getChildren()[t]}));if(void 0!==e)e(n,t,i,S);else{let t=c.current;Q(t,n,i,S,o)}t.stopPropagation()},onPointerDown:D,children:t},"overflowbutton"))}let Y=n.getSelected();if(-1!==Y){let t=n.getChildren()[Y];if(void 0!==t&&o.isSupportsPopout()&&t.isEnablePopout()){let e=o.i18nName(p.Popout_Tab);U.push((0,r.jsx)("button",{title:e,className:I(b.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+I(b.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:t=>{let e=n.getChildren()[n.getSelected()];void 0!==e&&o.doAction(f.popoutTab(e.getId())),t.stopPropagation()},onPointerDown:D,children:"function"==typeof E.popout?E.popout(t):E.popout},"popout"))}}let P=(0,r.jsx)("div",{ref:d,className:I(b.FLEXLAYOUT__BORDER_TOOLBAR)+" "+I(b.FLEXLAYOUT__BORDER_TOOLBAR_+n.getLocation().getName()),children:U},"toolbar"),H={},X={},z=l-1;return n.getLocation()===_.LEFT?(H={right:"100%",top:0},X={width:z,overflowY:"auto"}):n.getLocation()===_.RIGHT?(H={left:"100%",top:0},X={width:z,overflowY:"auto"}):(H={left:0},X={height:z,overflowX:"auto"}),n.isEnableTabScrollbar()&&(i=(0,r.jsx)("div",{ref:h,className:I(b.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:R})),e&&(s=(0,r.jsx)("div",{className:I(b.FLEXLAYOUT__BORDER_LEADING),children:e})),(0,r.jsxs)("div",{ref:m,style:{display:"flex",flexDirection:n.getOrientation()===g.VERT?"row":"column"},className:C,"data-layout-path":n.getPath(),onClick:y,onAuxClick:y,onContextMenu:t=>{o.showContextMenu(n,t)},onWheel:w,children:[s,(0,r.jsxs)("div",{className:I(b.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[(0,r.jsx)("div",{ref:T,className:I(b.FLEXLAYOUT__BORDER_INNER)+" "+I(b.FLEXLAYOUT__BORDER_INNER_+n.getLocation().getName()),style:X,onScroll:A,children:(0,r.jsx)("div",{style:H,className:I(b.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+I(b.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+n.getLocation().getName()),children:M})}),i]}),P]})},ts=t=>{let{layout:e,node:i}=t,s=a.useRef(null);a.useEffect(()=>{i.setTabStamp(s.current)},[i,s.current]);let n=e.getClassName,o=n(b.FLEXLAYOUT__DRAG_RECT);return(0,r.jsx)("div",{ref:s,className:o,children:(0,r.jsx)(K,{layout:e,node:i},i.getId())})},tn=t=>{let{title:e,layout:i,layoutWindow:s,url:n,onCloseWindow:o,onSetWindow:r,children:d}=t,h=a.useRef(null),[c,u]=a.useState(void 0),g=new Map;return(a.useLayoutEffect(()=>{if(!h.current){let t=s.windowId,i=s.rect;h.current=window.open(n,t,`left=${i.x},top=${i.y},width=${i.width},height=${i.height}`),h.current?(s.window=h.current,r(s,h.current),window.addEventListener("beforeunload",()=>{if(h.current){let t=h.current;h.current=null,t.close()}}),h.current.addEventListener("load",()=>{if(h.current){h.current.focus(),h.current.resizeTo(i.width,i.height),h.current.moveTo(i.x,i.y);let t=h.current.document;t.title=e;let n=t.createElement("div");n.className=b.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,t.body.appendChild(n),(function(t,e){let i=[],s=document.querySelectorAll('style, link[rel="stylesheet"]');for(let n of s)to(t,n,e,i);return Promise.all(i)})(t,g).then(()=>{u(n)});let r=new MutationObserver(e=>(function(t,e,i){for(let s of t)if("childList"===s.type){for(let t of s.addedNodes)(t instanceof HTMLLinkElement||t instanceof HTMLStyleElement)&&to(e,t,i);for(let t of s.removedNodes)if(t instanceof HTMLLinkElement||t instanceof HTMLStyleElement){let s=i.get(t);s&&e.head.removeChild(s)}}})(e,t,g));r.observe(document.head,{childList:!0}),h.current.addEventListener("beforeunload",()=>{h.current&&(o(s),h.current=null,r.disconnect())})}})):(console.warn(`Unable to open window ${n}`),o(s))}return()=>{var t;i.getModel().getwindowsMap().has(s.windowId)||(null==(t=h.current)||t.close(),h.current=null)}},[]),void 0!==c)?(0,l.createPortal)(d,c):null};function to(t,e,i,s){if(e instanceof HTMLLinkElement){let n=e.cloneNode(!0);t.head.appendChild(n),i.set(e,n),s&&s.push(new Promise(t=>{n.onload=()=>t(!0)}))}else if(e instanceof HTMLStyleElement)try{let s=e.cloneNode(!0);t.head.appendChild(s),i.set(e,s)}catch(t){}}let tr={width:"1em",height:"1em",display:"flex",alignItems:"center"},ta=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:tr,viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,r.jsx)("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),tl=t=>{let{layout:e,show:i}=t;return(0,r.jsx)("div",{className:e.getClassName(b.FLEXLAYOUT__LAYOUT_OVERLAY),style:{display:i?"flex":"none"}})},td=t=>{let{layout:e,node:i,selected:s,path:n}=t,o=a.useRef(null),l=a.useRef(null),d=e.getIcons();a.useLayoutEffect(()=>{i.setTabRect(e.getBoundingClientRect(o.current)),e.getEditingTab()===i&&l.current.select()});let h=()=>{e.setEditingTab(i),e.getCurrentDocument().body.addEventListener("pointerdown",c)},c=t=>{t.target!==l.current&&(e.getCurrentDocument().body.removeEventListener("pointerdown",c),e.setEditingTab(void 0))},u=()=>{let t=i.getCloseType();return!!s||t===q.Always||t===q.Visible&&!!window.matchMedia&&!!window.matchMedia("(hover: hover) and (pointer: fine)").matches},g=e.getClassName,T=i.getParent(),_=T.isEnableSingleTabStretch()&&1===T.getChildren().length,E=_?b.FLEXLAYOUT__TAB_BUTTON_STRETCH:b.FLEXLAYOUT__TAB_BUTTON,m=g(E);m+=" "+g(E+"_"+T.getTabLocation()),_||(s?m+=" "+g(E+"--selected"):m+=" "+g(E+"--unselected")),void 0!==i.getClassName()&&(m+=" "+i.getClassName());let O=v(e,i),A=O.content?(0,r.jsx)("div",{className:g(b.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:O.content}):null,R=O.leading?(0,r.jsx)("div",{className:g(b.FLEXLAYOUT__TAB_BUTTON_LEADING),children:O.leading}):null;if(e.getEditingTab()===i&&(A=(0,r.jsx)("input",{ref:l,className:g(b.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":n+"/textbox",type:"text",autoFocus:!0,defaultValue:i.getName(),onKeyDown:t=>{"Escape"===t.code?e.setEditingTab(void 0):("Enter"===t.code||"NumpadEnter"===t.code)&&(e.setEditingTab(void 0),e.doAction(f.renameTab(i.getId(),t.target.value)))},onPointerDown:t=>{t.stopPropagation()}})),i.isEnableClose()&&!_){let t=e.i18nName(p.Close_Tab);O.buttons.push((0,r.jsx)("div",{"data-layout-path":n+"/button/close",title:t,className:g(b.FLEXLAYOUT__TAB_BUTTON_TRAILING),onPointerDown:t=>{t.stopPropagation()},onClick:t=>{u()&&(e.doAction(f.deleteTab(i.getId())),t.stopPropagation())},children:"function"==typeof d.close?d.close(i):d.close},"close"))}return(0,r.jsxs)("div",{ref:o,"data-layout-path":n,className:m,onClick:()=>{e.doAction(f.selectTab(i.getId()))},onAuxClick:t=>{x(t)&&e.auxMouseClick(i,t)},onContextMenu:t=>{e.showContextMenu(i,t)},title:i.getHelpText(),draggable:!0,onDragStart:t=>{i.isEnableDrag()?(t.stopPropagation(),e.setDragNode(t.nativeEvent,i)):t.preventDefault()},onDragEnd:t=>{e.clearDragMain()},onDoubleClick:t=>{i.isEnableRename()&&(h(),t.stopPropagation())},children:[R,A,O.buttons]})},th=t=>{let e,i,s,n;let{node:o,layout:d}=t,h=a.useRef(null),c=a.useRef(null),u=a.useRef(null),T=a.useRef(null),_=a.useRef(null),E=a.useRef(null),m=a.useRef(null),O=a.useRef(void 0),A=d.getIcons();a.useLayoutEffect(()=>{o.setRect(d.getBoundingClientRect(R.current)),h.current&&o.setTabStripRect(d.getBoundingClientRect(h.current));let t=d.getBoundingClientRect(T.current);o.getContentRect().equals(t)||isNaN(t.x)||(o.setContentRect(t),V?(O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{d.redrawInternal("border content rect "+t),O.current=void 0},50)):d.redrawInternal("border content rect "+t))});let{selfRef:R,userControlledPositionRef:L,onScroll:w,onScrollPointerDown:N,hiddenTabs:v,onMouseWheel:y,isDockStickyButtons:D,isShowHiddenTabs:S}=te(d,o,g.HORZ,u,c,d.getClassName(b.FLEXLAYOUT__TAB_BUTTON)),I=t=>{d.doAction(f.selectTab(t.node.getId())),L.current=!1},M=t=>{d.getEditingTab()?t.preventDefault():o.isEnableDrag()?(t.stopPropagation(),d.setDragNode(t.nativeEvent,o)):t.preventDefault()},B=t=>{x(t)||d.doAction(f.setActiveTabset(o.getId(),d.getWindowId()))},C=t=>{x(t)&&d.auxMouseClick(o,t)},U=t=>{d.showContextMenu(o,t)},W=t=>{t.stopPropagation()},F=t=>{o.canMaximize()&&d.maximize(o)},Y=d.getClassName,P=o.getSelectedNode(),H=o.getPath(),X=[];if(o.isEnableTabStrip())for(let t=0;t<o.getChildren().length;t++){let e=o.getChildren()[t],i=o.getSelected()===t;X.push((0,r.jsx)(td,{layout:d,node:e,path:H+"/tb"+t,selected:i},e.getId())),t<o.getChildren().length-1&&X.push((0,r.jsx)("div",{className:Y(b.FLEXLAYOUT__TABSET_TAB_DIVIDER)},"divider"+t))}let z=[],j=[],k={leading:s,stickyButtons:z,buttons:j,overflowPosition:void 0};d.customizeTabSet(o,k),s=k.leading,z=k.stickyButtons,j=k.buttons;let G=o.isEnableSingleTabStretch()&&1===o.getChildren().length,J=G&&o.getChildren()[0].isEnableClose()||o.isEnableClose();if(void 0===k.overflowPosition&&(k.overflowPosition=z.length),z.length>0&&(!o.isEnableTabWrap()&&(D||G)?j=[...z,...j]:X.push((0,r.jsx)("div",{ref:m,onPointerDown:W,onDragStart:t=>{t.preventDefault()},className:Y(b.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:z},"sticky_buttons_container"))),!o.isEnableTabWrap()&&S){let t;let e=d.i18nName(p.Overflow_Menu_Tooltip);if("function"==typeof A.more){let e=v.map(t=>({index:t,node:o.getChildren()[t]}));t=A.more(o,e)}else t=(0,r.jsxs)(r.Fragment,{children:[A.more,(0,r.jsx)("div",{className:Y(b.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:v.length>0?v.length:""})]});j.splice(Math.min(k.overflowPosition,j.length),0,(0,r.jsx)("button",{"data-layout-path":H+"/button/overflow",ref:E,className:Y(b.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(b.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:e,onClick:t=>{let e=d.getShowOverflowMenu(),i=v.map(t=>({index:t,node:o.getChildren()[t]}));if(void 0!==e)e(o,t,i,I);else{let t=E.current;Q(t,o,i,I,d)}t.stopPropagation()},onPointerDown:W,children:t},"overflowbutton"))}if(void 0!==P&&d.isSupportsPopout()&&P.isEnablePopout()&&P.isEnablePopoutIcon()){let t=d.i18nName(p.Popout_Tab);j.push((0,r.jsx)("button",{"data-layout-path":H+"/button/popout",title:t,className:Y(b.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(b.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:t=>{void 0!==P&&d.doAction(f.popoutTab(P.getId())),t.stopPropagation()},onPointerDown:W,children:"function"==typeof A.popout?A.popout(P):A.popout},"popout"))}if(o.canMaximize()){let t=d.i18nName(p.Restore),e=d.i18nName(p.Maximize);j.push((0,r.jsx)("button",{"data-layout-path":H+"/button/max",title:o.isMaximized()?t:e,className:Y(b.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(b.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(o.isMaximized()?"max":"min")),onClick:t=>{o.canMaximize()&&d.maximize(o),t.stopPropagation()},onPointerDown:W,children:o.isMaximized()?"function"==typeof A.restore?A.restore(o):A.restore:"function"==typeof A.maximize?A.maximize(o):A.maximize},"max"))}if(!o.isMaximized()&&J){let t=G?d.i18nName(p.Close_Tab):d.i18nName(p.Close_Tabset);j.push((0,r.jsx)("button",{"data-layout-path":H+"/button/close",title:t,className:Y(b.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(b.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:G?t=>{d.doAction(f.deleteTab(o.getChildren()[0].getId())),t.stopPropagation()}:t=>{d.doAction(f.deleteTabset(o.getId())),t.stopPropagation()},onPointerDown:W,children:"function"==typeof A.closeTabset?A.closeTabset(o):A.closeTabset},"close"))}if(o.isActive()&&o.isEnableActiveIcon()){let t=d.i18nName(p.Active_Tabset);j.push((0,r.jsx)("div",{"data-layout-path":H+"/button/active",title:t,className:Y(b.FLEXLAYOUT__TAB_TOOLBAR_ICON),children:"function"==typeof A.activeTabset?A.activeTabset(o):A.activeTabset},"active"))}let Z=(0,r.jsx)("div",{ref:_,className:Y(b.FLEXLAYOUT__TAB_TOOLBAR),onPointerDown:W,onDragStart:t=>{t.preventDefault()},children:j},"buttonbar"),q=Y(b.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(void 0!==o.getClassNameTabStrip()&&(q+=" "+o.getClassNameTabStrip()),q+=" "+b.FLEXLAYOUT__TABSET_TABBAR_OUTER_+o.getTabLocation(),o.isActive()&&(q+=" "+Y(b.FLEXLAYOUT__TABSET_SELECTED)),o.isMaximized()&&(q+=" "+Y(b.FLEXLAYOUT__TABSET_MAXIMIZED)),G){let t=o.getChildren()[0];void 0!==t.getTabSetClassName()&&(q+=" "+t.getTabSetClassName())}if(s&&(n=(0,r.jsx)("div",{className:Y(b.FLEXLAYOUT__TABSET_LEADING),children:s})),o.isEnableTabWrap())o.isEnableTabStrip()&&(e=(0,r.jsxs)("div",{className:q,style:{flexWrap:"wrap",gap:"1px",marginTop:"2px"},ref:h,"data-layout-path":H+"/tabstrip",onPointerDown:B,onDoubleClick:F,onContextMenu:U,onClick:C,onAuxClick:C,draggable:!0,onDragStart:M,children:[n,X,(0,r.jsx)("div",{style:{flexGrow:1}}),Z]}));else if(o.isEnableTabStrip()){let t;o.isEnableTabScrollbar()&&(t=(0,r.jsx)("div",{ref:c,className:Y(b.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:N})),e=(0,r.jsxs)("div",{className:q,ref:h,"data-layout-path":H+"/tabstrip",onPointerDown:B,onDoubleClick:F,onContextMenu:U,onClick:C,onAuxClick:C,draggable:!0,onWheel:y,onDragStart:M,children:[n,(0,r.jsxs)("div",{className:Y(b.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[(0,r.jsx)("div",{ref:u,className:Y(b.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+Y(b.FLEXLAYOUT__TABSET_TABBAR_INNER_+o.getTabLocation()),style:{overflowX:"auto",overflowY:"hidden"},onScroll:w,children:(0,r.jsx)("div",{style:{width:G?"100%":"none"},className:Y(b.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+Y(b.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+o.getTabLocation()),children:X})}),t]}),Z]})}if(0===o.getChildren().length){let t=d.getTabSetPlaceHolderCallback();t&&(i=t(o))}let $=(0,r.jsx)("div",{ref:T,className:Y(b.FLEXLAYOUT__TABSET_CONTENT),children:i});$="top"===o.getTabLocation()?(0,r.jsxs)(r.Fragment,{children:[e,$]}):(0,r.jsxs)(r.Fragment,{children:[$,e]});let K={flexGrow:Math.max(1,1e3*o.getWeight()),minWidth:o.getMinWidth(),minHeight:o.getMinHeight(),maxWidth:o.getMaxWidth(),maxHeight:o.getMaxHeight()};void 0===o.getModel().getMaximizedTabset(d.getWindowId())||o.isMaximized()||(K.display="none");let tt=(0,r.jsx)("div",{ref:R,className:Y(b.FLEXLAYOUT__TABSET_CONTAINER),style:K,children:(0,r.jsx)("div",{className:Y(b.FLEXLAYOUT__TABSET),"data-layout-path":H,children:$})});return o.isMaximized()&&d.getMainElement()?(0,l.createPortal)((0,r.jsx)("div",{style:{position:"absolute",display:"flex",top:0,left:0,bottom:0,right:0},children:tt}),d.getMainElement()):tt},tc=t=>{let{layout:e,node:i}=t,s=a.useRef(null),n=i.getOrientation()===g.HORZ;a.useLayoutEffect(()=>{i.setRect(e.getBoundingClientRect(s.current))});let o=[],l=0;for(let t of i.getChildren())l>0&&o.push((0,r.jsx)(J,{layout:e,node:i,index:l,horizontal:n},"splitter"+l)),t instanceof Y?o.push((0,r.jsx)(tc,{layout:e,node:t},t.getId())):t instanceof W&&o.push((0,r.jsx)(th,{layout:e,node:t},t.getId())),l++;let d={flexGrow:Math.max(1,1e3*i.getWeight()),minWidth:i.getMinWidth(),minHeight:i.getMinHeight(),maxWidth:i.getMaxWidth(),maxHeight:i.getMaxHeight()};return n?d.flexDirection="row":d.flexDirection="column",(0,r.jsx)("div",{ref:s,className:e.getClassName(b.FLEXLAYOUT__ROW),style:d,children:o})},tu=t=>{let{layout:e,selected:i,node:s,path:n}=t,o=a.useRef(null),l=a.useRef(!0),d=s.getParent(),h=d.getContentRect();a.useLayoutEffect(()=>{let t=s.getMoveableElement();o.current.appendChild(t),s.setMoveableElement(t);let e=()=>{s.saveScrollPosition()};return t.addEventListener("scroll",e),o.current.addEventListener("pointerdown",c),()=>{t.removeEventListener("scroll",e),o.current&&o.current.removeEventListener("pointerdown",c),s.setVisible(!1)}},[]),a.useEffect(()=>{s.isSelected()&&l.current&&(s.restoreScrollPosition(),l.current=!1)});let c=()=>{let t=s.getParent();t instanceof W&&!t.isActive()&&e.doAction(f.setActiveTabset(t.getId(),e.getWindowId()))};s.setRect(h);let u=e.getClassName,g={};h.styleWithPosition(g);let T=null;if(i){if(s.setVisible(!0),document.hidden&&s.isEnablePopoutOverlay()){let t={};h.styleWithPosition(t),T=(0,r.jsx)("div",{style:t,className:u(b.FLEXLAYOUT__TAB_OVERLAY)})}}else g.display="none",s.setVisible(!1);d instanceof W&&void 0!==s.getModel().getMaximizedTabset(e.getWindowId())&&(d.isMaximized()?g.zIndex=10:g.display="none"),d instanceof G&&!d.isShowing()&&(g.display="none");let _=u(b.FLEXLAYOUT__TAB);return d instanceof G&&(_+=" "+u(b.FLEXLAYOUT__TAB_BORDER)+" "+u(b.FLEXLAYOUT__TAB_BORDER_+d.getLocation().getName())),void 0!==s.getContentClassName()&&(_+=" "+s.getContentClassName()),(0,r.jsxs)(r.Fragment,{children:[T,(0,r.jsx)("div",{ref:o,style:g,className:_,"data-layout-path":n})]})};class tg extends a.Component{constructor(t){super(t),u(this,"retry",()=>{this.setState({hasError:!1})}),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,e){console.debug(t),console.debug(e)}render(){return this.state.hasError?(0,r.jsx)("div",{className:b.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER,children:(0,r.jsx)("div",{className:b.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT,children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[this.props.message,(0,r.jsx)("p",{children:(0,r.jsx)("button",{onClick:this.retry,children:this.props.retryText})})]})})}):this.props.children}}let tT=a.memo(({layout:t,node:e})=>(0,r.jsx)(tg,{message:t.i18nName(p.Error_rendering_component),retryText:t.i18nName(p.Error_rendering_component_retry),children:t.props.factory(e)}),function(t,e){let i=e.visible&&(!t.rect.equalSize(e.rect)||t.forceRevision!==e.forceRevision||t.tabsRevision!==e.tabsRevision);return!i});class t_ extends a.Component{constructor(t){super(t),u(this,"selfRef"),u(this,"revision"),this.selfRef=a.createRef(),this.revision=0}redraw(){this.selfRef.current.redraw("parent "+this.revision)}addTabToTabSet(t,e){return this.selfRef.current.addTabToTabSet(t,e)}addTabWithDragAndDrop(t,e,i){this.selfRef.current.addTabWithDragAndDrop(t,e,i)}moveTabWithDragAndDrop(t,e){this.selfRef.current.moveTabWithDragAndDrop(t,e)}addTabToActiveTabSet(t){return this.selfRef.current.addTabToActiveTabSet(t)}setDragComponent(t,e,i,s){this.selfRef.current.setDragComponent(t,e,i,s)}getRootDiv(){return this.selfRef.current.getRootDiv()}render(){return(0,r.jsx)(tb,{ref:this.selfRef,...this.props,renderRevision:this.revision++})}}let tp=class t extends a.Component{constructor(e){super(e),u(this,"selfRef"),u(this,"moveablesRef"),u(this,"findBorderBarSizeRef"),u(this,"mainRef"),u(this,"previousModel"),u(this,"orderedTabIds"),u(this,"orderedTabMoveableIds"),u(this,"moveableElementMap",new Map),u(this,"dropInfo"),u(this,"outlineDiv"),u(this,"currentDocument"),u(this,"currentWindow"),u(this,"supportsPopout"),u(this,"popoutURL"),u(this,"icons"),u(this,"resizeObserver"),u(this,"dragEnterCount",0),u(this,"dragging",!1),u(this,"windowId"),u(this,"layoutWindow"),u(this,"mainLayout"),u(this,"isMainWindow"),u(this,"isDraggingOverWindow"),u(this,"styleObserver"),u(this,"popoutWindowName"),u(this,"updateLayoutMetrics",()=>{if(this.findBorderBarSizeRef.current){let t=this.findBorderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:t})}}),u(this,"onModelChange",t=>{this.redrawInternal("model change"),this.props.onModelChange&&this.props.onModelChange(this.props.model,t)}),u(this,"updateRect",()=>{if(this.selfRef.current){let t=T.fromDomRect(this.selfRef.current.getBoundingClientRect());t.equals(this.state.rect)||0===t.width||0===t.height||(this.setState({rect:t}),this.windowId!==j.MAIN_WINDOW_ID&&this.redrawInternal("rect updated"))}}),u(this,"getClassName",t=>void 0===this.props.classNameMapper?t:this.props.classNameMapper(t)),u(this,"onCloseWindow",t=>{this.doAction(f.closeWindow(t.windowId))}),u(this,"onSetWindow",(t,e)=>{}),u(this,"showControlInPortal",(t,e)=>{let i=(0,l.createPortal)(t,e);this.setState({portal:i})}),u(this,"hideControlInPortal",()=>{this.setState({portal:void 0})}),u(this,"getIcons",()=>this.icons),u(this,"setDragNode",(e,i)=>{if(t.dragState=new tA(this.mainLayout,"internal",i,void 0,void 0),e.dataTransfer.setData("text/plain","--flexlayout--"),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.dropEffect="move",this.dragEnterCount=0,i instanceof W){let t=!1,s=this.i18nName(p.Move_Tabset);if(i.getChildren().length>0&&(s=this.i18nName(p.Move_Tabs).replace("?",String(i.getChildren().length))),this.props.onRenderDragRect){let n=this.props.onRenderDragRect(s,i,void 0);n&&(this.setDragComponent(e,n,10,10),t=!0)}t||this.setDragComponent(e,s,10,10)}else{let t=e.target,s=t.getBoundingClientRect(),n=e.clientX-s.left,o=e.clientY-s.top,a=null==i?void 0:i.getParent(),l=a instanceof G&&a.getOrientation()===g.HORZ,d=l?10:n,h=l?10:o,c=!1;if(this.props.onRenderDragRect){let t=(0,r.jsx)(K,{layout:this,node:i},i.getId()),s=this.props.onRenderDragRect(t,i,void 0);s&&(this.setDragComponent(e,s,d,h),c=!0)}c||(function(){let t=navigator.userAgent;return t.includes("Safari")&&!t.includes("Chrome")&&!t.includes("Chromium")}()?this.setDragComponent(e,(0,r.jsx)(K,{node:i,layout:this}),d,h):e.dataTransfer.setDragImage(i.getTabStamp(),d,h))}}),u(this,"onDragEnterRaw",t=>{this.dragEnterCount++,1===this.dragEnterCount&&this.onDragEnter(t)}),u(this,"onDragLeaveRaw",t=>{this.dragEnterCount--,0===this.dragEnterCount&&this.onDragLeave(t)}),u(this,"onDragEnter",e=>{if(!t.dragState&&this.props.onExternalDrag){let i=this.props.onExternalDrag(e);if(i){let e=w.fromJson(i.json,this.props.model,!1);t.dragState=new tA(this.mainLayout,"external",e,i.json,i.onDrop)}}if(t.dragState){if(this.windowId!==j.MAIN_WINDOW_ID&&t.dragState.mainLayout===this.mainLayout&&t.dragState.mainLayout.setDraggingOverWindow(!0),t.dragState.mainLayout!==this.mainLayout)return;e.preventDefault(),this.dropInfo=void 0;let i=this.selfRef.current;this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(b.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden";let s=this.props.model.getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${s}s, left ${s}s, width ${s}s, height ${s}s`,i.appendChild(this.outlineDiv),this.dragging=!0,this.showOverlay(!0),this.isDraggingOverWindow||void 0!==this.props.model.getMaximizedTabset(this.windowId)||this.setState({showEdges:this.props.model.isEnableEdgeDock()});let n=this.selfRef.current.getBoundingClientRect(),o=new T(e.clientX-n.left,e.clientY-n.top,1,1);o.positionElement(this.outlineDiv)}}),u(this,"onDragOver",e=>{var i;if(this.dragging&&!this.isDraggingOverWindow){e.preventDefault();let s=null==(i=this.selfRef.current)?void 0:i.getBoundingClientRect(),n={x:e.clientX-((null==s?void 0:s.left)??0),y:e.clientY-((null==s?void 0:s.top)??0)};this.checkForBorderToShow(n.x,n.y);let o=this.props.model.findDropTargetNode(this.windowId,t.dragState.dragNode,n.x,n.y);o&&(this.dropInfo=o,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(o.className),o.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))}}),u(this,"onDragLeave",e=>{this.dragging&&(this.windowId!==j.MAIN_WINDOW_ID&&t.dragState.mainLayout.setDraggingOverWindow(!1),this.clearDragLocal())}),u(this,"onDrop",e=>{if(this.dragging){e.preventDefault();let i=t.dragState;if(this.dropInfo){if(void 0!==i.dragJson){let t=this.doAction(f.addNode(i.dragJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));void 0!==i.fnNewNodeDropped&&i.fnNewNodeDropped(t,e)}else void 0!==i.dragNode&&this.doAction(f.moveNode(i.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index))}this.mainLayout.clearDragMain()}this.dragEnterCount=0}),this.orderedTabIds=[],this.orderedTabMoveableIds=[],this.selfRef=a.createRef(),this.moveablesRef=a.createRef(),this.mainRef=a.createRef(),this.findBorderBarSizeRef=a.createRef(),this.supportsPopout=void 0!==e.supportsPopout?e.supportsPopout:tf,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons={...tE,...e.icons},this.windowId=e.windowId?e.windowId:j.MAIN_WINDOW_ID,this.mainLayout=this.props.mainLayout?this.props.mainLayout:this,this.isDraggingOverWindow=!1,this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.popoutWindowName=this.props.popoutWindowName||"Popout Window",this.state={rect:T.empty(),editingTab:void 0,showEdges:!1,showOverlay:!1,calculatedBorderBarSize:29,layoutRevision:0,forceRevision:0,showHiddenBorder:_.CENTER},this.isMainWindow=this.windowId===j.MAIN_WINDOW_ID}componentDidMount(){if(this.updateRect(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.layoutWindow.window=this.currentWindow,this.layoutWindow.toScreenRectFunction=t=>this.getScreenRect(t),this.resizeObserver=new ResizeObserver(t=>{requestAnimationFrame(()=>{this.updateRect()})}),this.selfRef.current&&this.resizeObserver.observe(this.selfRef.current),this.isMainWindow)this.props.model.addChangeListener(this.onModelChange),this.updateLayoutMetrics();else{this.currentWindow.addEventListener("resize",()=>{this.updateRect()});let t=this.props.mainLayout.getRootDiv(),e=this.selfRef.current;M(t,e),this.styleObserver=new MutationObserver(()=>{let i=M(t,e);i&&this.redraw("mutation observer")}),this.styleObserver.observe(t,{attributeFilter:["style"]})}document.addEventListener("visibilitychange",()=>{for(let[t,e]of this.props.model.getwindowsMap()){let t=e.layout;t&&this.redraw("visibility change")}})}componentDidUpdate(){this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.isMainWindow&&(this.props.model!==this.previousModel&&(void 0!==this.previousModel&&this.previousModel.removeChangeListener(this.onModelChange),this.props.model.getwindowsMap().get(this.windowId).layout=this,this.props.model.addChangeListener(this.onModelChange),this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.layoutWindow.toScreenRectFunction=t=>this.getScreenRect(t),this.previousModel=this.props.model,this.tidyMoveablesMap()),this.updateLayoutMetrics())}componentWillUnmount(){var t,e;this.selfRef.current&&(null==(t=this.resizeObserver)||t.unobserve(this.selfRef.current)),this.isMainWindow&&this.props.model.removeChangeListener(this.onModelChange),null==(e=this.styleObserver)||e.disconnect()}render(){if(!this.selfRef.current)return(0,r.jsxs)("div",{ref:this.selfRef,className:this.getClassName(b.FLEXLAYOUT__LAYOUT),children:[(0,r.jsx)("div",{ref:this.moveablesRef,className:this.getClassName(b.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),this.renderMetricsElements()]});let t=this.props.model;t.getRoot(this.windowId).calcMinMaxSize(),t.getRoot(this.windowId).setPaths(""),t.getBorderSet().setPaths();let e=this.renderLayout(),i=this.renderBorders(e),s=this.renderTabs(),n=this.reorderComponents(s,this.orderedTabIds),o=null,a=null,l=null,d=null;if(this.isMainWindow){o=this.renderWindows(),d=this.renderMetricsElements();let t=this.renderTabMoveables();a=this.reorderComponents(t,this.orderedTabMoveableIds),l=(0,r.jsx)("div",{className:this.getClassName(b.FLEXLAYOUT__LAYOUT_TAB_STAMPS),children:this.renderTabStamps()},"__tabStamps__")}return(0,r.jsxs)("div",{ref:this.selfRef,className:this.getClassName(b.FLEXLAYOUT__LAYOUT),onDragEnter:this.onDragEnterRaw,onDragLeave:this.onDragLeaveRaw,onDragOver:this.onDragOver,onDrop:this.onDrop,children:[(0,r.jsx)("div",{ref:this.moveablesRef,className:this.getClassName(b.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),d,(0,r.jsx)(tl,{layout:this,show:this.state.showOverlay},"__overlay__"),i,n,a,l,this.state.portal,o]})}renderBorders(t){let e=this.getClassName(b.FLEXLAYOUT__LAYOUT_MAIN),i=this.props.model.getBorderSet().getBorderMap();if(!this.isMainWindow||!(i.size>0))return(0,r.jsx)("div",{className:e,ref:this.mainRef,style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex"},children:t});{t=(0,r.jsx)("div",{className:e,ref:this.mainRef,children:t});let s=new Map,n=new Map;for(let[t,e]of _.values){let t=i.get(e),o=t&&t.isShowing()&&(!t.isAutoHide()||t.isAutoHide()&&(t.getChildren().length>0||this.state.showHiddenBorder===e));o&&(s.set(e,(0,r.jsx)(ti,{layout:this,border:t,size:this.state.calculatedBorderBarSize})),n.set(e,(0,r.jsx)(Z,{layout:this,border:t,show:-1!==t.getSelected()})))}let o=this.getClassName(b.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER),a=this.getClassName(b.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER);if(this.props.model.getBorderSet().getLayoutHorizontal()){let e=(0,r.jsxs)("div",{className:a,style:{flexDirection:"column"},children:[n.get(_.TOP),(0,r.jsxs)("div",{className:a,style:{flexDirection:"row"},children:[n.get(_.LEFT),t,n.get(_.RIGHT)]}),n.get(_.BOTTOM)]});return(0,r.jsxs)("div",{className:o,style:{flexDirection:"column"},children:[s.get(_.TOP),(0,r.jsxs)("div",{className:a,style:{flexDirection:"row"},children:[s.get(_.LEFT),e,s.get(_.RIGHT)]}),s.get(_.BOTTOM)]})}{let e=(0,r.jsxs)("div",{className:a,style:{flexDirection:"row"},children:[n.get(_.LEFT),(0,r.jsxs)("div",{className:a,style:{flexDirection:"column"},children:[n.get(_.TOP),t,n.get(_.BOTTOM)]}),n.get(_.RIGHT)]});return(0,r.jsxs)("div",{className:o,style:{flexDirection:"row"},children:[s.get(_.LEFT),(0,r.jsxs)("div",{className:a,style:{flexDirection:"column"},children:[s.get(_.TOP),e,s.get(_.BOTTOM)]}),s.get(_.RIGHT)]})}}}renderLayout(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tc,{layout:this,node:this.props.model.getRoot(this.windowId)},"__row__"),this.renderEdgeIndicators()]})}renderEdgeIndicators(){let t=[],e=this.icons.edgeArrow;if(this.state.showEdges){let i=this.props.model.getRoot(this.windowId).getRect(),s=tm/2,n=this.getClassName(b.FLEXLAYOUT__EDGE_RECT);t.push((0,r.jsx)("div",{style:{top:0,left:i.width/2-s,width:tm,height:tO,borderBottomLeftRadius:50,borderBottomRightRadius:50},className:n+" "+this.getClassName(b.FLEXLAYOUT__EDGE_RECT_TOP),children:(0,r.jsx)("div",{style:{transform:"rotate(180deg)"},children:e})},"North")),t.push((0,r.jsx)("div",{style:{top:i.height/2-s,left:0,width:tO,height:tm,borderTopRightRadius:50,borderBottomRightRadius:50},className:n+" "+this.getClassName(b.FLEXLAYOUT__EDGE_RECT_LEFT),children:(0,r.jsx)("div",{style:{transform:"rotate(90deg)"},children:e})},"West")),t.push((0,r.jsx)("div",{style:{top:i.height-tO,left:i.width/2-s,width:tm,height:tO,borderTopLeftRadius:50,borderTopRightRadius:50},className:n+" "+this.getClassName(b.FLEXLAYOUT__EDGE_RECT_BOTTOM),children:(0,r.jsx)("div",{children:e})},"South")),t.push((0,r.jsx)("div",{style:{top:i.height/2-s,left:i.width-tO,width:tO,height:tm,borderTopLeftRadius:50,borderBottomLeftRadius:50},className:n+" "+this.getClassName(b.FLEXLAYOUT__EDGE_RECT_RIGHT),children:(0,r.jsx)("div",{style:{transform:"rotate(-90deg)"},children:e})},"East"))}return t}renderWindows(){let e=[];if(this.supportsPopout){let i=this.props.model.getwindowsMap(),s=1;for(let[n,o]of i)n!==j.MAIN_WINDOW_ID&&(e.push((0,r.jsx)(tn,{layout:this,title:this.popoutWindowName+" "+s,layoutWindow:o,url:this.popoutURL+"?id="+n,onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow,children:(0,r.jsx)("div",{className:this.props.popoutClassName,children:(0,r.jsx)(t,{...this.props,windowId:n,mainLayout:this})})},n)),s++)}return e}renderTabMoveables(){let t=new Map;return this.props.model.visitNodes(e=>{if(e instanceof w){let i=this.getMoveableElement(e.getId());e.setMoveableElement(i);let s=e.isSelected(),n=e.getParent().getContentRect(),o=s||!e.isEnableRenderOnDemand(),a=e.isRendered()||o&&n.width>0&&n.height>0;if(a){let s=e.getId()+(e.isEnableWindowReMount()?e.getWindowId():"");t.set(e.getId(),(0,l.createPortal)((0,r.jsx)(tT,{layout:this,node:e,rect:n,visible:o,forceRevision:this.state.forceRevision,tabsRevision:this.props.renderRevision},s),i,s)),e.setRendered(a)}}}),t}renderTabStamps(){let t=[];return this.props.model.visitNodes(e=>{e instanceof w&&t.push((0,r.jsx)(ts,{layout:this,node:e},e.getId()))}),t}renderTabs(){let t=new Map;return this.props.model.visitWindowNodes(this.windowId,e=>{if(e instanceof w){let i=e.isSelected(),s=e.getPath(),n=e.isRendered()||i||!e.isEnableRenderOnDemand();n&&t.set(e.getId(),(0,r.jsx)(tu,{layout:this,path:s,node:e,selected:i},e.getId()))}}),t}renderMetricsElements(){return(0,r.jsx)("div",{ref:this.findBorderBarSizeRef,className:this.getClassName(b.FLEXLAYOUT__BORDER_SIZER),children:"FindBorderBarSize"},"findBorderBarSize")}checkForBorderToShow(t,e){let i=this.getBoundingClientRect(this.mainRef.current),s=i.getCenter(),n=tm/2,o=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===_.CENTER&&(e>s.y-n&&e<s.y+n||t>s.x-n&&t<s.x+n)&&(o=!0);let r=_.CENTER;!o&&(t<=i.x+tO?r=_.LEFT:t>=i.getRight()-tO?r=_.RIGHT:e<=i.y+tO?r=_.TOP:e>=i.getBottom()-tO&&(r=_.BOTTOM)),r!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:r})}tidyMoveablesMap(){let t=new Map;for(let[e,i]of(this.props.model.visitNodes((e,i)=>{e instanceof w&&t.set(e.getId(),e)}),this.moveableElementMap))t.has(e)||(i.remove(),this.moveableElementMap.delete(e))}reorderComponents(t,e){let i=[],s=new Set;for(let n of e)t.get(n)&&(i.push(n),s.add(n));for(let[n,o]of(e.splice(0,e.length,...i),t))s.has(n)||e.push(n);return e.map(e=>t.get(e))}redraw(t){this.mainLayout.setState((t,e)=>({forceRevision:t.forceRevision+1}))}redrawInternal(t){this.mainLayout.setState((t,e)=>({layoutRevision:t.layoutRevision+1}))}doAction(t){if(void 0===this.props.onAction)return this.props.model.doAction(t);{let e=this.props.onAction(t);return void 0!==e?this.props.model.doAction(e):void 0}}getBoundingClientRect(t){let e=this.getDomRect();return e?T.getBoundingClientRect(t).relativeTo(e):T.empty()}getMoveableContainer(){return this.moveablesRef.current}getMoveableElement(t){let e=this.moveableElementMap.get(t);return void 0===e&&(e=document.createElement("div"),this.moveablesRef.current.appendChild(e),e.className=b.FLEXLAYOUT__TAB_MOVEABLE,this.moveableElementMap.set(t,e)),e}getMainLayout(){return this.mainLayout}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current?T.fromDomRect(this.selfRef.current.getBoundingClientRect()):T.empty()}getWindowId(){return this.windowId}getRootDiv(){return this.selfRef.current}getMainElement(){return this.mainRef.current}getFactory(){return this.props.factory}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){return this.props.realtimeResize??!1}getPopoutURL(){return this.popoutURL}setEditingTab(t){this.setState({editingTab:t})}getEditingTab(){return this.state.editingTab}getModel(){return this.props.model}getScreenRect(t){let e=t.clone(),i=this.getDomRect();return e.x=this.currentWindow.screenX+this.currentWindow.scrollX+1+i.x+e.x,e.y=this.currentWindow.screenY+this.currentWindow.scrollY+59+i.y+e.y,e.height+=60,e.width+=2,e}addTabToTabSet(t,e){let i=this.props.model.getNodeById(t);if(void 0!==i){let i=this.doAction(f.addNode(e,t,_.CENTER,-1));return i}}addTabToActiveTabSet(t){let e=this.props.model.getActiveTabset(this.windowId);if(void 0!==e){let i=this.doAction(f.addNode(t,e.getId(),_.CENTER,-1));return i}}maximize(t){this.doAction(f.maximizeToggle(t.getId(),this.getWindowId()))}customizeTab(t,e){this.props.onRenderTab&&this.props.onRenderTab(t,e)}customizeTabSet(t,e){this.props.onRenderTabSet&&this.props.onRenderTabSet(t,e)}i18nName(t,e){let i;return this.props.i18nMapper&&(i=this.props.i18nMapper(t,e)),void 0===i&&(i=t+(void 0===e?"":e)),i}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(t,e){this.props.onContextMenu&&this.props.onContextMenu(t,e)}auxMouseClick(t,e){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(t,e)}showOverlay(t){this.setState({showOverlay:t}),y(!t,this.currentDocument)}addTabWithDragAndDrop(e,i,s){let n=w.fromJson(i,this.props.model,!1);t.dragState=new tA(this.mainLayout,"add",n,i,s)}moveTabWithDragAndDrop(t,e){this.setDragNode(t,e)}setDragComponent(t,e,i,s){let n=(0,r.jsx)("div",{style:{position:"unset"},className:this.getClassName(b.FLEXLAYOUT__LAYOUT)+" "+this.getClassName(b.FLEXLAYOUT__DRAG_RECT),children:e}),o=this.currentDocument.createElement("div");o.setAttribute("data-layout-path","/drag-rectangle"),o.style.position="absolute",o.style.left="-10000px",o.style.top="-10000px",this.currentDocument.body.appendChild(o),(0,d.createRoot)(o).render(n),t.dataTransfer.setDragImage(o,i,s),setTimeout(()=>{this.currentDocument.body.removeChild(o)},0)}setDraggingOverWindow(t){this.isDraggingOverWindow!==t&&(this.outlineDiv&&(this.outlineDiv.style.visibility=t?"hidden":"visible"),t?this.setState({showEdges:!1}):void 0===this.props.model.getMaximizedTabset(this.windowId)&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.isDraggingOverWindow=t)}clearDragMain(){for(let[,e]of(t.dragState=void 0,this.windowId===j.MAIN_WINDOW_ID&&(this.isDraggingOverWindow=!1),this.props.model.getwindowsMap()))e.layout.clearDragLocal()}clearDragLocal(){this.setState({showEdges:!1}),this.showOverlay(!1),this.dragEnterCount=0,this.dragging=!1,this.outlineDiv&&(this.selfRef.current.removeChild(this.outlineDiv),this.outlineDiv=void 0)}};u(tp,"dragState");let tb=tp,tE={close:(0,r.jsx)(ta,{}),closeTabset:(0,r.jsx)(ta,{}),popout:(0,r.jsx)(()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:tr,viewBox:"0 0 20 20",fill:"var(--color-icon)",children:[(0,r.jsx)("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),(0,r.jsx)("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),{}),maximize:(0,r.jsx)(()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:tr,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,r.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})]}),{}),restore:(0,r.jsx)(()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:tr,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,r.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})]}),{}),more:(0,r.jsx)(()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:tr,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,r.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})]}),{}),edgeArrow:(0,r.jsx)(()=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:10,height:10},preserveAspectRatio:"none",viewBox:"0 0 100 100",children:(0,r.jsx)("path",{fill:"var(--color-edge-icon)",stroke:"var(--color-edge-icon)",d:"M10 30 L90 30 l-40 40 Z"})}),{}),activeTabset:(0,r.jsx)(()=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:tr,height:"24px",viewBox:"0 -960 960 960",width:"24px",children:(0,r.jsx)("path",{fill:"var(--color-icon)",stroke:"var(--color-icon)",d:"M440-120v-264L254-197l-57-57 187-186H120v-80h264L197-706l57-57 186 187v-264h80v264l186-187 57 57-187 186h264v80H576l187 186-57 57-186-187v264h-80Z"})}),{})},tf=N(),tm=100,tO=10;class tA{constructor(t,e,i,s,n){u(this,"mainLayout"),u(this,"dragSource"),u(this,"dragNode"),u(this,"dragJson"),u(this,"fnNewNodeDropped"),this.mainLayout=t,this.dragSource=e,this.dragNode=i,this.dragJson=s,this.fnNewNodeDropped=n}}}}]);